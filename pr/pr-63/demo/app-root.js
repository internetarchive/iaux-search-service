const li=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}};li();/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const oe=globalThis,Ce=oe.trustedTypes,_t=Ce?Ce.createPolicy("lit-html",{createHTML:n=>n}):void 0,Wt="$lit$",O=`lit$${Math.random().toFixed(9).slice(2)}$`,Jt="?"+O,oi=`<${Jt}>`,J=document,ce=()=>J.createComment(""),pe=n=>n===null||typeof n!="object"&&typeof n!="function",ct=Array.isArray,di=n=>ct(n)||typeof(n==null?void 0:n[Symbol.iterator])=="function",We=`[ 	
\f\r]`,ne=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,wt=/-->/g,mt=/>/g,D=RegExp(`>|${We}(?:([^\\s"'>=/]+)(${We}*=${We}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),$t=/'/g,yt=/"/g,Zt=/^(?:script|style|textarea|title)$/i,ui=n=>(e,...t)=>({_$litType$:n,strings:e,values:t}),hi=ui(1),ve=Symbol.for("lit-noChange"),E=Symbol.for("lit-nothing"),bt=new WeakMap,B=J.createTreeWalker(J,129);function Gt(n,e){if(!ct(n)||!n.hasOwnProperty("raw"))throw Error("invalid template strings array");return _t!==void 0?_t.createHTML(e):e}const ci=(n,e)=>{const t=n.length-1,i=[];let r,a=e===2?"<svg>":e===3?"<math>":"",s=ne;for(let u=0;u<t;u++){const o=n[u];let h,p,c=-1,v=0;for(;v<o.length&&(s.lastIndex=v,p=s.exec(o),p!==null);)v=s.lastIndex,s===ne?p[1]==="!--"?s=wt:p[1]!==void 0?s=mt:p[2]!==void 0?(Zt.test(p[2])&&(r=RegExp("</"+p[2],"g")),s=D):p[3]!==void 0&&(s=D):s===D?p[0]===">"?(s=r!=null?r:ne,c=-1):p[1]===void 0?c=-2:(c=s.lastIndex-p[2].length,h=p[1],s=p[3]===void 0?D:p[3]==='"'?yt:$t):s===yt||s===$t?s=D:s===wt||s===mt?s=ne:(s=D,r=void 0);const _=s===D&&n[u+1].startsWith("/>")?" ":"";a+=s===ne?o+oi:c>=0?(i.push(h),o.slice(0,c)+Wt+o.slice(c)+O+_):o+O+(c===-2?u:_)}return[Gt(n,a+(n[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),i]};class ge{constructor({strings:e,_$litType$:t},i){let r;this.parts=[];let a=0,s=0;const u=e.length-1,o=this.parts,[h,p]=ci(e,t);if(this.el=ge.createElement(h,i),B.currentNode=this.el.content,t===2||t===3){const c=this.el.content.firstChild;c.replaceWith(...c.childNodes)}for(;(r=B.nextNode())!==null&&o.length<u;){if(r.nodeType===1){if(r.hasAttributes())for(const c of r.getAttributeNames())if(c.endsWith(Wt)){const v=p[s++],_=r.getAttribute(c).split(O),C=/([.?@])?(.*)/.exec(v);o.push({type:1,index:a,name:C[2],strings:_,ctor:C[1]==="."?vi:C[1]==="?"?gi:C[1]==="@"?fi:Ve}),r.removeAttribute(c)}else c.startsWith(O)&&(o.push({type:6,index:a}),r.removeAttribute(c));if(Zt.test(r.tagName)){const c=r.textContent.split(O),v=c.length-1;if(v>0){r.textContent=Ce?Ce.emptyScript:"";for(let _=0;_<v;_++)r.append(c[_],ce()),B.nextNode(),o.push({type:2,index:++a});r.append(c[v],ce())}}}else if(r.nodeType===8)if(r.data===Jt)o.push({type:2,index:a});else{let c=-1;for(;(c=r.data.indexOf(O,c+1))!==-1;)o.push({type:7,index:a}),c+=O.length-1}a++}}static createElement(e,t){const i=J.createElement("template");return i.innerHTML=e,i}}function X(n,e,t=n,i){var s,u,o;if(e===ve)return e;let r=i!==void 0?(s=t._$Co)==null?void 0:s[i]:t._$Cl;const a=pe(e)?void 0:e._$litDirective$;return(r==null?void 0:r.constructor)!==a&&((u=r==null?void 0:r._$AO)==null||u.call(r,!1),a===void 0?r=void 0:(r=new a(n),r._$AT(n,t,i)),i!==void 0?((o=t._$Co)!=null?o:t._$Co=[])[i]=r:t._$Cl=r),r!==void 0&&(e=X(n,r._$AS(n,e.values),r,i)),e}class pi{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var h;const{el:{content:t},parts:i}=this._$AD,r=((h=e==null?void 0:e.creationScope)!=null?h:J).importNode(t,!0);B.currentNode=r;let a=B.nextNode(),s=0,u=0,o=i[0];for(;o!==void 0;){if(s===o.index){let p;o.type===2?p=new Ae(a,a.nextSibling,this,e):o.type===1?p=new o.ctor(a,o.name,o.strings,this,e):o.type===6&&(p=new _i(a,this,e)),this._$AV.push(p),o=i[++u]}s!==(o==null?void 0:o.index)&&(a=B.nextNode(),s++)}return B.currentNode=J,r}p(e){let t=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class Ae{get _$AU(){var e,t;return(t=(e=this._$AM)==null?void 0:e._$AU)!=null?t:this._$Cv}constructor(e,t,i,r){var a;this.type=2,this._$AH=E,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=r,this._$Cv=(a=r==null?void 0:r.isConnected)!=null?a:!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=X(this,e,t),pe(e)?e===E||e==null||e===""?(this._$AH!==E&&this._$AR(),this._$AH=E):e!==this._$AH&&e!==ve&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):di(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==E&&pe(this._$AH)?this._$AA.nextSibling.data=e:this.T(J.createTextNode(e)),this._$AH=e}$(e){var a;const{values:t,_$litType$:i}=e,r=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=ge.createElement(Gt(i.h,i.h[0]),this.options)),i);if(((a=this._$AH)==null?void 0:a._$AD)===r)this._$AH.p(t);else{const s=new pi(r,this),u=s.u(this.options);s.p(t),this.T(u),this._$AH=s}}_$AC(e){let t=bt.get(e.strings);return t===void 0&&bt.set(e.strings,t=new ge(e)),t}k(e){ct(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,r=0;for(const a of e)r===t.length?t.push(i=new Ae(this.O(ce()),this.O(ce()),this,this.options)):i=t[r],i._$AI(a),r++;r<t.length&&(this._$AR(i&&i._$AB.nextSibling,r),t.length=r)}_$AR(e=this._$AA.nextSibling,t){var i;for((i=this._$AP)==null?void 0:i.call(this,!1,!0,t);e&&e!==this._$AB;){const r=e.nextSibling;e.remove(),e=r}}setConnected(e){var t;this._$AM===void 0&&(this._$Cv=e,(t=this._$AP)==null||t.call(this,e))}}class Ve{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,i,r,a){this.type=1,this._$AH=E,this._$AN=void 0,this.element=e,this.name=t,this._$AM=r,this.options=a,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=E}_$AI(e,t=this,i,r){const a=this.strings;let s=!1;if(a===void 0)e=X(this,e,t,0),s=!pe(e)||e!==this._$AH&&e!==ve,s&&(this._$AH=e);else{const u=e;let o,h;for(e=a[0],o=0;o<a.length-1;o++)h=X(this,u[i+o],t,o),h===ve&&(h=this._$AH[o]),s||(s=!pe(h)||h!==this._$AH[o]),h===E?e=E:e!==E&&(e+=(h!=null?h:"")+a[o+1]),this._$AH[o]=h}s&&!r&&this.j(e)}j(e){e===E?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e!=null?e:"")}}class vi extends Ve{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===E?void 0:e}}class gi extends Ve{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==E)}}class fi extends Ve{constructor(e,t,i,r,a){super(e,t,i,r,a),this.type=5}_$AI(e,t=this){var s;if((e=(s=X(this,e,t,0))!=null?s:E)===ve)return;const i=this._$AH,r=e===E&&i!==E||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,a=e!==E&&(i===E||r);r&&this.element.removeEventListener(this.name,this,i),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;typeof this._$AH=="function"?this._$AH.call((i=(t=this.options)==null?void 0:t.host)!=null?i:this.element,e):this._$AH.handleEvent(e)}}class _i{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){X(this,e)}}const Je=oe.litHtmlPolyfillSupport;var qt;Je==null||Je(ge,Ae),((qt=oe.litHtmlVersions)!=null?qt:oe.litHtmlVersions=[]).push("3.2.1");const wi=(n,e,t)=>{var a,s;const i=(a=t==null?void 0:t.renderBefore)!=null?a:e;let r=i._$litPart$;if(r===void 0){const u=(s=t==null?void 0:t.renderBefore)!=null?s:null;i._$litPart$=r=new Ae(e.insertBefore(ce(),u),u,void 0,t!=null?t:{})}return r._$AI(n),r};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function l(n,e,t,i){var r=arguments.length,a=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,e,t,i);else for(var u=n.length-1;u>=0;u--)(s=n[u])&&(a=(r<3?s(a):r>3?s(e,t,a):s(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ke=window,pt=ke.ShadowRoot&&(ke.ShadyCSS===void 0||ke.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,vt=Symbol(),At=new WeakMap;class Kt{constructor(e,t,i){if(this._$cssResult$=!0,i!==vt)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(pt&&e===void 0){const i=t!==void 0&&t.length===1;i&&(e=At.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&At.set(t,e))}return e}toString(){return this.cssText}}const mi=n=>new Kt(typeof n=="string"?n:n+"",void 0,vt),$i=(n,...e)=>{const t=n.length===1?n[0]:e.reduce((i,r,a)=>i+(s=>{if(s._$cssResult$===!0)return s.cssText;if(typeof s=="number")return s;throw Error("Value passed to 'css' function must be a 'css' function result: "+s+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+n[a+1],n[0]);return new Kt(t,n,vt)},yi=(n,e)=>{pt?n.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet):e.forEach(t=>{const i=document.createElement("style"),r=ke.litNonce;r!==void 0&&i.setAttribute("nonce",r),i.textContent=t.cssText,n.appendChild(i)})},Mt=pt?n=>n:n=>n instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return mi(t)})(n):n;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Ze;const Ne=window,St=Ne.trustedTypes,bi=St?St.emptyScript:"",Et=Ne.reactiveElementPolyfillSupport,nt={toAttribute(n,e){switch(e){case Boolean:n=n?bi:null;break;case Object:case Array:n=n==null?n:JSON.stringify(n)}return n},fromAttribute(n,e){let t=n;switch(e){case Boolean:t=n!==null;break;case Number:t=n===null?null:Number(n);break;case Object:case Array:try{t=JSON.parse(n)}catch{t=null}}return t}},Xt=(n,e)=>e!==n&&(e==e||n==n),Ge={attribute:!0,type:String,converter:nt,reflect:!1,hasChanged:Xt},st="finalized";class K extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),((t=this.h)!==null&&t!==void 0?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((t,i)=>{const r=this._$Ep(i,t);r!==void 0&&(this._$Ev.set(r,i),e.push(r))}),e}static createProperty(e,t=Ge){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const i=typeof e=="symbol"?Symbol():"__"+e,r=this.getPropertyDescriptor(e,i,t);r!==void 0&&Object.defineProperty(this.prototype,e,r)}}static getPropertyDescriptor(e,t,i){return{get(){return this[t]},set(r){const a=this[e];this[t]=r,this.requestUpdate(e,a,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||Ge}static finalize(){if(this.hasOwnProperty(st))return!1;this[st]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,i=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const r of i)this.createProperty(r,t[r])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const r of i)t.unshift(Mt(r))}else e!==void 0&&t.push(Mt(e));return t}static _$Ep(e,t){const i=t.attribute;return i===!1?void 0:typeof i=="string"?i:typeof e=="string"?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(t=>t(this))}addController(e){var t,i;((t=this._$ES)!==null&&t!==void 0?t:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((i=e.hostConnected)===null||i===void 0||i.call(e))}removeController(e){var t;(t=this._$ES)===null||t===void 0||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])})}createRenderRoot(){var e;const t=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return yi(t,this.constructor.elementStyles),t}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(t=>{var i;return(i=t.hostConnected)===null||i===void 0?void 0:i.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(t=>{var i;return(i=t.hostDisconnected)===null||i===void 0?void 0:i.call(t)})}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$EO(e,t,i=Ge){var r;const a=this.constructor._$Ep(e,i);if(a!==void 0&&i.reflect===!0){const s=(((r=i.converter)===null||r===void 0?void 0:r.toAttribute)!==void 0?i.converter:nt).toAttribute(t,i.type);this._$El=e,s==null?this.removeAttribute(a):this.setAttribute(a,s),this._$El=null}}_$AK(e,t){var i;const r=this.constructor,a=r._$Ev.get(e);if(a!==void 0&&this._$El!==a){const s=r.getPropertyOptions(a),u=typeof s.converter=="function"?{fromAttribute:s.converter}:((i=s.converter)===null||i===void 0?void 0:i.fromAttribute)!==void 0?s.converter:nt;this._$El=a,this[a]=u.fromAttribute(t,s.type),this._$El=null}}requestUpdate(e,t,i){let r=!0;e!==void 0&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||Xt)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),i.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,i))):r=!1),!this.isUpdatePending&&r&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((r,a)=>this[a]=r),this._$Ei=void 0);let t=!1;const i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),(e=this._$ES)===null||e===void 0||e.forEach(r=>{var a;return(a=r.hostUpdate)===null||a===void 0?void 0:a.call(r)}),this.update(i)):this._$Ek()}catch(r){throw t=!1,this._$Ek(),r}t&&this._$AE(i)}willUpdate(e){}_$AE(e){var t;(t=this._$ES)===null||t===void 0||t.forEach(i=>{var r;return(r=i.hostUpdated)===null||r===void 0?void 0:r.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((t,i)=>this._$EO(i,this[i],t)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}K[st]=!0,K.elementProperties=new Map,K.elementStyles=[],K.shadowRootOptions={mode:"open"},Et==null||Et({ReactiveElement:K}),((Ze=Ne.reactiveElementVersions)!==null&&Ze!==void 0?Ze:Ne.reactiveElementVersions=[]).push("1.6.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Ke;const Re=window,Y=Re.trustedTypes,xt=Y?Y.createPolicy("lit-html",{createHTML:n=>n}):void 0,lt="$lit$",I=`lit$${(Math.random()+"").slice(9)}$`,Yt="?"+I,Ai=`<${Yt}>`,Z=document,Te=()=>Z.createComment(""),fe=n=>n===null||typeof n!="object"&&typeof n!="function",Qt=Array.isArray,Mi=n=>Qt(n)||typeof(n==null?void 0:n[Symbol.iterator])=="function",Xe=`[ 	
\f\r]`,se=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,kt=/-->/g,Ct=/>/g,F=RegExp(`>|${Xe}(?:([^\\s"'>=/]+)(${Xe}*=${Xe}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Nt=/'/g,Rt=/"/g,ei=/^(?:script|style|textarea|title)$/i,_e=Symbol.for("lit-noChange"),x=Symbol.for("lit-nothing"),Tt=new WeakMap,z=Z.createTreeWalker(Z,129,null,!1);function ti(n,e){if(!Array.isArray(n)||!n.hasOwnProperty("raw"))throw Error("invalid template strings array");return xt!==void 0?xt.createHTML(e):e}const Si=(n,e)=>{const t=n.length-1,i=[];let r,a=e===2?"<svg>":"",s=se;for(let u=0;u<t;u++){const o=n[u];let h,p,c=-1,v=0;for(;v<o.length&&(s.lastIndex=v,p=s.exec(o),p!==null);)v=s.lastIndex,s===se?p[1]==="!--"?s=kt:p[1]!==void 0?s=Ct:p[2]!==void 0?(ei.test(p[2])&&(r=RegExp("</"+p[2],"g")),s=F):p[3]!==void 0&&(s=F):s===F?p[0]===">"?(s=r!=null?r:se,c=-1):p[1]===void 0?c=-2:(c=s.lastIndex-p[2].length,h=p[1],s=p[3]===void 0?F:p[3]==='"'?Rt:Nt):s===Rt||s===Nt?s=F:s===kt||s===Ct?s=se:(s=F,r=void 0);const _=s===F&&n[u+1].startsWith("/>")?" ":"";a+=s===se?o+Ai:c>=0?(i.push(h),o.slice(0,c)+lt+o.slice(c)+I+_):o+I+(c===-2?(i.push(void 0),u):_)}return[ti(n,a+(n[t]||"<?>")+(e===2?"</svg>":"")),i]};class we{constructor({strings:e,_$litType$:t},i){let r;this.parts=[];let a=0,s=0;const u=e.length-1,o=this.parts,[h,p]=Si(e,t);if(this.el=we.createElement(h,i),z.currentNode=this.el.content,t===2){const c=this.el.content,v=c.firstChild;v.remove(),c.append(...v.childNodes)}for(;(r=z.nextNode())!==null&&o.length<u;){if(r.nodeType===1){if(r.hasAttributes()){const c=[];for(const v of r.getAttributeNames())if(v.endsWith(lt)||v.startsWith(I)){const _=p[s++];if(c.push(v),_!==void 0){const C=r.getAttribute(_.toLowerCase()+lt).split(I),k=/([.?@])?(.*)/.exec(_);o.push({type:1,index:a,name:k[2],strings:C,ctor:k[1]==="."?xi:k[1]==="?"?Ci:k[1]==="@"?Ni:De})}else o.push({type:6,index:a})}for(const v of c)r.removeAttribute(v)}if(ei.test(r.tagName)){const c=r.textContent.split(I),v=c.length-1;if(v>0){r.textContent=Y?Y.emptyScript:"";for(let _=0;_<v;_++)r.append(c[_],Te()),z.nextNode(),o.push({type:2,index:++a});r.append(c[v],Te())}}}else if(r.nodeType===8)if(r.data===Yt)o.push({type:2,index:a});else{let c=-1;for(;(c=r.data.indexOf(I,c+1))!==-1;)o.push({type:7,index:a}),c+=I.length-1}a++}}static createElement(e,t){const i=Z.createElement("template");return i.innerHTML=e,i}}function Q(n,e,t=n,i){var r,a,s,u;if(e===_e)return e;let o=i!==void 0?(r=t._$Co)===null||r===void 0?void 0:r[i]:t._$Cl;const h=fe(e)?void 0:e._$litDirective$;return(o==null?void 0:o.constructor)!==h&&((a=o==null?void 0:o._$AO)===null||a===void 0||a.call(o,!1),h===void 0?o=void 0:(o=new h(n),o._$AT(n,t,i)),i!==void 0?((s=(u=t)._$Co)!==null&&s!==void 0?s:u._$Co=[])[i]=o:t._$Cl=o),o!==void 0&&(e=Q(n,o._$AS(n,e.values),o,i)),e}class Ei{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:i},parts:r}=this._$AD,a=((t=e==null?void 0:e.creationScope)!==null&&t!==void 0?t:Z).importNode(i,!0);z.currentNode=a;let s=z.nextNode(),u=0,o=0,h=r[0];for(;h!==void 0;){if(u===h.index){let p;h.type===2?p=new Le(s,s.nextSibling,this,e):h.type===1?p=new h.ctor(s,h.name,h.strings,this,e):h.type===6&&(p=new Ri(s,this,e)),this._$AV.push(p),h=r[++o]}u!==(h==null?void 0:h.index)&&(s=z.nextNode(),u++)}return z.currentNode=Z,a}v(e){let t=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class Le{constructor(e,t,i,r){var a;this.type=2,this._$AH=x,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=r,this._$Cp=(a=r==null?void 0:r.isConnected)===null||a===void 0||a}get _$AU(){var e,t;return(t=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&t!==void 0?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Q(this,e,t),fe(e)?e===x||e==null||e===""?(this._$AH!==x&&this._$AR(),this._$AH=x):e!==this._$AH&&e!==_e&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):Mi(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==x&&fe(this._$AH)?this._$AA.nextSibling.data=e:this.$(Z.createTextNode(e)),this._$AH=e}g(e){var t;const{values:i,_$litType$:r}=e,a=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=we.createElement(ti(r.h,r.h[0]),this.options)),r);if(((t=this._$AH)===null||t===void 0?void 0:t._$AD)===a)this._$AH.v(i);else{const s=new Ei(a,this),u=s.u(this.options);s.v(i),this.$(u),this._$AH=s}}_$AC(e){let t=Tt.get(e.strings);return t===void 0&&Tt.set(e.strings,t=new we(e)),t}T(e){Qt(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,r=0;for(const a of e)r===t.length?t.push(i=new Le(this.k(Te()),this.k(Te()),this,this.options)):i=t[r],i._$AI(a),r++;r<t.length&&(this._$AR(i&&i._$AB.nextSibling,r),t.length=r)}_$AR(e=this._$AA.nextSibling,t){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,t);e&&e!==this._$AB;){const r=e.nextSibling;e.remove(),e=r}}setConnected(e){var t;this._$AM===void 0&&(this._$Cp=e,(t=this._$AP)===null||t===void 0||t.call(this,e))}}class De{constructor(e,t,i,r,a){this.type=1,this._$AH=x,this._$AN=void 0,this.element=e,this.name=t,this._$AM=r,this.options=a,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=x}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,i,r){const a=this.strings;let s=!1;if(a===void 0)e=Q(this,e,t,0),s=!fe(e)||e!==this._$AH&&e!==_e,s&&(this._$AH=e);else{const u=e;let o,h;for(e=a[0],o=0;o<a.length-1;o++)h=Q(this,u[i+o],t,o),h===_e&&(h=this._$AH[o]),s||(s=!fe(h)||h!==this._$AH[o]),h===x?e=x:e!==x&&(e+=(h!=null?h:"")+a[o+1]),this._$AH[o]=h}s&&!r&&this.j(e)}j(e){e===x?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e!=null?e:"")}}class xi extends De{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===x?void 0:e}}const ki=Y?Y.emptyScript:"";class Ci extends De{constructor(){super(...arguments),this.type=4}j(e){e&&e!==x?this.element.setAttribute(this.name,ki):this.element.removeAttribute(this.name)}}class Ni extends De{constructor(e,t,i,r,a){super(e,t,i,r,a),this.type=5}_$AI(e,t=this){var i;if((e=(i=Q(this,e,t,0))!==null&&i!==void 0?i:x)===_e)return;const r=this._$AH,a=e===x&&r!==x||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==x&&(r===x||a);a&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;typeof this._$AH=="function"?this._$AH.call((i=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&i!==void 0?i:this.element,e):this._$AH.handleEvent(e)}}class Ri{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){Q(this,e)}}const Ht=Re.litHtmlPolyfillSupport;Ht==null||Ht(we,Le),((Ke=Re.litHtmlVersions)!==null&&Ke!==void 0?Ke:Re.litHtmlVersions=[]).push("2.8.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Ye;const He=window,ee=He.trustedTypes,Pt=ee?ee.createPolicy("lit-html",{createHTML:n=>n}):void 0,ot="$lit$",V=`lit$${(Math.random()+"").slice(9)}$`,ii="?"+V,Ti=`<${ii}>`,G=document,me=()=>G.createComment(""),$e=n=>n===null||typeof n!="object"&&typeof n!="function",ri=Array.isArray,Hi=n=>ri(n)||typeof(n==null?void 0:n[Symbol.iterator])=="function",Qe=`[ 	
\f\r]`,le=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Ut=/-->/g,Ot=/>/g,j=RegExp(`>|${Qe}(?:([^\\s"'>=/]+)(${Qe}*=${Qe}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),It=/'/g,Vt=/"/g,ai=/^(?:script|style|textarea|title)$/i,Pi=n=>(e,...t)=>({_$litType$:n,strings:e,values:t}),S=Pi(1),te=Symbol.for("lit-noChange"),A=Symbol.for("lit-nothing"),Lt=new WeakMap,q=G.createTreeWalker(G,129,null,!1);function ni(n,e){if(!Array.isArray(n)||!n.hasOwnProperty("raw"))throw Error("invalid template strings array");return Pt!==void 0?Pt.createHTML(e):e}const Ui=(n,e)=>{const t=n.length-1,i=[];let r,a=e===2?"<svg>":"",s=le;for(let u=0;u<t;u++){const o=n[u];let h,p,c=-1,v=0;for(;v<o.length&&(s.lastIndex=v,p=s.exec(o),p!==null);)v=s.lastIndex,s===le?p[1]==="!--"?s=Ut:p[1]!==void 0?s=Ot:p[2]!==void 0?(ai.test(p[2])&&(r=RegExp("</"+p[2],"g")),s=j):p[3]!==void 0&&(s=j):s===j?p[0]===">"?(s=r!=null?r:le,c=-1):p[1]===void 0?c=-2:(c=s.lastIndex-p[2].length,h=p[1],s=p[3]===void 0?j:p[3]==='"'?Vt:It):s===Vt||s===It?s=j:s===Ut||s===Ot?s=le:(s=j,r=void 0);const _=s===j&&n[u+1].startsWith("/>")?" ":"";a+=s===le?o+Ti:c>=0?(i.push(h),o.slice(0,c)+ot+o.slice(c)+V+_):o+V+(c===-2?(i.push(void 0),u):_)}return[ni(n,a+(n[t]||"<?>")+(e===2?"</svg>":"")),i]};class ye{constructor({strings:e,_$litType$:t},i){let r;this.parts=[];let a=0,s=0;const u=e.length-1,o=this.parts,[h,p]=Ui(e,t);if(this.el=ye.createElement(h,i),q.currentNode=this.el.content,t===2){const c=this.el.content,v=c.firstChild;v.remove(),c.append(...v.childNodes)}for(;(r=q.nextNode())!==null&&o.length<u;){if(r.nodeType===1){if(r.hasAttributes()){const c=[];for(const v of r.getAttributeNames())if(v.endsWith(ot)||v.startsWith(V)){const _=p[s++];if(c.push(v),_!==void 0){const C=r.getAttribute(_.toLowerCase()+ot).split(V),k=/([.?@])?(.*)/.exec(_);o.push({type:1,index:a,name:k[2],strings:C,ctor:k[1]==="."?Ii:k[1]==="?"?Li:k[1]==="@"?Di:Fe})}else o.push({type:6,index:a})}for(const v of c)r.removeAttribute(v)}if(ai.test(r.tagName)){const c=r.textContent.split(V),v=c.length-1;if(v>0){r.textContent=ee?ee.emptyScript:"";for(let _=0;_<v;_++)r.append(c[_],me()),q.nextNode(),o.push({type:2,index:++a});r.append(c[v],me())}}}else if(r.nodeType===8)if(r.data===ii)o.push({type:2,index:a});else{let c=-1;for(;(c=r.data.indexOf(V,c+1))!==-1;)o.push({type:7,index:a}),c+=V.length-1}a++}}static createElement(e,t){const i=G.createElement("template");return i.innerHTML=e,i}}function ie(n,e,t=n,i){var r,a,s,u;if(e===te)return e;let o=i!==void 0?(r=t._$Co)===null||r===void 0?void 0:r[i]:t._$Cl;const h=$e(e)?void 0:e._$litDirective$;return(o==null?void 0:o.constructor)!==h&&((a=o==null?void 0:o._$AO)===null||a===void 0||a.call(o,!1),h===void 0?o=void 0:(o=new h(n),o._$AT(n,t,i)),i!==void 0?((s=(u=t)._$Co)!==null&&s!==void 0?s:u._$Co=[])[i]=o:t._$Cl=o),o!==void 0&&(e=ie(n,o._$AS(n,e.values),o,i)),e}class Oi{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:i},parts:r}=this._$AD,a=((t=e==null?void 0:e.creationScope)!==null&&t!==void 0?t:G).importNode(i,!0);q.currentNode=a;let s=q.nextNode(),u=0,o=0,h=r[0];for(;h!==void 0;){if(u===h.index){let p;h.type===2?p=new Me(s,s.nextSibling,this,e):h.type===1?p=new h.ctor(s,h.name,h.strings,this,e):h.type===6&&(p=new Fi(s,this,e)),this._$AV.push(p),h=r[++o]}u!==(h==null?void 0:h.index)&&(s=q.nextNode(),u++)}return q.currentNode=G,a}v(e){let t=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class Me{constructor(e,t,i,r){var a;this.type=2,this._$AH=A,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=r,this._$Cp=(a=r==null?void 0:r.isConnected)===null||a===void 0||a}get _$AU(){var e,t;return(t=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&t!==void 0?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=ie(this,e,t),$e(e)?e===A||e==null||e===""?(this._$AH!==A&&this._$AR(),this._$AH=A):e!==this._$AH&&e!==te&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):Hi(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==A&&$e(this._$AH)?this._$AA.nextSibling.data=e:this.$(G.createTextNode(e)),this._$AH=e}g(e){var t;const{values:i,_$litType$:r}=e,a=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=ye.createElement(ni(r.h,r.h[0]),this.options)),r);if(((t=this._$AH)===null||t===void 0?void 0:t._$AD)===a)this._$AH.v(i);else{const s=new Oi(a,this),u=s.u(this.options);s.v(i),this.$(u),this._$AH=s}}_$AC(e){let t=Lt.get(e.strings);return t===void 0&&Lt.set(e.strings,t=new ye(e)),t}T(e){ri(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,r=0;for(const a of e)r===t.length?t.push(i=new Me(this.k(me()),this.k(me()),this,this.options)):i=t[r],i._$AI(a),r++;r<t.length&&(this._$AR(i&&i._$AB.nextSibling,r),t.length=r)}_$AR(e=this._$AA.nextSibling,t){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,t);e&&e!==this._$AB;){const r=e.nextSibling;e.remove(),e=r}}setConnected(e){var t;this._$AM===void 0&&(this._$Cp=e,(t=this._$AP)===null||t===void 0||t.call(this,e))}}class Fe{constructor(e,t,i,r,a){this.type=1,this._$AH=A,this._$AN=void 0,this.element=e,this.name=t,this._$AM=r,this.options=a,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=A}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,i,r){const a=this.strings;let s=!1;if(a===void 0)e=ie(this,e,t,0),s=!$e(e)||e!==this._$AH&&e!==te,s&&(this._$AH=e);else{const u=e;let o,h;for(e=a[0],o=0;o<a.length-1;o++)h=ie(this,u[i+o],t,o),h===te&&(h=this._$AH[o]),s||(s=!$e(h)||h!==this._$AH[o]),h===A?e=A:e!==A&&(e+=(h!=null?h:"")+a[o+1]),this._$AH[o]=h}s&&!r&&this.j(e)}j(e){e===A?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e!=null?e:"")}}class Ii extends Fe{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===A?void 0:e}}const Vi=ee?ee.emptyScript:"";class Li extends Fe{constructor(){super(...arguments),this.type=4}j(e){e&&e!==A?this.element.setAttribute(this.name,Vi):this.element.removeAttribute(this.name)}}class Di extends Fe{constructor(e,t,i,r,a){super(e,t,i,r,a),this.type=5}_$AI(e,t=this){var i;if((e=(i=ie(this,e,t,0))!==null&&i!==void 0?i:A)===te)return;const r=this._$AH,a=e===A&&r!==A||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==A&&(r===A||a);a&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;typeof this._$AH=="function"?this._$AH.call((i=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&i!==void 0?i:this.element,e):this._$AH.handleEvent(e)}}class Fi{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){ie(this,e)}}const Dt=He.litHtmlPolyfillSupport;Dt==null||Dt(ye,Me),((Ye=He.litHtmlVersions)!==null&&Ye!==void 0?Ye:He.litHtmlVersions=[]).push("2.8.0");const ji=(n,e,t)=>{var i,r;const a=(i=t==null?void 0:t.renderBefore)!==null&&i!==void 0?i:e;let s=a._$litPart$;if(s===void 0){const u=(r=t==null?void 0:t.renderBefore)!==null&&r!==void 0?r:null;a._$litPart$=s=new Me(e.insertBefore(me(),u),u,void 0,t!=null?t:{})}return s._$AI(n),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var et,tt;class de extends K{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const i=super.createRenderRoot();return(e=(t=this.renderOptions).renderBefore)!==null&&e!==void 0||(t.renderBefore=i.firstChild),i}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=ji(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return te}}de.finalized=!0,de._$litElement$=!0,(et=globalThis.litElementHydrateSupport)===null||et===void 0||et.call(globalThis,{LitElement:de});const Ft=globalThis.litElementPolyfillSupport;Ft==null||Ft({LitElement:de});((tt=globalThis.litElementVersions)!==null&&tt!==void 0?tt:globalThis.litElementVersions=[]).push("3.3.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Bi=n=>e=>typeof e=="function"?((t,i)=>(customElements.define(t,i),i))(n,e):((t,i)=>{const{kind:r,elements:a}=i;return{kind:r,elements:a,finisher(s){customElements.define(t,s)}}})(n,e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const zi=(n,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(t){t.createProperty(e.key,n)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(t){t.createProperty(e.key,n)}},qi=(n,e,t)=>{e.constructor.createProperty(t,n)};function Wi(n){return(e,t)=>t!==void 0?qi(n,e,t):zi(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function H(n){return Wi({...n,state:!0})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ji=({finisher:n,descriptor:e})=>(t,i)=>{var r;if(i===void 0){const a=(r=t.originalKey)!==null&&r!==void 0?r:t.key,s=e!=null?{kind:"method",placement:"prototype",key:a,descriptor:e(t.key)}:{...t,key:a};return n!=null&&(s.finisher=function(u){n(u,a)}),s}{const a=t.constructor;e!==void 0&&Object.defineProperty(t,i,e(i)),n==null||n(a,i)}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function P(n,e){return Ji({descriptor:t=>{const i={get(){var r,a;return(a=(r=this.renderRoot)===null||r===void 0?void 0:r.querySelector(n))!==null&&a!==void 0?a:null},enumerable:!0,configurable:!0};if(e){const r=typeof t=="symbol"?Symbol():"__"+t;i.get=function(){var a,s;return this[r]===void 0&&(this[r]=(s=(a=this.renderRoot)===null||a===void 0?void 0:a.querySelector(n))!==null&&s!==void 0?s:null),this[r]}}return i}})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var it;((it=window.HTMLSlotElement)===null||it===void 0?void 0:it.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function*Zi(n,e){if(n!==void 0){let t=0;for(const i of n)yield e(i,t++)}}function d(n){let e,t,i;return typeof n=="object"?(e=n.hashFunction,t=n.expiring,i=n.tags):e=n,(r,a,s)=>{if(s.value!=null)s.value=jt(s.value,e,t,i);else if(s.get!=null)s.get=jt(s.get,e,t,i);else throw"Only put a Memoize() decorator on a method or get accessor."}}const rt=new Map;function jt(n,e,t=0,i){const r=Symbol("__memoized_map__");return function(...a){let s;this.hasOwnProperty(r)||Object.defineProperty(this,r,{configurable:!1,enumerable:!1,writable:!1,value:new Map});let u=this[r];if(Array.isArray(i))for(const o of i)rt.has(o)?rt.get(o).push(u):rt.set(o,[u]);if(e||a.length>0||t>0){let o;e===!0?o=a.map(c=>c.toString()).join("!"):e?o=e.apply(this,a):o=a[0];const h=`${o}__timestamp`;let p=!1;if(t>0)if(!u.has(h))p=!0;else{let c=u.get(h);p=Date.now()-c>t}u.has(o)&&!p?s=u.get(o):(s=n.apply(this,a),u.set(o,s),t>0&&u.set(h,Date.now()))}else{const o=this;u.has(o)?s=u.get(o):(s=n.apply(this,a),u.set(o,s))}return s}}var ue;(function(n){n[n.COUNT=0]="COUNT",n[n.ALPHABETICAL=1]="ALPHABETICAL",n[n.NUMERIC=2]="NUMERIC"})(ue||(ue={}));class si{constructor(e){this.buckets=e.buckets,this.doc_count_error_upper_bound=e.doc_count_error_upper_bound,this.sum_other_doc_count=e.sum_other_doc_count,this.first_bucket_key=e.first_bucket_key,this.last_bucket_key=e.last_bucket_key,this.number_buckets=e.number_buckets,this.interval=e.interval}getSortedBuckets(e){const t=[...this.buckets];if(this.isRawNumberBuckets(t))return t;const i=new Intl.Collator;switch(e){case ue.ALPHABETICAL:return t.sort((r,a)=>i.compare(r.key.toString(),a.key.toString()));case ue.NUMERIC:return t.sort((r,a)=>Number(a.key)-Number(r.key));case ue.COUNT:default:return t}}isRawNumberBuckets(e){return typeof this.buckets[0]=="number"}}l([d()],si.prototype,"getSortedBuckets",null);class dt{parseValue(e){return typeof e=="string"&&(e==="false"||e==="0")?!1:Boolean(e)}}dt.shared=new dt;class L{parseValue(e){if(typeof e=="number")return e;if(typeof e=="boolean")return;const t=parseFloat(e);if(!Number.isNaN(t))return t}}L.shared=new L;class Pe{parseValue(e){return L.shared.parseValue(e)}}Pe.shared=new Pe;class be{parseValue(e){return this.parseJSDate(e)||this.parseBracketDate(e)}parseBracketDate(e){if(typeof e!="string")return;const t=e.match(/\[([0-9]{4})\]/);if(!(!t||t.length<2))return this.parseJSDate(t[1])}parseJSDate(e){if(typeof e!="string")return;let t=e;t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}\s{1}[0-9]{2}:[0-9]{2}:[0-9]{2}$/)&&(t=t.replace(" ","T"));const i=Date.parse(t);if(Number.isNaN(i))return;let r=new Date(t);return(t.indexOf("Z")>-1||t.indexOf("+")>-1||t.match(/^[0-9]{4}$/)||t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/)||t.match(/^.*?-[0-9]{2}:[0-9]{2}$/)||t.match(/^.*?-[0-9]{4}$/))&&(r=new Date(r.getTime()+r.getTimezoneOffset()*1e3*60)),r}}be.shared=new be;class Ue{parseValue(e){if(typeof e=="number")return e;if(typeof e=="boolean")return;const t=e.split(":");let i;return t.length===1?i=this.parseNumberFormat(t[0]):i=this.parseColonSeparatedFormat(t),i}parseNumberFormat(e){let t=parseFloat(e);return Number.isNaN(t)&&(t=void 0),t}parseColonSeparatedFormat(e){let t=!1;const i=e.map((r,a)=>{const s=parseFloat(r);if(Number.isNaN(s))return t=!0,0;const u=e.length-1-a,o=60**u;return s*Math.floor(o)}).reduce((r,a)=>r+a,0);return t?void 0:i}}Ue.shared=new Ue;class ut{parseValue(e){if(typeof e=="string")return e}}ut.shared=new ut;class Gi{constructor(e,t){this.separators=[";",","],this.parser=e,t&&t.separators&&(this.separators=t.separators)}parseValue(e){const t=String(e);let i=[];for(const r of this.separators)if(i=t.split(r),i.length>1)break;return this.parseListValues(i)}parseListValues(e){const i=e.map(a=>a.trim()).map(a=>this.parser.parseValue(a)),r=[];return i.forEach(a=>{a!==void 0&&r.push(a)}),r}}class ht{parseValue(e){if(typeof e=="string")return e}}ht.shared=new ht;class Oe{parseValue(e){return String(e)}}Oe.shared=new Oe;class Se{get name(){return this.rawValue.name}get source(){return this.rawValue.source}get btih(){return this.rawValue.btih}get md5(){return this.rawValue.md5}get format(){return this.rawValue.format}get mtime(){return this.rawValue.mtime}get crc32(){return this.rawValue.crc32}get sha1(){return this.rawValue.sha1}get original(){return this.rawValue.original}get size(){return this.rawValue.size?Pe.shared.parseValue(this.rawValue.size):void 0}get title(){return this.rawValue.title}get length(){return this.rawValue.length?Ue.shared.parseValue(this.rawValue.length):void 0}get height(){return this.rawValue.height?L.shared.parseValue(this.rawValue.height):void 0}get width(){return this.rawValue.width?L.shared.parseValue(this.rawValue.width):void 0}get track(){return this.rawValue.track?L.shared.parseValue(this.rawValue.track):void 0}get external_identifier(){return this.rawValue.external_identifier}get creator(){return this.rawValue.creator}get album(){return this.rawValue.album}constructor(e={}){this.rawValue=e}}l([d()],Se.prototype,"size",null);l([d()],Se.prototype,"length",null);l([d()],Se.prototype,"height",null);l([d()],Se.prototype,"width",null);l([d()],Se.prototype,"track",null);class R{get values(){return this.parseRawValue()}get value(){return this.values[0]}constructor(e,t){this.parser=e,this.rawValue=t}parseRawValue(){const e=Array.isArray(this.rawValue)?this.rawValue:[this.rawValue],t=[];return e.forEach(i=>{const r=this.parser.parseValue(i);Array.isArray(r)?t.push(...r):r!==void 0&&t.push(r)}),t}}l([d()],R.prototype,"values",null);l([d()],R.prototype,"value",null);class W extends R{constructor(e){super(dt.shared,e)}}class $ extends R{constructor(e){super(be.shared,e)}}class at extends R{constructor(e){super(Ue.shared,e)}}class m extends R{constructor(e){super(L.shared,e)}}class g extends R{constructor(e){super(Oe.shared,e)}}class Ki extends R{constructor(e){super(ht.shared,e)}}class Ie extends R{constructor(e){super(Pe.shared,e)}}class Ee extends R{constructor(e){super(ut.shared,e)}}class Xi extends R{constructor(e,t){super(t,e)}}class Yi extends Xi{constructor(e){const t=new Gi(Oe.shared);super(e,t)}}class f{get identifier(){return this.rawMetadata.identifier}get addeddate(){return this.rawMetadata.addeddate?new $(this.rawMetadata.addeddate):void 0}get audio_codec(){return this.rawMetadata.audio_codec?new g(this.rawMetadata.audio_codec):void 0}get audio_sample_rate(){return this.rawMetadata.audio_sample_rate?new m(this.rawMetadata.audio_sample_rate):void 0}get avg_rating(){return this.rawMetadata.avg_rating?new m(this.rawMetadata.avg_rating):void 0}get collection(){return this.rawMetadata.collection?new g(this.rawMetadata.collection):void 0}get collections_raw(){return this.rawMetadata.collections_raw?new g(this.rawMetadata.collections_raw):void 0}get collection_size(){return this.rawMetadata.collection_size?new Ie(this.rawMetadata.collection_size):void 0}get contributor(){return this.rawMetadata.contributor?new g(this.rawMetadata.contributor):void 0}get coverage(){return this.rawMetadata.coverage?new g(this.rawMetadata.coverage):void 0}get creator(){return this.rawMetadata.creator?new g(this.rawMetadata.creator):void 0}get collection_layout(){return this.rawMetadata.collection_layout?new g(this.rawMetadata.collection_layout):void 0}get date(){return this.rawMetadata.date?new $(this.rawMetadata.date):void 0}get description(){return this.rawMetadata.description?new g(this.rawMetadata.description):void 0}get downloads(){return this.rawMetadata.downloads?new m(this.rawMetadata.downloads):void 0}get duration(){return this.rawMetadata.duration?new at(this.rawMetadata.duration):void 0}get external_identifier(){return this.rawMetadata["external-identifier"]?new g(this.rawMetadata["external-identifier"]):void 0}get files_count(){return this.rawMetadata.files_count?new m(this.rawMetadata.files_count):void 0}get indexdate(){return this.rawMetadata.indexdate?new $(this.rawMetadata.indexdate):void 0}get isbn(){return this.rawMetadata.isbn?new g(this.rawMetadata.isbn):void 0}get issue(){return this.rawMetadata.issue?new g(this.rawMetadata.issue):void 0}get item_count(){return this.rawMetadata.item_count?new m(this.rawMetadata.item_count):void 0}get item_size(){return this.rawMetadata.item_size?new Ie(this.rawMetadata.item_size):void 0}get language(){return this.rawMetadata.language?new g(this.rawMetadata.language):void 0}get length(){return this.rawMetadata.length?new at(this.rawMetadata.length):void 0}get lineage(){return this.rawMetadata.lineage?new g(this.rawMetadata.lineage):void 0}get month(){return this.rawMetadata.month?new m(this.rawMetadata.month):void 0}get mediatype(){return this.rawMetadata.mediatype?new Ee(this.rawMetadata.mediatype):void 0}get noindex(){return this.rawMetadata.noindex?new W(this.rawMetadata.noindex):void 0}get notes(){return this.rawMetadata.notes?new g(this.rawMetadata.notes):void 0}get num_favorites(){return this.rawMetadata.num_favorites?new m(this.rawMetadata.num_favorites):void 0}get num_reviews(){return this.rawMetadata.num_reviews?new m(this.rawMetadata.num_reviews):void 0}get openlibrary_edition(){return this.rawMetadata.openlibrary_edition?new g(this.rawMetadata.openlibrary_edition):void 0}get openlibrary_work(){return this.rawMetadata.openlibrary_work?new g(this.rawMetadata.openlibrary_work):void 0}get page_progression(){return this.rawMetadata.page_progression?new Ki(this.rawMetadata.page_progression):void 0}get partner(){return this.rawMetadata.partner?new g(this.rawMetadata.partner):void 0}get ppi(){return this.rawMetadata.ppi?new m(this.rawMetadata.ppi):void 0}get publicdate(){return this.rawMetadata.publicdate?new $(this.rawMetadata.publicdate):void 0}get publisher(){return this.rawMetadata.publisher?new g(this.rawMetadata.publisher):void 0}get reviewdate(){return this.rawMetadata.reviewdate?new $(this.rawMetadata.reviewdate):void 0}get runtime(){return this.rawMetadata.runtime?new at(this.rawMetadata.runtime):void 0}get scanner(){return this.rawMetadata.scanner?new g(this.rawMetadata.scanner):void 0}get source(){return this.rawMetadata.source?new g(this.rawMetadata.source):void 0}get start_localtime(){return this.rawMetadata.start_localtime?new $(this.rawMetadata.start_localtime):void 0}get start_time(){return this.rawMetadata.start_time?new $(this.rawMetadata.start_time):void 0}get stop_time(){return this.rawMetadata.stop_time?new $(this.rawMetadata.stop_time):void 0}get subject(){return this.rawMetadata.subject?new Yi(this.rawMetadata.subject):void 0}get taper(){return this.rawMetadata.taper?new g(this.rawMetadata.taper):void 0}get title(){return this.rawMetadata.title?new g(this.rawMetadata.title):void 0}get transferer(){return this.rawMetadata.transferer?new g(this.rawMetadata.transferer):void 0}get track(){return this.rawMetadata.track?new m(this.rawMetadata.track):void 0}get type(){return this.rawMetadata.type?new g(this.rawMetadata.type):void 0}get uploader(){return this.rawMetadata.uploader?new g(this.rawMetadata.uploader):void 0}get utc_offset(){return this.rawMetadata.utc_offset?new m(this.rawMetadata.utc_offset):void 0}get venue(){return this.rawMetadata.venue?new g(this.rawMetadata.venue):void 0}get volume(){return this.rawMetadata.volume?new g(this.rawMetadata.volume):void 0}get week(){return this.rawMetadata.week?new m(this.rawMetadata.week):void 0}get year(){return this.rawMetadata.year?new $(this.rawMetadata.year):void 0}constructor(e={}){this.rawMetadata=e}}l([d()],f.prototype,"addeddate",null);l([d()],f.prototype,"audio_codec",null);l([d()],f.prototype,"audio_sample_rate",null);l([d()],f.prototype,"avg_rating",null);l([d()],f.prototype,"collection",null);l([d()],f.prototype,"collections_raw",null);l([d()],f.prototype,"collection_size",null);l([d()],f.prototype,"contributor",null);l([d()],f.prototype,"coverage",null);l([d()],f.prototype,"creator",null);l([d()],f.prototype,"collection_layout",null);l([d()],f.prototype,"date",null);l([d()],f.prototype,"description",null);l([d()],f.prototype,"downloads",null);l([d()],f.prototype,"duration",null);l([d()],f.prototype,"external_identifier",null);l([d()],f.prototype,"files_count",null);l([d()],f.prototype,"indexdate",null);l([d()],f.prototype,"isbn",null);l([d()],f.prototype,"issue",null);l([d()],f.prototype,"item_count",null);l([d()],f.prototype,"item_size",null);l([d()],f.prototype,"language",null);l([d()],f.prototype,"length",null);l([d()],f.prototype,"lineage",null);l([d()],f.prototype,"month",null);l([d()],f.prototype,"mediatype",null);l([d()],f.prototype,"noindex",null);l([d()],f.prototype,"notes",null);l([d()],f.prototype,"num_favorites",null);l([d()],f.prototype,"num_reviews",null);l([d()],f.prototype,"openlibrary_edition",null);l([d()],f.prototype,"openlibrary_work",null);l([d()],f.prototype,"page_progression",null);l([d()],f.prototype,"partner",null);l([d()],f.prototype,"ppi",null);l([d()],f.prototype,"publicdate",null);l([d()],f.prototype,"publisher",null);l([d()],f.prototype,"reviewdate",null);l([d()],f.prototype,"runtime",null);l([d()],f.prototype,"scanner",null);l([d()],f.prototype,"source",null);l([d()],f.prototype,"start_localtime",null);l([d()],f.prototype,"start_time",null);l([d()],f.prototype,"stop_time",null);l([d()],f.prototype,"subject",null);l([d()],f.prototype,"taper",null);l([d()],f.prototype,"title",null);l([d()],f.prototype,"transferer",null);l([d()],f.prototype,"track",null);l([d()],f.prototype,"type",null);l([d()],f.prototype,"uploader",null);l([d()],f.prototype,"utc_offset",null);l([d()],f.prototype,"venue",null);l([d()],f.prototype,"volume",null);l([d()],f.prototype,"week",null);l([d()],f.prototype,"year",null);class gt{get reviewbody(){return this.rawValue.reviewbody}get reviewtitle(){return this.rawValue.reviewtitle}get reviewer(){return this.rawValue.reviewer}get reviewdate(){return this.rawValue.reviewdate?be.shared.parseValue(this.rawValue.reviewdate):void 0}get createdate(){return this.rawValue.createdate?be.shared.parseValue(this.rawValue.createdate):void 0}get stars(){return this.rawValue.stars?L.shared.parseValue(this.rawValue.stars):void 0}constructor(e={}){this.rawValue=e}}l([d()],gt.prototype,"reviewdate",null);l([d()],gt.prototype,"createdate",null);l([d()],gt.prototype,"stars",null);class w{constructor(e){this.rawMetadata=e}get identifier(){var e;return(e=this.rawMetadata.fields)===null||e===void 0?void 0:e.identifier}get addeddate(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.addeddate?new $(this.rawMetadata.fields.addeddate):void 0}get avg_rating(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.avg_rating)!=null?new m(this.rawMetadata.fields.avg_rating):void 0}get collection(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.collection?new g(this.rawMetadata.fields.collection):void 0}get collection_files_count(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.collection_files_count)!=null?new m(this.rawMetadata.fields.collection_files_count):void 0}get collection_size(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.collection_size)!=null?new Ie(this.rawMetadata.fields.collection_size):void 0}get creator(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.creator?new g(this.rawMetadata.fields.creator):void 0}get date(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.date?new $(this.rawMetadata.fields.date):void 0}get description(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.description?new g(this.rawMetadata.fields.description):void 0}get downloads(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.downloads)!=null?new m(this.rawMetadata.fields.downloads):void 0}get files_count(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.files_count)!=null?new m(this.rawMetadata.fields.files_count):void 0}get genre(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.genre?new g(this.rawMetadata.fields.genre):void 0}get indexflag(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.indexflag?new g(this.rawMetadata.fields.indexflag):void 0}get issue(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.issue?new g(this.rawMetadata.fields.issue):void 0}get item_count(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.item_count)!=null?new m(this.rawMetadata.fields.item_count):void 0}get item_size(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.item_size)!=null?new Ie(this.rawMetadata.fields.item_size):void 0}get language(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.language?new g(this.rawMetadata.fields.language):void 0}get lending___available_to_borrow(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.lending___available_to_borrow)!=null?new W(this.rawMetadata.fields.lending___available_to_borrow):void 0}get lending___available_to_browse(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.lending___available_to_browse)!=null?new W(this.rawMetadata.fields.lending___available_to_browse):void 0}get lending___available_to_waitlist(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.lending___available_to_waitlist)!=null?new W(this.rawMetadata.fields.lending___available_to_waitlist):void 0}get lending___status(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.lending___status?new g(this.rawMetadata.fields.lending___status):void 0}get licenseurl(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.licenseurl?new g(this.rawMetadata.fields.licenseurl):void 0}get mediatype(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.mediatype?new Ee(this.rawMetadata.fields.mediatype):void 0}get month(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.month)!=null?new m(this.rawMetadata.fields.month):void 0}get noindex(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.noindex)!=null?new W(this.rawMetadata.fields.noindex):void 0}get num_favorites(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.num_favorites)!=null?new m(this.rawMetadata.fields.num_favorites):void 0}get num_reviews(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.num_reviews)!=null?new m(this.rawMetadata.fields.num_reviews):void 0}get publicdate(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.publicdate?new $(this.rawMetadata.fields.publicdate):void 0}get reviewdate(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.reviewdate?new $(this.rawMetadata.fields.reviewdate):void 0}get review(){const e=this.rawMetadata.review;return e?{body:e.reviewbody,title:e.reviewtitle,author:e.reviewer,authorItem:e.reviewer_itemname,updatedate:new Date(e.reviewdate),createdate:new Date(e.createdate),stars:Number(e.stars)||0,__href__:e.__href__}:void 0}get source(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.source?new g(this.rawMetadata.fields.source):void 0}get subject(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.subject?new g(this.rawMetadata.fields.subject):void 0}get title(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.title?new g(this.rawMetadata.fields.title):void 0}get type(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.type?new g(this.rawMetadata.fields.type):void 0}get volume(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.volume?new g(this.rawMetadata.fields.volume):void 0}get week(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.week)!=null?new m(this.rawMetadata.fields.week):void 0}get year(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.year)!=null?new m(this.rawMetadata.fields.year):void 0}}l([d()],w.prototype,"addeddate",null);l([d()],w.prototype,"avg_rating",null);l([d()],w.prototype,"collection",null);l([d()],w.prototype,"collection_files_count",null);l([d()],w.prototype,"collection_size",null);l([d()],w.prototype,"creator",null);l([d()],w.prototype,"date",null);l([d()],w.prototype,"description",null);l([d()],w.prototype,"downloads",null);l([d()],w.prototype,"files_count",null);l([d()],w.prototype,"genre",null);l([d()],w.prototype,"indexflag",null);l([d()],w.prototype,"issue",null);l([d()],w.prototype,"item_count",null);l([d()],w.prototype,"item_size",null);l([d()],w.prototype,"language",null);l([d()],w.prototype,"lending___available_to_borrow",null);l([d()],w.prototype,"lending___available_to_browse",null);l([d()],w.prototype,"lending___available_to_waitlist",null);l([d()],w.prototype,"lending___status",null);l([d()],w.prototype,"licenseurl",null);l([d()],w.prototype,"mediatype",null);l([d()],w.prototype,"month",null);l([d()],w.prototype,"noindex",null);l([d()],w.prototype,"num_favorites",null);l([d()],w.prototype,"num_reviews",null);l([d()],w.prototype,"publicdate",null);l([d()],w.prototype,"reviewdate",null);l([d()],w.prototype,"review",null);l([d()],w.prototype,"source",null);l([d()],w.prototype,"subject",null);l([d()],w.prototype,"title",null);l([d()],w.prototype,"type",null);l([d()],w.prototype,"volume",null);l([d()],w.prototype,"week",null);l([d()],w.prototype,"year",null);class y{constructor(e){this.rawMetadata=e}get identifier(){var e;return(e=this.rawMetadata.fields)===null||e===void 0?void 0:e.identifier}get highlight(){var e;return!((e=this.rawMetadata.highlight)===null||e===void 0)&&e.text?new g(this.rawMetadata.highlight.text):void 0}get addeddate(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.addeddate?new $(this.rawMetadata.fields.addeddate):void 0}get avg_rating(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.avg_rating)!=null?new m(this.rawMetadata.fields.avg_rating):void 0}get collection(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.collection?new g(this.rawMetadata.fields.collection):void 0}get created_on(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.created_on?new $(this.rawMetadata.fields.created_on):void 0}get creator(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.creator?new g(this.rawMetadata.fields.creator):void 0}get date(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.date?new $(this.rawMetadata.fields.date):void 0}get description(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.description?new g(this.rawMetadata.fields.description):void 0}get downloads(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.downloads)!=null?new m(this.rawMetadata.fields.downloads):void 0}get filename(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.filename?new g(this.rawMetadata.fields.filename):void 0}get file_basename(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.file_basename?new g(this.rawMetadata.fields.file_basename):void 0}get file_creation_mtime(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.file_creation_mtime)!=null?new m(this.rawMetadata.fields.file_creation_mtime):void 0}get issue(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.issue?new g(this.rawMetadata.fields.issue):void 0}get mediatype(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.mediatype?new Ee(this.rawMetadata.fields.mediatype):void 0}get page_num(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.page_num)!=null?new m(this.rawMetadata.fields.page_num):void 0}get publicdate(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.publicdate?new $(this.rawMetadata.fields.publicdate):void 0}get result_in_subfile(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.result_in_subfile)!=null?new W(this.rawMetadata.fields.result_in_subfile):void 0}get reviewdate(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.reviewdate?new $(this.rawMetadata.fields.reviewdate):void 0}get source(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.source?new g(this.rawMetadata.fields.source):void 0}get subject(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.subject?new g(this.rawMetadata.fields.subject):void 0}get title(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.title?new g(this.rawMetadata.fields.title):void 0}get updated_on(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.updated_on?new $(this.rawMetadata.fields.updated_on):void 0}get year(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.year)!=null?new m(this.rawMetadata.fields.year):void 0}get __href__(){var e;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.__href__?new g(this.rawMetadata.fields.__href__):void 0}}l([d()],y.prototype,"highlight",null);l([d()],y.prototype,"addeddate",null);l([d()],y.prototype,"avg_rating",null);l([d()],y.prototype,"collection",null);l([d()],y.prototype,"created_on",null);l([d()],y.prototype,"creator",null);l([d()],y.prototype,"date",null);l([d()],y.prototype,"description",null);l([d()],y.prototype,"downloads",null);l([d()],y.prototype,"filename",null);l([d()],y.prototype,"file_basename",null);l([d()],y.prototype,"file_creation_mtime",null);l([d()],y.prototype,"issue",null);l([d()],y.prototype,"mediatype",null);l([d()],y.prototype,"page_num",null);l([d()],y.prototype,"publicdate",null);l([d()],y.prototype,"result_in_subfile",null);l([d()],y.prototype,"reviewdate",null);l([d()],y.prototype,"source",null);l([d()],y.prototype,"subject",null);l([d()],y.prototype,"title",null);l([d()],y.prototype,"updated_on",null);l([d()],y.prototype,"year",null);l([d()],y.prototype,"__href__",null);class xe{constructor(e){this.rawMetadata=e}get identifier(){var e;return(e=this.rawMetadata)===null||e===void 0?void 0:e.fields.query}get title(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.title?new g(this.rawMetadata.fields.title):void 0}get query(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.query?new g(this.rawMetadata.fields.query):void 0}get date_favorited(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.date_favorited?new $(this.rawMetadata.fields.date_favorited):void 0}get __href__(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.__href__?new g(this.rawMetadata.fields.__href__):void 0}}l([d()],xe.prototype,"title",null);l([d()],xe.prototype,"query",null);l([d()],xe.prototype,"date_favorited",null);l([d()],xe.prototype,"__href__",null);class je{constructor(e){this.rawMetadata=e}get identifier(){var e;return(e=this.rawMetadata.fields)===null||e===void 0?void 0:e.url}get mediatype(){return new Ee("web")}get title(){var e,t;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.url?new g((t=this.rawMetadata.fields)===null||t===void 0?void 0:t.url):void 0}get capture_dates(){var e,t;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.capture_dates?new $((t=this.rawMetadata.fields)===null||t===void 0?void 0:t.capture_dates):void 0}get __href__(){var e,t;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.__href__?new g((t=this.rawMetadata.fields)===null||t===void 0?void 0:t.__href__):void 0}}l([d()],je.prototype,"title",null);l([d()],je.prototype,"capture_dates",null);l([d()],je.prototype,"__href__",null);class b{constructor(e){this.rawMetadata=e}get identifier(){var e,t;return(t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.identifier}get highlight(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.highlight)===null||t===void 0)&&t.text?new g(this.rawMetadata.highlight.text):void 0}get addeddate(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.addeddate?new $(this.rawMetadata.fields.addeddate):void 0}get avg_rating(){var e,t,i;const r=(t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.avg_rating;return r||r===0?new m((i=this.rawMetadata)===null||i===void 0?void 0:i.fields.avg_rating):void 0}get collection(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.collection?new g(this.rawMetadata.fields.collection):void 0}get created_on(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.created_on?new $(this.rawMetadata.fields.created_on):void 0}get creator(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.creator?new g(this.rawMetadata.fields.creator):void 0}get date(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.date?new $(this.rawMetadata.fields.date):void 0}get description(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.description?new g(this.rawMetadata.fields.description):void 0}get downloads(){var e,t,i;const r=(t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.downloads;return r||r===0?new m((i=this.rawMetadata)===null||i===void 0?void 0:i.fields.downloads):void 0}get filename(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.filename?new g(this.rawMetadata.fields.filename):void 0}get file_basename(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.file_basename?new g(this.rawMetadata.fields.file_basename):void 0}get file_creation_mtime(){var e,t,i;const r=(t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.file_creation_mtime;return r||r===0?new m((i=this.rawMetadata)===null||i===void 0?void 0:i.fields.file_creation_mtime):void 0}get issue(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.issue?new g(this.rawMetadata.fields.issue):void 0}get mediatype(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.mediatype?new Ee(this.rawMetadata.fields.mediatype):void 0}get publicdate(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.publicdate?new $(this.rawMetadata.fields.publicdate):void 0}get result_in_subfile(){var e,t,i;const r=(t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.result_in_subfile;return r||r===!1?new W((i=this.rawMetadata)===null||i===void 0?void 0:i.fields.result_in_subfile):void 0}get reviewdate(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.reviewdate?new $(this.rawMetadata.fields.reviewdate):void 0}get source(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.source?new g(this.rawMetadata.fields.source):void 0}get subject(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.subject?new g(this.rawMetadata.fields.subject):void 0}get title(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.title?new g(this.rawMetadata.fields.title):void 0}get updated_on(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.updated_on?new $(this.rawMetadata.fields.updated_on):void 0}get year(){var e,t,i;const r=(t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.year;return r||r===0?new m((i=this.rawMetadata)===null||i===void 0?void 0:i.fields.year):void 0}get start(){var e,t,i;const r=(t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.start;return r||r===0?new g((i=this.rawMetadata)===null||i===void 0?void 0:i.fields.start):void 0}get __href__(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.__href__?new g(this.rawMetadata.fields.__href__):void 0}}l([d()],b.prototype,"highlight",null);l([d()],b.prototype,"addeddate",null);l([d()],b.prototype,"avg_rating",null);l([d()],b.prototype,"collection",null);l([d()],b.prototype,"created_on",null);l([d()],b.prototype,"creator",null);l([d()],b.prototype,"date",null);l([d()],b.prototype,"description",null);l([d()],b.prototype,"downloads",null);l([d()],b.prototype,"filename",null);l([d()],b.prototype,"file_basename",null);l([d()],b.prototype,"file_creation_mtime",null);l([d()],b.prototype,"issue",null);l([d()],b.prototype,"mediatype",null);l([d()],b.prototype,"publicdate",null);l([d()],b.prototype,"result_in_subfile",null);l([d()],b.prototype,"reviewdate",null);l([d()],b.prototype,"source",null);l([d()],b.prototype,"subject",null);l([d()],b.prototype,"title",null);l([d()],b.prototype,"updated_on",null);l([d()],b.prototype,"year",null);l([d()],b.prototype,"start",null);l([d()],b.prototype,"__href__",null);const Qi=["loans","waitlist","loan_history"];function er(n){const e=n.slice(0,4),t=n.slice(4,6),i=n.slice(6,8),r=n.slice(8,10),a=n.slice(10,12),s=n.slice(12,14);return`${e}-${t}-${i}T${r}:${a}:${s}Z`}function tr(n){var e;const t=[];for(const i of n){if(!(!((e=i.captures)===null||e===void 0)&&e.length))continue;const r=encodeURIComponent(i.url),a=`https://web.archive.org/web/${i.captures[0]}/${r}`;t.push({hit_type:"web_archive",fields:{url:i.url,capture_dates:i.captures.map(s=>er(s)),__href__:a}})}return t}class ft{constructor(e,t){var i,r,a,s,u,o,h,p,c,v,_,C,k,ze;this.schema=t,this.schemaHitType=t==null?void 0:t.hit_type;let N;e!=null&&e.page_elements&&(this.pageElements=e.page_elements,N=Object.values(this.pageElements)[0]);let T=(i=e==null?void 0:e.hits)===null||i===void 0?void 0:i.hits;this.totalResults=(a=(r=e==null?void 0:e.hits)===null||r===void 0?void 0:r.total)!==null&&a!==void 0?a:0,this.returnedCount=(u=(s=e==null?void 0:e.hits)===null||s===void 0?void 0:s.returned)!==null&&u!==void 0?u:0,!(T!=null&&T.length)&&((o=this.pageElements)===null||o===void 0?void 0:o.service___fts)?(this.totalResults=0,this.returnedCount=0,this.handleFederatedPageElements()):!(T!=null&&T.length)&&((h=N==null?void 0:N.hits)===null||h===void 0?void 0:h.hits)?(T=N.hits.hits,this.totalResults=(p=N.hits.total)!==null&&p!==void 0?p:0,this.returnedCount=(c=N.hits.returned)!==null&&c!==void 0?c:0):!((v=this.pageElements)===null||v===void 0)&&v.lending?T=this.handleLendingPageElement():!((_=this.pageElements)===null||_===void 0)&&_.web_archives&&(T=this.handleWebArchivesPageElement()),this.results=this.formatHits(T);let qe=e==null?void 0:e.aggregations;!(this.aggregations&&Object.keys(this.aggregations).length>0)&&(N==null?void 0:N.aggregations)&&(qe=N.aggregations),qe&&this.buildAggregations(qe),e!=null&&e.collection_titles&&(this.collectionTitles=(C=e.collection_titles)!==null&&C!==void 0?C:{}),e!=null&&e.collection_extra_info&&(this.collectionExtraInfo=(k=e.collection_extra_info)!==null&&k!==void 0?k:null),e!=null&&e.account_extra_info&&(this.accountExtraInfo=(ze=e.account_extra_info)!==null&&ze!==void 0?ze:null)}formatHits(e){var t;return(t=e==null?void 0:e.map(i=>{var r;return ft.createResult((r=i.hit_type)!==null&&r!==void 0?r:this.schemaHitType,i)}))!==null&&t!==void 0?t:[]}buildAggregations(e){this.aggregations=Object.entries(e).reduce((t,[i,r])=>(t[i]=new si(r),t),{})}handleLendingPageElement(){var e,t;const i=(e=this.pageElements)===null||e===void 0?void 0:e.lending,r=(t=i.loans)!==null&&t!==void 0?t:[];this.totalResults=r.length,this.returnedCount=this.totalResults;for(const a of Qi)i[a]=this.formatHits(i[a]);return r}handleWebArchivesPageElement(){var e;const t=tr((e=this.pageElements)===null||e===void 0?void 0:e.web_archives);return this.totalResults=t.length,this.returnedCount=this.totalResults,t}handleFederatedPageElements(){var e,t,i,r;const a=["service___fts","service___tvs","service___rcs","service___whisper"];for(const s of a){const u=this.removeServicePrefix(s);this.federatedResults?this.federatedResults[s]=[]:this.federatedResults={[u]:[]};const o=(t=(e=this.pageElements)===null||e===void 0?void 0:e[s])===null||t===void 0?void 0:t.hits;o!=null&&o.hits&&(this.federatedResults[u]=this.formatHits(o==null?void 0:o.hits)),this.totalResults+=(i=o==null?void 0:o.total)!==null&&i!==void 0?i:0,this.returnedCount+=(r=o==null?void 0:o.returned)!==null&&r!==void 0?r:0}}removeServicePrefix(e){return e.split("___")[1]}static createResult(e,t){switch(e){case"item":return new w(t);case"text":case"asr_text":return new y(t);case"favorited_search":return new xe(t);case"web_archive":return new je(t);case"tv_clip":return new b(t);default:return new w(t)}}}class ir{constructor(e){this.clientParameters=e.client_parameters,this.backendRequests=e.backend_requests,this.kind=e.kind}}class rr{constructor(e){var t,i,r;this.rawResponse=e,this.request=new ir(e.request),this.responseHeader=(t=e.response)===null||t===void 0?void 0:t.header,this.sessionContext=e.session_context,this.response=new ft((i=e.response)===null||i===void 0?void 0:i.body,(r=e.response)===null||r===void 0?void 0:r.hit_schema)}}var U;(function(n){n[n.METADATA=0]="METADATA",n[n.FULLTEXT=1]="FULLTEXT",n[n.RADIO=3]="RADIO",n[n.FEDERATED=4]="FEDERATED"})(U||(U={}));class re{static aggregateSearchParamsAsString(e){if(e.omit)return"false";if(e.advancedParams){const t=e.advancedParams.map(r=>({terms:r}));return JSON.stringify(t)}if(e.simpleParams)return e.simpleParams.join(",")}static sortParamsAsString(e){return`${e.field}:${e.direction}`}static filterParamsAsString(e){return JSON.stringify(e)}static generateURLSearchParams(e){const t=new URLSearchParams;if(t.append("user_query",e.query),e.pageType&&t.append("page_type",String(e.pageType)),e.pageTarget&&t.append("page_target",String(e.pageTarget)),e.pageElements&&e.pageElements.length>0){const a=`[${e.pageElements.map(s=>`"${s}"`).join(",")}]`;t.append("page_elements",a)}if(e.rows!=null&&t.append("hits_per_page",String(e.rows)),e.page!=null&&t.append("page",String(e.page)),e.fields&&e.fields.length>0&&t.append("fields",e.fields.join(",")),e.filters&&Object.keys(e.filters).length>0){const r=this.filterParamsAsString(e.filters);r&&r!=="{}"&&t.append("filter_map",r)}if(e.sort&&e.sort.length>0){const r=e.sort.map(a=>this.sortParamsAsString(a));t.append("sort",r.join(","))}const i=e.aggregations;if(i){const r=this.aggregateSearchParamsAsString(i);r&&t.append("aggregations",r)}if(e.aggregationsSize!=null&&t.append("aggregations_size",String(e.aggregationsSize)),e.debugging&&t.append("debugging","true"),e.uid&&t.append("uid",e.uid),e.includeClientUrl!==!1){const r=window.location.href.slice(0,400);e.query.length<=1e3&&t.append("client_url",r)}return t}}var he;(function(n){n.networkError="SearchService.NetworkError",n.itemNotFound="SearchService.ItemNotFound",n.decodingError="SearchService.DecodingError",n.searchEngineError="SearchService.SearchEngineError"})(he||(he={}));class ar extends Error{constructor(e,t,i){super(t),this.name=e,this.type=e,this.details=i}}const Bt={reCache:JSON.stringify({recompute:!0}),noCache:JSON.stringify({bypass:!0}),dontCache:JSON.stringify({no_compute:!0})};class Be{constructor(e){var t,i;this.baseUrl=(t=e==null?void 0:e.baseUrl)!==null&&t!==void 0?t:"archive.org",(e==null?void 0:e.includeCredentials)!==void 0?this.includeCredentials=e.includeCredentials:this.includeCredentials=window.location.href.match(/^https?:\/\/.*archive\.org(:[0-9]+)?/)!==null;const r=new URL(window.location.href).searchParams,a=r.get("scope"),s=r.get("verbose"),u=r.get("debugging"),o=r.get("cacheDebug");let h="";for(const p of Object.keys(Bt))if(r.get(p)){h=Bt[p];break}h=(i=r.get("caching"))!==null&&i!==void 0?i:h,(e==null?void 0:e.caching)!==void 0?this.cachingFlags=e.caching:h&&(this.cachingFlags=h),(e==null?void 0:e.debuggingEnabled)!==void 0?this.debuggingEnabled=e.debuggingEnabled:(u||o)&&(this.debuggingEnabled=!0),(e==null?void 0:e.scope)!==void 0?this.requestScope=e.scope:a&&(this.requestScope=a),(e==null?void 0:e.verbose)!==void 0?this.verbose=e.verbose:s&&(this.verbose=!!s)}async fetchUrl(e,t){var i,r;const a=new URL(e);this.requestScope&&a.searchParams.set("scope",this.requestScope),this.cachingFlags&&a.searchParams.set("caching",this.cachingFlags);let s;try{const u=(i=t==null?void 0:t.requestOptions)!==null&&i!==void 0?i:{credentials:this.includeCredentials?"include":"same-origin"};s=await fetch(a.href,u)}catch(u){const o=u instanceof Error?u.message:typeof u=="string"?u:"Unknown error";return this.getErrorResult(he.networkError,o)}try{const u=await s.json();this.verbose&&this.printResponse(u),u.debugging&&this.printDebuggingInfo(u);const o=(r=u.response)===null||r===void 0?void 0:r.error;return o?this.getErrorResult(he.searchEngineError,o.message,o.forensics):{success:u}}catch(u){const o=u instanceof Error?u.message:typeof u=="string"?u:"Unknown error";return this.getErrorResult(he.decodingError,o)}}getErrorResult(e,t,i){return{error:new ar(e,t,i)}}printResponse(e){var t,i,r,a,s;try{const u=JSON.parse(JSON.stringify(e)),o=(r=(i=(t=u==null?void 0:u.response)===null||t===void 0?void 0:t.body)===null||i===void 0?void 0:i.hits)===null||r===void 0?void 0:r.hits;if(Array.isArray(o)&&o.length>1){const p=[];p.push(o[0]),p.push(`*** ${o.length-1} hits omitted ***`),u.response.body.hits.hits=p}const h=(s=(a=u==null?void 0:u.response)===null||a===void 0?void 0:a.body)===null||s===void 0?void 0:s.aggregations;h&&Object.entries(h).forEach(([p,c])=>{var v,_,C;if(((v=c==null?void 0:c.buckets)===null||v===void 0?void 0:v.length)>0){const k=JSON.parse(JSON.stringify(c));k.buckets=`*** ${(C=(_=k.buckets)===null||_===void 0?void 0:_.length)!==null&&C!==void 0?C:0} buckets omitted ***`,u.response.body.aggregations[p]=k}}),console.log("***** RESPONSE RECEIVED *****"),console.groupCollapsed("Response"),console.log(JSON.stringify(u,null,2)),console.groupEnd()}catch(u){console.error("Error printing search response:",u)}}printDebuggingInfo(e){var t,i;const r=e.debugging,a=(t=r.messages)!==null&&t!==void 0?t:[],s=(i=r.data)!==null&&i!==void 0?i:{};console.log("***** BEGIN DEBUGGING *****"),console.log("Full response:"),console.log(JSON.stringify(e,null,2)),console.group("Debug messages");for(const u of a)console.log(u);console.groupEnd(),console.group("Debug data");for(const[u,o]of Object.entries(s))console.log(u,o);console.groupEnd(),console.log("***** END DEBUGGING *****")}}class nr extends Be{constructor(e){var t;super(e),this.servicePath=(t=e==null?void 0:e.servicePath)!==null&&t!==void 0?t:"/services/search/beta/page_production"}async performSearch(e){this.debuggingEnabled&&e.debugging===void 0&&(e.debugging=!0);const i=re.generateURLSearchParams(e).toString(),r=`https://${this.baseUrl}${this.servicePath}/?service_backend=fts&${i}`;return this.fetchUrl(r)}}class sr extends Be{constructor(e){var t;super(e),this.servicePath=(t=e==null?void 0:e.servicePath)!==null&&t!==void 0?t:"/services/search/beta/page_production"}async performSearch(e){this.debuggingEnabled&&e.debugging===void 0&&(e.debugging=!0);const i=re.generateURLSearchParams(e).toString(),r=`https://${this.baseUrl}${this.servicePath}/?${i}`;return this.fetchUrl(r)}}class lr extends Be{constructor(e){var t;super(e),this.servicePath=(t=e==null?void 0:e.servicePath)!==null&&t!==void 0?t:"/services/search/beta/page_production"}async performSearch(e){this.debuggingEnabled&&e.debugging===void 0&&(e.debugging=!0);const i=re.generateURLSearchParams(e).toString(),r=`https://${this.baseUrl}${this.servicePath}/?service_backend=rcs&${i}`;return this.fetchUrl(r)}}class or extends Be{constructor(e){var t;super(e),this.servicePath=(t=e==null?void 0:e.servicePath)!==null&&t!==void 0?t:"/services/search/beta/page_production"}async performSearch(e){this.debuggingEnabled&&e.debugging===void 0&&(e.debugging=!0);const i=re.generateURLSearchParams(e).toString(),r=`https://${this.baseUrl}${this.servicePath}/?page_type=simple_federation&${i}`;return this.fetchUrl(r)}}class ae{constructor(e={}){this.backendOptions=e}async search(e,t=U.METADATA){const r=await ae.getBackendForSearchType(t,this.backendOptions).performSearch(e);return r.error?r:{success:new rr(r.success)}}static getBackendForSearchType(e,t={}){switch(e){case U.FULLTEXT:return new nr(t);case U.RADIO:return new lr(t);case U.FEDERATED:return new or(t);case U.METADATA:default:return new sr(t)}}}ae.default=new ae;l([d((n,e={})=>{const{includeCredentials:t=!1,verbose:i=!1,scope:r="",baseUrl:a=""}=e;return`${n};${t};${i};${r};${a}`})],ae,"getBackendForSearchType",null);class zt{constructor(){this.filterMap={}}addFilter(e,t,i){if(this.filterMap[e]||(this.filterMap[e]={}),this.filterMap[e][t]){const r=[].concat(this.filterMap[e][t],i);this.filterMap[e][t]=Array.from(new Set(r))}else this.filterMap[e][t]=i;return this}removeSingleFilter(e,t,i){var r;if(!(!((r=this.filterMap[e])===null||r===void 0)&&r[t]))return this;const a=[].concat(this.filterMap[e][t]),s=a.indexOf(i);return s>=0&&a.splice(s,1),this.filterMap[e][t]=a.length===1?a[0]:a,a.length===0&&delete this.filterMap[e][t],this.deleteFieldIfEmpty(e),this}removeFilters(e,t){return this.filterMap[e]?(delete this.filterMap[e][t],this.deleteFieldIfEmpty(e),this):this}deleteFieldIfEmpty(e){const t=this.filterMap[e];t&&Object.keys(t).length===0&&delete this.filterMap[e]}setFilterMap(e){return this.filterMap={...e},this}mergeFilterMap(e){for(const[t,i]of Object.entries(e))for(const[r,a]of Object.entries(i))if(Array.isArray(a))for(const s of a)this.addFilter(t,r,s);else this.addFilter(t,r,a);return this}build(){return this.filterMap}}let M=class extends de{constructor(){super(...arguments),this.searchServiceUrlOptions=this.initSearchServiceUrlOptions(),this.filterMap={},this.loadingSearchResults=!1,this.loadingAggregations=!1,this.defaultAggregationsChecked=!0,this.fullSearchResultsShown=!1,this.searchService=new ae(this.searchServiceUrlOptions)}get searchResults(){var e;return(e=this.searchResponse)===null||e===void 0?void 0:e.response.results}get searchAggregations(){var e;return(e=this.aggregationsResponse)===null||e===void 0?void 0:e.response.aggregations}initSearchServiceUrlOptions(){var e,t,i;const r=new URL(window.location.href).searchParams;return{baseUrl:(e=r.get("search_base_url"))!==null&&e!==void 0?e:"ia-petabox-ximm-pps-feature-include-favorited-searches.archive.org",servicePath:(t=r.get("search_service_path"))!==null&&t!==void 0?t:void 0,debuggingEnabled:(i=!!r.get("debugging"))!==null&&i!==void 0?i:void 0}}render(){var e;return S`
      <fieldset>
        <legend>Search options</legend>
        <form>
          <label for="search-input">Query: </label>
          <input
            type="text"
            id="search-input"
            placeholder="Search Term or identifier"
          />
          <input type="submit" value="Go" @click=${this.search} />

          <span class="input-with-label">
            <input type="checkbox" id="search-within-check" />
            <label for="search-input-check">Search within collection</label>
          </span>

          <span class="input-with-label">
            <input
              type="checkbox"
              id="debug-info-check"
              ?checked=${(e=this.searchServiceUrlOptions)===null||e===void 0?void 0:e.debuggingEnabled}
            />
            <label for="debug-info-check">Include debugging info</label>
          </span>

          <fieldset class="search-options">
            <legend>Search type:</legend>
            <span class="input-with-label">
              <input
                type="radio"
                id="mds"
                name="search-type"
                value="mds"
                checked
              />
              <label for="mds"> &nbsp;Metadata </label>
            </span>
            <span class="input-with-label">
              <input type="radio" id="fts" name="search-type" value="fts" />
              <label for="fts"> &nbsp;Full text </label>
            </span>
          </fieldset>

          <fieldset class="search-options">
            <legend>Search size:</legend>
            <div class="field-row">
              <label for="num-rows">Number of result rows:</label>
              <input type="number" id="num-rows" value="10" min="0" max="999" />
            </div>
            <div class="field-row">
              <label for="num-aggs">Number of aggregation buckets:</label>
              <input type="number" id="num-aggs" value="6" min="0" max="999" />
            </div>
          </fieldset>

          <fieldset class="search-options">
            <legend>Sort by title:</legend>
            <span class="input-with-label">
              <input
                type="radio"
                id="sort-none"
                name="sort"
                value="none"
                checked
              />
              <label for="sort-none"> &nbsp;None </label>
            </span>
            <span class="input-with-label">
              <input type="radio" id="sort-asc" name="sort" value="asc" />
              <label for="sort-asc"> &nbsp;Ascending </label>
            </span>
            <span class="input-with-label">
              <input type="radio" id="sort-desc" name="sort" value="desc" />
              <label for="sort-desc"> &nbsp;Descending </label>
            </span>
          </fieldset>

          <fieldset class="search-options">
            <legend>Filters:</legend>
            <select id="filter-field" @change=${this.filterFieldChanged}>
              <option value="mediatype">Mediatype</option>
              <option value="year" data-numeric="true">Year</option>
              <option value="subject">Subject</option>
              <option value="language">Language</option>
              <option value="creator">Creator</option>
              <option value="collection">Collection</option>
              <option value="lending___status">Lending status</option>
            </select>
            <select id="filter-constraint">
              <option value="inc">includes</option>
              <option value="exc">excludes</option>
              <option value="gt" data-numeric="true" hidden>&gt;</option>
              <option value="gte" data-numeric="true" hidden>&gt;=</option>
              <option value="lt" data-numeric="true" hidden>&lt;</option>
              <option value="lte" data-numeric="true" hidden>&lt;=</option>
            </select>
            <input type="text" id="filter-value" />
            <button type="button" @click=${this.addFilterClicked}>
              Add filter
            </button>
            <div id="applied-filters">${this.appliedFiltersTemplate}</div>
          </fieldset>

          <fieldset class="search-options">
            <legend>Include aggregations for:</legend>
            <span class="input-with-label">
              <input
                type="checkbox"
                id="aggs-default"
                checked
                @change=${this.toggleDefaultAggregations}
              />
              <label for="aggs-default">Default (all) </label>
            </span>
            ${this.aggregationCheckboxTemplate("mediatype","Mediatype")}
            ${this.aggregationCheckboxTemplate("year","Year")}
            ${this.aggregationCheckboxTemplate("subject","Subject")}
            ${this.aggregationCheckboxTemplate("language","Language")}
            ${this.aggregationCheckboxTemplate("creator","Creator")}
            ${this.aggregationCheckboxTemplate("collection","Collection")}
            ${this.aggregationCheckboxTemplate("lending___status","Lending")}
          </fieldset>
        </form>
      </fieldset>

      ${this.searchResults||this.loadingSearchResults?this.resultsTemplate:A}
    `}filterFieldChanged(e){var t,i;const a=!!e.target.selectedOptions[0].dataset.numeric,s=(i=(t=this.shadowRoot)===null||t===void 0?void 0:t.querySelectorAll("#filter-constraint option"))!==null&&i!==void 0?i:[];for(const u of s)u.toggleAttribute("hidden",!a&&!!u.dataset.numeric)}addFilterClicked(){const e=this.filterFieldInput.selectedOptions[0].value,t=this.filterValueInput.value,i=this.filterConstraintInput.selectedOptions[0].value;!e||!i||!t||(this.filterMap=new zt().setFilterMap(this.filterMap).addFilter(e,t,i).build(),this.filterValueInput.value="")}removeFilterClicked(e){const t=e.target,{field:i,value:r,constraint:a}=t.dataset;i&&r&&a&&(this.filterMap=new zt().setFilterMap(this.filterMap).removeSingleFilter(i,r,a).build())}get appliedFiltersTemplate(){const e=[];for(const[i,r]of Object.entries(this.filterMap))for(const[a,s]of Object.entries(r))if(Array.isArray(s))for(const u of s)e.push({field:i,value:a,constraint:u});else e.push({field:i,value:a,constraint:s});if(e.length===0)return S`<span>(no filters applied)</span>`;const t={inc:"includes",exc:"excludes",gt:">",gte:">=",lt:"<",lte:"<="};return Zi(e,({field:i,value:r,constraint:a})=>S`
        <span class="filter">
          <span class="filter-text"
            >'${i}' ${t[a]} '${r}'</span
          ><!--
       --><button
            type="button"
            class="remove-filter"
            data-field=${i}
            data-value=${r}
            data-constraint=${a}
            @click=${this.removeFilterClicked}
          >
            x
          </button>
        </span>
      `)}aggregationCheckboxTemplate(e,t){const i=`aggs-${e}`;return S`
      <span class="input-with-label">
        <input
          type="checkbox"
          id=${i}
          name="aggs"
          value=${e}
          checked
          ?disabled=${this.defaultAggregationsChecked}
        />
        <label for=${i}>${t} </label>
      </span>
    `}get resultsTemplate(){return S`
      <details>
        <summary>PPS URL params</summary>
        ${this.lastSearchParams?S`<div>
              Last search params:
              <pre class="params">${this.lastSearchParams}</pre>
            </div>`:A}
        ${this.lastAggregationParams?S`<div>
              Last aggregation params:
              <pre class="params">${this.lastAggregationParams}</pre>
            </div>`:A}
      </details>
      ${this.loadingSearchResults?S`<h3>Loading search results...</h3>`:[this.minimalSearchResultsTemplate,this.fullSearchResultsTemplate]}
      ${this.loadingAggregations?S`<h3>Loading aggregations...</h3>`:this.aggregationsTemplate}
    `}get minimalSearchResultsTemplate(){var e;return S`
      <h2>Search Results</h2>
      <table>
        <thead>
          <tr>
            <th>Identifier</th>
            <th>Title</th>
            ${this.snippetsHeaderTemplate}
          </tr>
        </thead>
        <tbody>
          ${(e=this.searchResults)===null||e===void 0?void 0:e.map(t=>{var i,r;return S`
              <tr>
                <td>${t.identifier}</td>
                <td>${(r=(i=t.title)===null||i===void 0?void 0:i.value)!==null&&r!==void 0?r:"(Untitled)"}</td>
                ${this.snippetTemplate(t)}
              </tr>
            `})}
        </tbody>
      </table>
    `}get fullSearchResultsTemplate(){return S`
      <button @click=${this.toggleFullSearchResults}>
        ${this.fullSearchResultsShown?"Hide":"Show"} all search results
      </button>
      ${this.fullSearchResultsShown?S`<pre>
          ${JSON.stringify(this.searchResults,null,2)}
        </pre
          >`:A}
    `}get aggregationsTemplate(){var e;return S`
      <div>
        <h2>Aggregations</h2>
        ${Object.entries((e=this.searchAggregations)!==null&&e!==void 0?e:{}).map(([t,i])=>S`
            <h3>${t}</h3>
            <p>
              ${i.buckets.map(r=>typeof r=="number"?r:`${r.key} (${r.doc_count})`).join(", ")}
            </p>
          `)}
      </div>
    `}get snippetsHeaderTemplate(){var e;return!((e=this.searchResults)===null||e===void 0)&&e.some(t=>t.highlight)?S`<th>Snippets</th>`:S`${A}`}snippetTemplate(e){return e.highlight?S`<td>${e.highlight.value}</td>`:S`${A}`}toggleDefaultAggregations(){var e;this.defaultAggregationsChecked=(e=this.defaultAggregationsCheckbox)===null||e===void 0?void 0:e.checked}toggleFullSearchResults(){this.fullSearchResultsShown=!this.fullSearchResultsShown}async search(e){var t;e.preventDefault();const i=this.searchInput.value,r=(t=this.shadowRoot)===null||t===void 0?void 0:t.querySelector("input[name='search-type']:checked"),a=(r==null?void 0:r.value)==="fts"?U.FULLTEXT:U.METADATA;this.fetchSearchResults(i,a),this.fetchAggregations(i,a)}async fetchSearchResults(e,t){var i,r,a,s,u,o;const h=((i=this.checkedSort)===null||i===void 0?void 0:i.value)==="none"?void 0:[{field:"title",direction:(r=this.checkedSort)===null||r===void 0?void 0:r.value}],p=Number((a=this.rowsInput)===null||a===void 0?void 0:a.value),c=(s=this.debugCheck)===null||s===void 0?void 0:s.checked,v={query:e,rows:p,sort:h,filters:this.filterMap,aggregations:{omit:!0},debugging:c,uid:"demo"};!((u=this.searchWithinCheck)===null||u===void 0)&&u.checked&&(v.pageTarget=e,v.pageType="collection_details"),this.lastSearchParams=decodeURIComponent(re.generateURLSearchParams(v).toString()),this.loadingSearchResults=!0;const _=await this.searchService.search(v,t);this.loadingSearchResults=!1,_!=null&&_.success?this.searchResponse=_==null?void 0:_.success:(alert(`Oh noes: ${(o=_==null?void 0:_.error)===null||o===void 0?void 0:o.message}`),console.error("Error searching",_==null?void 0:_.error))}async fetchAggregations(e,t){var i,r,a,s;const u=(i=this.shadowRoot)===null||i===void 0?void 0:i.querySelectorAll("input[name='aggs']:checked"),o={simpleParams:u?[...u].map(_=>_.value):void 0},h=Number((r=this.numAggsInput)===null||r===void 0?void 0:r.value),p=(a=this.debugCheck)===null||a===void 0?void 0:a.checked,c={query:e,rows:0,filters:this.filterMap,aggregationsSize:h,debugging:p,uid:"demo"};this.defaultAggregationsChecked||(c.aggregations=o),this.lastAggregationParams=decodeURIComponent(re.generateURLSearchParams(c).toString()),this.loadingAggregations=!0;const v=await this.searchService.search(c,t);this.loadingAggregations=!1,v!=null&&v.success?this.aggregationsResponse=v==null?void 0:v.success:(alert(`Oh noes: ${(s=v==null?void 0:v.error)===null||s===void 0?void 0:s.message}`),console.error("Error searching",v==null?void 0:v.error))}static get styles(){return $i`
      :host {
        font-size: 1.3rem;
      }

      .search-options {
        margin-top: 0.6rem;
      }

      .field-row {
        margin: 0.3rem 0;
      }

      fieldset {
        margin-bottom: 0.5rem;
      }

      #search-input {
        min-width: 220px;
      }

      #applied-filters {
        margin-top: 6px;
      }

      .filter {
        display: inline-block;
        margin-bottom: 3px;
        font-size: 1.1rem;
        font-family: sans-serif;
      }

      .filter-text {
        padding: 3px 3px 3px 6px;
        border-radius: 3px 0 0 3px;
        background: #ccc;
      }

      .remove-filter {
        all: unset;
        padding: 3px 6px;
        border-radius: 0 3px 3px 0;
        background: #ccc;
        cursor: pointer;
      }
      .remove-filter:hover {
        background: #999;
      }
      .remove-filter:active {
        background: #888;
      }

      .input-with-label {
        display: inline-flex;
        align-items: center;
        margin-right: 8px;
      }

      .params {
        white-space: pre-wrap;
      }
    `}};l([P("#search-input")],M.prototype,"searchInput",void 0);l([P("#search-within-check")],M.prototype,"searchWithinCheck",void 0);l([P("#debug-info-check")],M.prototype,"debugCheck",void 0);l([P("#num-rows")],M.prototype,"rowsInput",void 0);l([P("#num-aggs")],M.prototype,"numAggsInput",void 0);l([P("input[name='sort']:checked")],M.prototype,"checkedSort",void 0);l([P("#filter-field")],M.prototype,"filterFieldInput",void 0);l([P("#filter-constraint")],M.prototype,"filterConstraintInput",void 0);l([P("#filter-value")],M.prototype,"filterValueInput",void 0);l([P("#aggs-default")],M.prototype,"defaultAggregationsCheckbox",void 0);l([H()],M.prototype,"searchServiceUrlOptions",void 0);l([H()],M.prototype,"filterMap",void 0);l([H()],M.prototype,"searchResponse",void 0);l([H()],M.prototype,"aggregationsResponse",void 0);l([H()],M.prototype,"loadingSearchResults",void 0);l([H()],M.prototype,"loadingAggregations",void 0);l([H()],M.prototype,"lastSearchParams",void 0);l([H()],M.prototype,"lastAggregationParams",void 0);l([H()],M.prototype,"defaultAggregationsChecked",void 0);l([H()],M.prototype,"fullSearchResultsShown",void 0);M=l([Bi("app-root")],M);wi(hi`
        <app-root></app-root>
      `,document.querySelector("#demo"));
