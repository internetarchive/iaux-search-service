const ni=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}};ni();/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ae=globalThis,Me=ae.trustedTypes,pt=Me?Me.createPolicy("lit-html",{createHTML:n=>n}):void 0,zt="$lit$",U=`lit$${Math.random().toFixed(9).slice(2)}$`,Vt="?"+U,ai=`<${Vt}>`,q=document,he=()=>q.createComment(""),ce=n=>n===null||typeof n!="object"&&typeof n!="function",at=Array.isArray,li=n=>at(n)||typeof(n==null?void 0:n[Symbol.iterator])=="function",Ie=`[ 	
\f\r]`,se=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,gt=/-->/g,ft=/>/g,D=RegExp(`>|${Ie}(?:([^\\s"'>=/]+)(${Ie}*=${Ie}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),_t=/'/g,vt=/"/g,qt=/^(?:script|style|textarea|title)$/i,oi=n=>(e,...t)=>({_$litType$:n,strings:e,values:t}),di=oi(1),pe=Symbol.for("lit-noChange"),y=Symbol.for("lit-nothing"),mt=new WeakMap,j=q.createTreeWalker(q,129);function Wt(n,e){if(!at(n)||!n.hasOwnProperty("raw"))throw Error("invalid template strings array");return pt!==void 0?pt.createHTML(e):e}const ui=(n,e)=>{const t=n.length-1,i=[];let s,r=e===2?"<svg>":e===3?"<math>":"",a=se;for(let o=0;o<t;o++){const l=n[o];let u,p,h=-1,g=0;for(;g<l.length&&(a.lastIndex=g,p=a.exec(l),p!==null);)g=a.lastIndex,a===se?p[1]==="!--"?a=gt:p[1]!==void 0?a=ft:p[2]!==void 0?(qt.test(p[2])&&(s=RegExp("</"+p[2],"g")),a=D):p[3]!==void 0&&(a=D):a===D?p[0]===">"?(a=s!=null?s:se,h=-1):p[1]===void 0?h=-2:(h=a.lastIndex-p[2].length,u=p[1],a=p[3]===void 0?D:p[3]==='"'?vt:_t):a===vt||a===_t?a=D:a===gt||a===ft?a=se:(a=D,s=void 0);const _=a===D&&n[o+1].startsWith("/>")?" ":"";r+=a===se?l+ai:h>=0?(i.push(u),l.slice(0,h)+zt+l.slice(h)+U+_):l+U+(h===-2?o:_)}return[Wt(n,r+(n[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),i]};class ge{constructor({strings:e,_$litType$:t},i){let s;this.parts=[];let r=0,a=0;const o=e.length-1,l=this.parts,[u,p]=ui(e,t);if(this.el=ge.createElement(u,i),j.currentNode=this.el.content,t===2||t===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(s=j.nextNode())!==null&&l.length<o;){if(s.nodeType===1){if(s.hasAttributes())for(const h of s.getAttributeNames())if(h.endsWith(zt)){const g=p[a++],_=s.getAttribute(h).split(U),S=/([.?@])?(.*)/.exec(g);l.push({type:1,index:r,name:S[2],strings:_,ctor:S[1]==="."?ci:S[1]==="?"?pi:S[1]==="@"?gi:Re}),s.removeAttribute(h)}else h.startsWith(U)&&(l.push({type:6,index:r}),s.removeAttribute(h));if(qt.test(s.tagName)){const h=s.textContent.split(U),g=h.length-1;if(g>0){s.textContent=Me?Me.emptyScript:"";for(let _=0;_<g;_++)s.append(h[_],he()),j.nextNode(),l.push({type:2,index:++r});s.append(h[g],he())}}}else if(s.nodeType===8)if(s.data===Vt)l.push({type:2,index:r});else{let h=-1;for(;(h=s.data.indexOf(U,h+1))!==-1;)l.push({type:7,index:r}),h+=U.length-1}r++}}static createElement(e,t){const i=q.createElement("template");return i.innerHTML=e,i}}function Z(n,e,t=n,i){var a,o,l;if(e===pe)return e;let s=i!==void 0?(a=t._$Co)==null?void 0:a[i]:t._$Cl;const r=ce(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==r&&((o=s==null?void 0:s._$AO)==null||o.call(s,!1),r===void 0?s=void 0:(s=new r(n),s._$AT(n,t,i)),i!==void 0?((l=t._$Co)!=null?l:t._$Co=[])[i]=s:t._$Cl=s),s!==void 0&&(e=Z(n,s._$AS(n,e.values),s,i)),e}class hi{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var u;const{el:{content:t},parts:i}=this._$AD,s=((u=e==null?void 0:e.creationScope)!=null?u:q).importNode(t,!0);j.currentNode=s;let r=j.nextNode(),a=0,o=0,l=i[0];for(;l!==void 0;){if(a===l.index){let p;l.type===2?p=new ye(r,r.nextSibling,this,e):l.type===1?p=new l.ctor(r,l.name,l.strings,this,e):l.type===6&&(p=new fi(r,this,e)),this._$AV.push(p),l=i[++o]}a!==(l==null?void 0:l.index)&&(r=j.nextNode(),a++)}return j.currentNode=q,s}p(e){let t=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class ye{get _$AU(){var e,t;return(t=(e=this._$AM)==null?void 0:e._$AU)!=null?t:this._$Cv}constructor(e,t,i,s){var r;this.type=2,this._$AH=y,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=s,this._$Cv=(r=s==null?void 0:s.isConnected)!=null?r:!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Z(this,e,t),ce(e)?e===y||e==null||e===""?(this._$AH!==y&&this._$AR(),this._$AH=y):e!==this._$AH&&e!==pe&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):li(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==y&&ce(this._$AH)?this._$AA.nextSibling.data=e:this.T(q.createTextNode(e)),this._$AH=e}$(e){var r;const{values:t,_$litType$:i}=e,s=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=ge.createElement(Wt(i.h,i.h[0]),this.options)),i);if(((r=this._$AH)==null?void 0:r._$AD)===s)this._$AH.p(t);else{const a=new hi(s,this),o=a.u(this.options);a.p(t),this.T(o),this._$AH=a}}_$AC(e){let t=mt.get(e.strings);return t===void 0&&mt.set(e.strings,t=new ge(e)),t}k(e){at(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,s=0;for(const r of e)s===t.length?t.push(i=new ye(this.O(he()),this.O(he()),this,this.options)):i=t[s],i._$AI(r),s++;s<t.length&&(this._$AR(i&&i._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){var i;for((i=this._$AP)==null?void 0:i.call(this,!1,!0,t);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var t;this._$AM===void 0&&(this._$Cv=e,(t=this._$AP)==null||t.call(this,e))}}class Re{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,i,s,r){this.type=1,this._$AH=y,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=r,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=y}_$AI(e,t=this,i,s){const r=this.strings;let a=!1;if(r===void 0)e=Z(this,e,t,0),a=!ce(e)||e!==this._$AH&&e!==pe,a&&(this._$AH=e);else{const o=e;let l,u;for(e=r[0],l=0;l<r.length-1;l++)u=Z(this,o[i+l],t,l),u===pe&&(u=this._$AH[l]),a||(a=!ce(u)||u!==this._$AH[l]),u===y?e=y:e!==y&&(e+=(u!=null?u:"")+r[l+1]),this._$AH[l]=u}a&&!s&&this.j(e)}j(e){e===y?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e!=null?e:"")}}class ci extends Re{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===y?void 0:e}}class pi extends Re{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==y)}}class gi extends Re{constructor(e,t,i,s,r){super(e,t,i,s,r),this.type=5}_$AI(e,t=this){var a;if((e=(a=Z(this,e,t,0))!=null?a:y)===pe)return;const i=this._$AH,s=e===y&&i!==y||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,r=e!==y&&(i===y||s);s&&this.element.removeEventListener(this.name,this,i),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;typeof this._$AH=="function"?this._$AH.call((i=(t=this.options)==null?void 0:t.host)!=null?i:this.element,e):this._$AH.handleEvent(e)}}class fi{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){Z(this,e)}}const Le=ae.litHtmlPolyfillSupport;var jt;Le==null||Le(ge,ye),((jt=ae.litHtmlVersions)!=null?jt:ae.litHtmlVersions=[]).push("3.3.0");const _i=(n,e,t)=>{var r,a;const i=(r=t==null?void 0:t.renderBefore)!=null?r:e;let s=i._$litPart$;if(s===void 0){const o=(a=t==null?void 0:t.renderBefore)!=null?a:null;i._$litPart$=s=new ye(e.insertBefore(he(),o),o,void 0,t!=null?t:{})}return s._$AI(n),s};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function d(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(r=(s<3?a(r):s>3?a(e,t,r):a(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ae=window,lt=Ae.ShadowRoot&&(Ae.ShadyCSS===void 0||Ae.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ot=Symbol(),$t=new WeakMap;class Jt{constructor(e,t,i){if(this._$cssResult$=!0,i!==ot)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(lt&&e===void 0){const i=t!==void 0&&t.length===1;i&&(e=$t.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&$t.set(t,e))}return e}toString(){return this.cssText}}const vi=n=>new Jt(typeof n=="string"?n:n+"",void 0,ot),mi=(n,...e)=>{const t=n.length===1?n[0]:e.reduce((i,s,r)=>i+(a=>{if(a._$cssResult$===!0)return a.cssText;if(typeof a=="number")return a;throw Error("Value passed to 'css' function must be a 'css' function result: "+a+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+n[r+1],n[0]);return new Jt(t,n,ot)},$i=(n,e)=>{lt?n.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet):e.forEach(t=>{const i=document.createElement("style"),s=Ae.litNonce;s!==void 0&&i.setAttribute("nonce",s),i.textContent=t.cssText,n.appendChild(i)})},wt=lt?n=>n:n=>n instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return vi(t)})(n):n;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var De;const Se=window,yt=Se.trustedTypes,wi=yt?yt.emptyScript:"",bt=Se.reactiveElementPolyfillSupport,Ke={toAttribute(n,e){switch(e){case Boolean:n=n?wi:null;break;case Object:case Array:n=n==null?n:JSON.stringify(n)}return n},fromAttribute(n,e){let t=n;switch(e){case Boolean:t=n!==null;break;case Number:t=n===null?null:Number(n);break;case Object:case Array:try{t=JSON.parse(n)}catch{t=null}}return t}},Gt=(n,e)=>e!==n&&(e==e||n==n),Fe={attribute:!0,type:String,converter:Ke,reflect:!1,hasChanged:Gt},Xe="finalized";class G extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),((t=this.h)!==null&&t!==void 0?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((t,i)=>{const s=this._$Ep(i,t);s!==void 0&&(this._$Ev.set(s,i),e.push(s))}),e}static createProperty(e,t=Fe){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const i=typeof e=="symbol"?Symbol():"__"+e,s=this.getPropertyDescriptor(e,i,t);s!==void 0&&Object.defineProperty(this.prototype,e,s)}}static getPropertyDescriptor(e,t,i){return{get(){return this[t]},set(s){const r=this[e];this[t]=s,this.requestUpdate(e,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||Fe}static finalize(){if(this.hasOwnProperty(Xe))return!1;this[Xe]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,i=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const s of i)this.createProperty(s,t[s])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const s of i)t.unshift(wt(s))}else e!==void 0&&t.push(wt(e));return t}static _$Ep(e,t){const i=t.attribute;return i===!1?void 0:typeof i=="string"?i:typeof e=="string"?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(t=>t(this))}addController(e){var t,i;((t=this._$ES)!==null&&t!==void 0?t:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((i=e.hostConnected)===null||i===void 0||i.call(e))}removeController(e){var t;(t=this._$ES)===null||t===void 0||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])})}createRenderRoot(){var e;const t=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return $i(t,this.constructor.elementStyles),t}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(t=>{var i;return(i=t.hostConnected)===null||i===void 0?void 0:i.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(t=>{var i;return(i=t.hostDisconnected)===null||i===void 0?void 0:i.call(t)})}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$EO(e,t,i=Fe){var s;const r=this.constructor._$Ep(e,i);if(r!==void 0&&i.reflect===!0){const a=(((s=i.converter)===null||s===void 0?void 0:s.toAttribute)!==void 0?i.converter:Ke).toAttribute(t,i.type);this._$El=e,a==null?this.removeAttribute(r):this.setAttribute(r,a),this._$El=null}}_$AK(e,t){var i;const s=this.constructor,r=s._$Ev.get(e);if(r!==void 0&&this._$El!==r){const a=s.getPropertyOptions(r),o=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)===null||i===void 0?void 0:i.fromAttribute)!==void 0?a.converter:Ke;this._$El=r,this[r]=o.fromAttribute(t,a.type),this._$El=null}}requestUpdate(e,t,i){let s=!0;e!==void 0&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||Gt)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),i.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,i))):s=!1),!this.isUpdatePending&&s&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((s,r)=>this[r]=s),this._$Ei=void 0);let t=!1;const i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),(e=this._$ES)===null||e===void 0||e.forEach(s=>{var r;return(r=s.hostUpdate)===null||r===void 0?void 0:r.call(s)}),this.update(i)):this._$Ek()}catch(s){throw t=!1,this._$Ek(),s}t&&this._$AE(i)}willUpdate(e){}_$AE(e){var t;(t=this._$ES)===null||t===void 0||t.forEach(i=>{var s;return(s=i.hostUpdated)===null||s===void 0?void 0:s.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((t,i)=>this._$EO(i,this[i],t)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}G[Xe]=!0,G.elementProperties=new Map,G.elementStyles=[],G.shadowRootOptions={mode:"open"},bt==null||bt({ReactiveElement:G}),((De=Se.reactiveElementVersions)!==null&&De!==void 0?De:Se.reactiveElementVersions=[]).push("1.6.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Be;const Ee=window,K=Ee.trustedTypes,At=K?K.createPolicy("lit-html",{createHTML:n=>n}):void 0,Ye="$lit$",O=`lit$${(Math.random()+"").slice(9)}$`,Zt="?"+O,yi=`<${Zt}>`,W=document,xe=()=>W.createComment(""),fe=n=>n===null||typeof n!="object"&&typeof n!="function",Kt=Array.isArray,bi=n=>Kt(n)||typeof(n==null?void 0:n[Symbol.iterator])=="function",je=`[ 	
\f\r]`,re=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Mt=/-->/g,St=/>/g,F=RegExp(`>|${je}(?:([^\\s"'>=/]+)(${je}*=${je}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Et=/'/g,xt=/"/g,Xt=/^(?:script|style|textarea|title)$/i,_e=Symbol.for("lit-noChange"),b=Symbol.for("lit-nothing"),kt=new WeakMap,z=W.createTreeWalker(W,129,null,!1);function Yt(n,e){if(!Array.isArray(n)||!n.hasOwnProperty("raw"))throw Error("invalid template strings array");return At!==void 0?At.createHTML(e):e}const Ai=(n,e)=>{const t=n.length-1,i=[];let s,r=e===2?"<svg>":"",a=re;for(let o=0;o<t;o++){const l=n[o];let u,p,h=-1,g=0;for(;g<l.length&&(a.lastIndex=g,p=a.exec(l),p!==null);)g=a.lastIndex,a===re?p[1]==="!--"?a=Mt:p[1]!==void 0?a=St:p[2]!==void 0?(Xt.test(p[2])&&(s=RegExp("</"+p[2],"g")),a=F):p[3]!==void 0&&(a=F):a===F?p[0]===">"?(a=s!=null?s:re,h=-1):p[1]===void 0?h=-2:(h=a.lastIndex-p[2].length,u=p[1],a=p[3]===void 0?F:p[3]==='"'?xt:Et):a===xt||a===Et?a=F:a===Mt||a===St?a=re:(a=F,s=void 0);const _=a===F&&n[o+1].startsWith("/>")?" ":"";r+=a===re?l+yi:h>=0?(i.push(u),l.slice(0,h)+Ye+l.slice(h)+O+_):l+O+(h===-2?(i.push(void 0),o):_)}return[Yt(n,r+(n[t]||"<?>")+(e===2?"</svg>":"")),i]};class ve{constructor({strings:e,_$litType$:t},i){let s;this.parts=[];let r=0,a=0;const o=e.length-1,l=this.parts,[u,p]=Ai(e,t);if(this.el=ve.createElement(u,i),z.currentNode=this.el.content,t===2){const h=this.el.content,g=h.firstChild;g.remove(),h.append(...g.childNodes)}for(;(s=z.nextNode())!==null&&l.length<o;){if(s.nodeType===1){if(s.hasAttributes()){const h=[];for(const g of s.getAttributeNames())if(g.endsWith(Ye)||g.startsWith(O)){const _=p[a++];if(h.push(g),_!==void 0){const S=s.getAttribute(_.toLowerCase()+Ye).split(O),A=/([.?@])?(.*)/.exec(_);l.push({type:1,index:r,name:A[2],strings:S,ctor:A[1]==="."?Si:A[1]==="?"?xi:A[1]==="@"?ki:Pe})}else l.push({type:6,index:r})}for(const g of h)s.removeAttribute(g)}if(Xt.test(s.tagName)){const h=s.textContent.split(O),g=h.length-1;if(g>0){s.textContent=K?K.emptyScript:"";for(let _=0;_<g;_++)s.append(h[_],xe()),z.nextNode(),l.push({type:2,index:++r});s.append(h[g],xe())}}}else if(s.nodeType===8)if(s.data===Zt)l.push({type:2,index:r});else{let h=-1;for(;(h=s.data.indexOf(O,h+1))!==-1;)l.push({type:7,index:r}),h+=O.length-1}r++}}static createElement(e,t){const i=W.createElement("template");return i.innerHTML=e,i}}function X(n,e,t=n,i){var s,r,a,o;if(e===_e)return e;let l=i!==void 0?(s=t._$Co)===null||s===void 0?void 0:s[i]:t._$Cl;const u=fe(e)?void 0:e._$litDirective$;return(l==null?void 0:l.constructor)!==u&&((r=l==null?void 0:l._$AO)===null||r===void 0||r.call(l,!1),u===void 0?l=void 0:(l=new u(n),l._$AT(n,t,i)),i!==void 0?((a=(o=t)._$Co)!==null&&a!==void 0?a:o._$Co=[])[i]=l:t._$Cl=l),l!==void 0&&(e=X(n,l._$AS(n,e.values),l,i)),e}class Mi{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:i},parts:s}=this._$AD,r=((t=e==null?void 0:e.creationScope)!==null&&t!==void 0?t:W).importNode(i,!0);z.currentNode=r;let a=z.nextNode(),o=0,l=0,u=s[0];for(;u!==void 0;){if(o===u.index){let p;u.type===2?p=new Te(a,a.nextSibling,this,e):u.type===1?p=new u.ctor(a,u.name,u.strings,this,e):u.type===6&&(p=new Ci(a,this,e)),this._$AV.push(p),u=s[++l]}o!==(u==null?void 0:u.index)&&(a=z.nextNode(),o++)}return z.currentNode=W,r}v(e){let t=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class Te{constructor(e,t,i,s){var r;this.type=2,this._$AH=b,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=s,this._$Cp=(r=s==null?void 0:s.isConnected)===null||r===void 0||r}get _$AU(){var e,t;return(t=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&t!==void 0?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=X(this,e,t),fe(e)?e===b||e==null||e===""?(this._$AH!==b&&this._$AR(),this._$AH=b):e!==this._$AH&&e!==_e&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):bi(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==b&&fe(this._$AH)?this._$AA.nextSibling.data=e:this.$(W.createTextNode(e)),this._$AH=e}g(e){var t;const{values:i,_$litType$:s}=e,r=typeof s=="number"?this._$AC(e):(s.el===void 0&&(s.el=ve.createElement(Yt(s.h,s.h[0]),this.options)),s);if(((t=this._$AH)===null||t===void 0?void 0:t._$AD)===r)this._$AH.v(i);else{const a=new Mi(r,this),o=a.u(this.options);a.v(i),this.$(o),this._$AH=a}}_$AC(e){let t=kt.get(e.strings);return t===void 0&&kt.set(e.strings,t=new ve(e)),t}T(e){Kt(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,s=0;for(const r of e)s===t.length?t.push(i=new Te(this.k(xe()),this.k(xe()),this,this.options)):i=t[s],i._$AI(r),s++;s<t.length&&(this._$AR(i&&i._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,t);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var t;this._$AM===void 0&&(this._$Cp=e,(t=this._$AP)===null||t===void 0||t.call(this,e))}}class Pe{constructor(e,t,i,s,r){this.type=1,this._$AH=b,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=r,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=b}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,i,s){const r=this.strings;let a=!1;if(r===void 0)e=X(this,e,t,0),a=!fe(e)||e!==this._$AH&&e!==_e,a&&(this._$AH=e);else{const o=e;let l,u;for(e=r[0],l=0;l<r.length-1;l++)u=X(this,o[i+l],t,l),u===_e&&(u=this._$AH[l]),a||(a=!fe(u)||u!==this._$AH[l]),u===b?e=b:e!==b&&(e+=(u!=null?u:"")+r[l+1]),this._$AH[l]=u}a&&!s&&this.j(e)}j(e){e===b?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e!=null?e:"")}}class Si extends Pe{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===b?void 0:e}}const Ei=K?K.emptyScript:"";class xi extends Pe{constructor(){super(...arguments),this.type=4}j(e){e&&e!==b?this.element.setAttribute(this.name,Ei):this.element.removeAttribute(this.name)}}class ki extends Pe{constructor(e,t,i,s,r){super(e,t,i,s,r),this.type=5}_$AI(e,t=this){var i;if((e=(i=X(this,e,t,0))!==null&&i!==void 0?i:b)===_e)return;const s=this._$AH,r=e===b&&s!==b||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,a=e!==b&&(s===b||r);r&&this.element.removeEventListener(this.name,this,s),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;typeof this._$AH=="function"?this._$AH.call((i=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&i!==void 0?i:this.element,e):this._$AH.handleEvent(e)}}class Ci{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){X(this,e)}}const Ct=Ee.litHtmlPolyfillSupport;Ct==null||Ct(ve,Te),((Be=Ee.litHtmlVersions)!==null&&Be!==void 0?Be:Ee.litHtmlVersions=[]).push("2.8.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var ze;const ke=window,Y=ke.trustedTypes,Nt=Y?Y.createPolicy("lit-html",{createHTML:n=>n}):void 0,Qe="$lit$",I=`lit$${(Math.random()+"").slice(9)}$`,Qt="?"+I,Ni=`<${Qt}>`,J=document,me=()=>J.createComment(""),$e=n=>n===null||typeof n!="object"&&typeof n!="function",ei=Array.isArray,Ri=n=>ei(n)||typeof(n==null?void 0:n[Symbol.iterator])=="function",Ve=`[ 	
\f\r]`,ne=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Rt=/-->/g,Tt=/>/g,B=RegExp(`>|${Ve}(?:([^\\s"'>=/]+)(${Ve}*=${Ve}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Pt=/'/g,Ht=/"/g,ti=/^(?:script|style|textarea|title)$/i,Ti=n=>(e,...t)=>({_$litType$:n,strings:e,values:t}),w=Ti(1),Q=Symbol.for("lit-noChange"),m=Symbol.for("lit-nothing"),Ut=new WeakMap,V=J.createTreeWalker(J,129,null,!1);function ii(n,e){if(!Array.isArray(n)||!n.hasOwnProperty("raw"))throw Error("invalid template strings array");return Nt!==void 0?Nt.createHTML(e):e}const Pi=(n,e)=>{const t=n.length-1,i=[];let s,r=e===2?"<svg>":"",a=ne;for(let o=0;o<t;o++){const l=n[o];let u,p,h=-1,g=0;for(;g<l.length&&(a.lastIndex=g,p=a.exec(l),p!==null);)g=a.lastIndex,a===ne?p[1]==="!--"?a=Rt:p[1]!==void 0?a=Tt:p[2]!==void 0?(ti.test(p[2])&&(s=RegExp("</"+p[2],"g")),a=B):p[3]!==void 0&&(a=B):a===B?p[0]===">"?(a=s!=null?s:ne,h=-1):p[1]===void 0?h=-2:(h=a.lastIndex-p[2].length,u=p[1],a=p[3]===void 0?B:p[3]==='"'?Ht:Pt):a===Ht||a===Pt?a=B:a===Rt||a===Tt?a=ne:(a=B,s=void 0);const _=a===B&&n[o+1].startsWith("/>")?" ":"";r+=a===ne?l+Ni:h>=0?(i.push(u),l.slice(0,h)+Qe+l.slice(h)+I+_):l+I+(h===-2?(i.push(void 0),o):_)}return[ii(n,r+(n[t]||"<?>")+(e===2?"</svg>":"")),i]};class we{constructor({strings:e,_$litType$:t},i){let s;this.parts=[];let r=0,a=0;const o=e.length-1,l=this.parts,[u,p]=Pi(e,t);if(this.el=we.createElement(u,i),V.currentNode=this.el.content,t===2){const h=this.el.content,g=h.firstChild;g.remove(),h.append(...g.childNodes)}for(;(s=V.nextNode())!==null&&l.length<o;){if(s.nodeType===1){if(s.hasAttributes()){const h=[];for(const g of s.getAttributeNames())if(g.endsWith(Qe)||g.startsWith(I)){const _=p[a++];if(h.push(g),_!==void 0){const S=s.getAttribute(_.toLowerCase()+Qe).split(I),A=/([.?@])?(.*)/.exec(_);l.push({type:1,index:r,name:A[2],strings:S,ctor:A[1]==="."?Ui:A[1]==="?"?Ii:A[1]==="@"?Li:He})}else l.push({type:6,index:r})}for(const g of h)s.removeAttribute(g)}if(ti.test(s.tagName)){const h=s.textContent.split(I),g=h.length-1;if(g>0){s.textContent=Y?Y.emptyScript:"";for(let _=0;_<g;_++)s.append(h[_],me()),V.nextNode(),l.push({type:2,index:++r});s.append(h[g],me())}}}else if(s.nodeType===8)if(s.data===Qt)l.push({type:2,index:r});else{let h=-1;for(;(h=s.data.indexOf(I,h+1))!==-1;)l.push({type:7,index:r}),h+=I.length-1}r++}}static createElement(e,t){const i=J.createElement("template");return i.innerHTML=e,i}}function ee(n,e,t=n,i){var s,r,a,o;if(e===Q)return e;let l=i!==void 0?(s=t._$Co)===null||s===void 0?void 0:s[i]:t._$Cl;const u=$e(e)?void 0:e._$litDirective$;return(l==null?void 0:l.constructor)!==u&&((r=l==null?void 0:l._$AO)===null||r===void 0||r.call(l,!1),u===void 0?l=void 0:(l=new u(n),l._$AT(n,t,i)),i!==void 0?((a=(o=t)._$Co)!==null&&a!==void 0?a:o._$Co=[])[i]=l:t._$Cl=l),l!==void 0&&(e=ee(n,l._$AS(n,e.values),l,i)),e}class Hi{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:i},parts:s}=this._$AD,r=((t=e==null?void 0:e.creationScope)!==null&&t!==void 0?t:J).importNode(i,!0);V.currentNode=r;let a=V.nextNode(),o=0,l=0,u=s[0];for(;u!==void 0;){if(o===u.index){let p;u.type===2?p=new be(a,a.nextSibling,this,e):u.type===1?p=new u.ctor(a,u.name,u.strings,this,e):u.type===6&&(p=new Di(a,this,e)),this._$AV.push(p),u=s[++l]}o!==(u==null?void 0:u.index)&&(a=V.nextNode(),o++)}return V.currentNode=J,r}v(e){let t=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class be{constructor(e,t,i,s){var r;this.type=2,this._$AH=m,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=s,this._$Cp=(r=s==null?void 0:s.isConnected)===null||r===void 0||r}get _$AU(){var e,t;return(t=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&t!==void 0?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=ee(this,e,t),$e(e)?e===m||e==null||e===""?(this._$AH!==m&&this._$AR(),this._$AH=m):e!==this._$AH&&e!==Q&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):Ri(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==m&&$e(this._$AH)?this._$AA.nextSibling.data=e:this.$(J.createTextNode(e)),this._$AH=e}g(e){var t;const{values:i,_$litType$:s}=e,r=typeof s=="number"?this._$AC(e):(s.el===void 0&&(s.el=we.createElement(ii(s.h,s.h[0]),this.options)),s);if(((t=this._$AH)===null||t===void 0?void 0:t._$AD)===r)this._$AH.v(i);else{const a=new Hi(r,this),o=a.u(this.options);a.v(i),this.$(o),this._$AH=a}}_$AC(e){let t=Ut.get(e.strings);return t===void 0&&Ut.set(e.strings,t=new we(e)),t}T(e){ei(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,s=0;for(const r of e)s===t.length?t.push(i=new be(this.k(me()),this.k(me()),this,this.options)):i=t[s],i._$AI(r),s++;s<t.length&&(this._$AR(i&&i._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,t);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var t;this._$AM===void 0&&(this._$Cp=e,(t=this._$AP)===null||t===void 0||t.call(this,e))}}class He{constructor(e,t,i,s,r){this.type=1,this._$AH=m,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=r,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=m}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,i,s){const r=this.strings;let a=!1;if(r===void 0)e=ee(this,e,t,0),a=!$e(e)||e!==this._$AH&&e!==Q,a&&(this._$AH=e);else{const o=e;let l,u;for(e=r[0],l=0;l<r.length-1;l++)u=ee(this,o[i+l],t,l),u===Q&&(u=this._$AH[l]),a||(a=!$e(u)||u!==this._$AH[l]),u===m?e=m:e!==m&&(e+=(u!=null?u:"")+r[l+1]),this._$AH[l]=u}a&&!s&&this.j(e)}j(e){e===m?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e!=null?e:"")}}class Ui extends He{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===m?void 0:e}}const Oi=Y?Y.emptyScript:"";class Ii extends He{constructor(){super(...arguments),this.type=4}j(e){e&&e!==m?this.element.setAttribute(this.name,Oi):this.element.removeAttribute(this.name)}}class Li extends He{constructor(e,t,i,s,r){super(e,t,i,s,r),this.type=5}_$AI(e,t=this){var i;if((e=(i=ee(this,e,t,0))!==null&&i!==void 0?i:m)===Q)return;const s=this._$AH,r=e===m&&s!==m||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,a=e!==m&&(s===m||r);r&&this.element.removeEventListener(this.name,this,s),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;typeof this._$AH=="function"?this._$AH.call((i=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&i!==void 0?i:this.element,e):this._$AH.handleEvent(e)}}class Di{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){ee(this,e)}}const Ot=ke.litHtmlPolyfillSupport;Ot==null||Ot(we,be),((ze=ke.litHtmlVersions)!==null&&ze!==void 0?ze:ke.litHtmlVersions=[]).push("2.8.0");const Fi=(n,e,t)=>{var i,s;const r=(i=t==null?void 0:t.renderBefore)!==null&&i!==void 0?i:e;let a=r._$litPart$;if(a===void 0){const o=(s=t==null?void 0:t.renderBefore)!==null&&s!==void 0?s:null;r._$litPart$=a=new be(e.insertBefore(me(),o),o,void 0,t!=null?t:{})}return a._$AI(n),a};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var qe,We;class le extends G{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const i=super.createRenderRoot();return(e=(t=this.renderOptions).renderBefore)!==null&&e!==void 0||(t.renderBefore=i.firstChild),i}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Fi(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return Q}}le.finalized=!0,le._$litElement$=!0,(qe=globalThis.litElementHydrateSupport)===null||qe===void 0||qe.call(globalThis,{LitElement:le});const It=globalThis.litElementPolyfillSupport;It==null||It({LitElement:le});((We=globalThis.litElementVersions)!==null&&We!==void 0?We:globalThis.litElementVersions=[]).push("3.3.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Bi=n=>e=>typeof e=="function"?((t,i)=>(customElements.define(t,i),i))(n,e):((t,i)=>{const{kind:s,elements:r}=i;return{kind:s,elements:r,finisher(a){customElements.define(t,a)}}})(n,e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ji=(n,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(t){t.createProperty(e.key,n)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(t){t.createProperty(e.key,n)}},zi=(n,e,t)=>{e.constructor.createProperty(t,n)};function Vi(n){return(e,t)=>t!==void 0?zi(n,e,t):ji(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function P(n){return Vi({...n,state:!0})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const qi=({finisher:n,descriptor:e})=>(t,i)=>{var s;if(i===void 0){const r=(s=t.originalKey)!==null&&s!==void 0?s:t.key,a=e!=null?{kind:"method",placement:"prototype",key:r,descriptor:e(t.key)}:{...t,key:r};return n!=null&&(a.finisher=function(o){n(o,r)}),a}{const r=t.constructor;e!==void 0&&Object.defineProperty(t,i,e(i)),n==null||n(r,i)}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function H(n,e){return qi({descriptor:t=>{const i={get(){var s,r;return(r=(s=this.renderRoot)===null||s===void 0?void 0:s.querySelector(n))!==null&&r!==void 0?r:null},enumerable:!0,configurable:!0};if(e){const s=typeof t=="symbol"?Symbol():"__"+t;i.get=function(){var r,a;return this[s]===void 0&&(this[s]=(a=(r=this.renderRoot)===null||r===void 0?void 0:r.querySelector(n))!==null&&a!==void 0?a:null),this[s]}}return i}})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Je;((Je=window.HTMLSlotElement)===null||Je===void 0?void 0:Je.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function*Wi(n,e){if(n!==void 0){let t=0;for(const i of n)yield e(i,t++)}}function c(n){let e,t,i;return typeof n=="object"?(e=n.hashFunction,t=n.expiring,i=n.tags):e=n,(s,r,a)=>{if(a.value!=null)a.value=Lt(a.value,e,t,i);else if(a.get!=null)a.get=Lt(a.get,e,t,i);else throw"Only put a Memoize() decorator on a method or get accessor."}}const Ge=new Map;function Lt(n,e,t=0,i){const s=Symbol("__memoized_map__");return function(...r){let a;this.hasOwnProperty(s)||Object.defineProperty(this,s,{configurable:!1,enumerable:!1,writable:!1,value:new Map});let o=this[s];if(Array.isArray(i))for(const l of i)Ge.has(l)?Ge.get(l).push(o):Ge.set(l,[o]);if(e||r.length>0||t>0){let l;e===!0?l=r.map(h=>h.toString()).join("!"):e?l=e.apply(this,r):l=r[0];const u=`${l}__timestamp`;let p=!1;if(t>0)if(!o.has(u))p=!0;else{let h=o.get(u);p=Date.now()-h>t}o.has(l)&&!p?a=o.get(l):(a=n.apply(this,r),o.set(l,a),t>0&&o.set(u,Date.now()))}else{const l=this;o.has(l)?a=o.get(l):(a=n.apply(this,r),o.set(l,a))}return a}}var oe;(function(n){n[n.COUNT=0]="COUNT",n[n.ALPHABETICAL=1]="ALPHABETICAL",n[n.NUMERIC=2]="NUMERIC"})(oe||(oe={}));class si{constructor(e){this.buckets=e.buckets,this.doc_count_error_upper_bound=e.doc_count_error_upper_bound,this.sum_other_doc_count=e.sum_other_doc_count,this.first_bucket_key=e.first_bucket_key,this.last_bucket_key=e.last_bucket_key,this.number_buckets=e.number_buckets,this.interval=e.interval}getSortedBuckets(e){const t=[...this.buckets];if(this.isRawNumberBuckets(t))return t;const i=new Intl.Collator;switch(e){case oe.ALPHABETICAL:return t.sort((s,r)=>i.compare(s.key.toString(),r.key.toString()));case oe.NUMERIC:return t.sort((s,r)=>Number(r.key)-Number(s.key));case oe.COUNT:default:return t}}isRawNumberBuckets(e){return typeof this.buckets[0]=="number"}}d([c()],si.prototype,"getSortedBuckets",null);class et{parseValue(e){return typeof e=="string"&&(e==="false"||e==="0")?!1:Boolean(e)}}et.shared=new et;class Ce{parseValue(e){if(typeof e=="number")return e;if(typeof e=="boolean")return;const t=parseFloat(e);if(!Number.isNaN(t))return t}}Ce.shared=new Ce;class tt{parseValue(e){return Ce.shared.parseValue(e)}}tt.shared=new tt;class it{parseValue(e){return this.parseJSDate(e)||this.parseBracketDate(e)}parseBracketDate(e){if(typeof e!="string")return;const t=e.match(/\[([0-9]{4})\]/);if(!(!t||t.length<2))return this.parseJSDate(t[1])}parseJSDate(e){if(typeof e!="string")return;let t=e;t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}\s{1}[0-9]{2}:[0-9]{2}:[0-9]{2}$/)&&(t=t.replace(" ","T"));const i=Date.parse(t);if(Number.isNaN(i))return;let s=new Date(t);return(t.indexOf("Z")>-1||t.indexOf("+")>-1||t.match(/^[0-9]{4}$/)||t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/)||t.match(/^.*?-[0-9]{2}:[0-9]{2}$/)||t.match(/^.*?-[0-9]{4}$/))&&(s=new Date(s.getTime()+s.getTimezoneOffset()*1e3*60)),s}}it.shared=new it;class st{parseValue(e){if(typeof e=="number")return e;if(typeof e=="boolean")return;const t=e.split(":");let i;return t.length===1?i=this.parseNumberFormat(t[0]):i=this.parseColonSeparatedFormat(t),i}parseNumberFormat(e){let t=parseFloat(e);return Number.isNaN(t)&&(t=void 0),t}parseColonSeparatedFormat(e){let t=!1;const i=e.map((s,r)=>{const a=parseFloat(s);if(Number.isNaN(a))return t=!0,0;const o=e.length-1-r,l=60**o;return a*Math.floor(l)}).reduce((s,r)=>s+r,0);return t?void 0:i}}st.shared=new st;class rt{parseValue(e){if(typeof e=="string")return e}}rt.shared=new rt;class Ji{constructor(e,t){this.separators=[";",","],this.parser=e,t&&t.separators&&(this.separators=t.separators)}parseValue(e){const t=String(e);let i=[];for(const s of this.separators)if(i=t.split(s),i.length>1)break;return this.parseListValues(i)}parseListValues(e){const i=e.map(r=>r.trim()).map(r=>this.parser.parseValue(r)),s=[];return i.forEach(r=>{r!==void 0&&s.push(r)}),s}}class nt{parseValue(e){if(typeof e=="string")return e}}nt.shared=new nt;class Ne{parseValue(e){return String(e)}}Ne.shared=new Ne;class N{get values(){return this.parseRawValue()}get value(){return this.values[0]}constructor(e,t){this.parser=e,this.rawValue=t}parseRawValue(){const e=Array.isArray(this.rawValue)?this.rawValue:[this.rawValue],t=[];return e.forEach(i=>{const s=this.parser.parseValue(i);Array.isArray(s)?t.push(...s):s!==void 0&&t.push(s)}),t}}d([c()],N.prototype,"values",null);d([c()],N.prototype,"value",null);class de extends N{constructor(e){super(et.shared,e)}}class x extends N{constructor(e){super(it.shared,e)}}class Ze extends N{constructor(e){super(st.shared,e)}}class M extends N{constructor(e){super(Ce.shared,e)}}class v extends N{constructor(e){super(Ne.shared,e)}}class Gi extends N{constructor(e){super(nt.shared,e)}}class Dt extends N{constructor(e){super(tt.shared,e)}}class ri extends N{constructor(e){super(rt.shared,e)}}class Zi extends N{constructor(e,t){super(t,e)}}class Ki extends Zi{constructor(e){const t=new Ji(Ne.shared);super(e,t)}}class f{get identifier(){return this.rawMetadata.identifier}get addeddate(){return this.rawMetadata.addeddate!=null?new x(this.rawMetadata.addeddate):void 0}get audio_codec(){return this.rawMetadata.audio_codec!=null?new v(this.rawMetadata.audio_codec):void 0}get audio_sample_rate(){return this.rawMetadata.audio_sample_rate!=null?new M(this.rawMetadata.audio_sample_rate):void 0}get avg_rating(){return this.rawMetadata.avg_rating!=null?new M(this.rawMetadata.avg_rating):void 0}get collection(){return this.rawMetadata.collection!=null?new v(this.rawMetadata.collection):void 0}get collections_raw(){return this.rawMetadata.collections_raw!=null?new v(this.rawMetadata.collections_raw):void 0}get collection_size(){return this.rawMetadata.collection_size!=null?new Dt(this.rawMetadata.collection_size):void 0}get contributor(){return this.rawMetadata.contributor!=null?new v(this.rawMetadata.contributor):void 0}get coverage(){return this.rawMetadata.coverage!=null?new v(this.rawMetadata.coverage):void 0}get creator(){return this.rawMetadata.creator!=null?new v(this.rawMetadata.creator):void 0}get collection_layout(){return this.rawMetadata.collection_layout!=null?new v(this.rawMetadata.collection_layout):void 0}get date(){return this.rawMetadata.date!=null?new x(this.rawMetadata.date):void 0}get description(){return this.rawMetadata.description!=null?new v(this.rawMetadata.description):void 0}get downloads(){return this.rawMetadata.downloads!=null?new M(this.rawMetadata.downloads):void 0}get duration(){return this.rawMetadata.duration!=null?new Ze(this.rawMetadata.duration):void 0}get external_identifier(){return this.rawMetadata["external-identifier"]!=null?new v(this.rawMetadata["external-identifier"]):void 0}get files_count(){return this.rawMetadata.files_count!=null?new M(this.rawMetadata.files_count):void 0}get indexdate(){return this.rawMetadata.indexdate!=null?new x(this.rawMetadata.indexdate):void 0}get isbn(){return this.rawMetadata.isbn!=null?new v(this.rawMetadata.isbn):void 0}get issue(){return this.rawMetadata.issue!=null?new v(this.rawMetadata.issue):void 0}get item_count(){return this.rawMetadata.item_count!=null?new M(this.rawMetadata.item_count):void 0}get item_size(){return this.rawMetadata.item_size!=null?new Dt(this.rawMetadata.item_size):void 0}get language(){return this.rawMetadata.language!=null?new v(this.rawMetadata.language):void 0}get length(){return this.rawMetadata.length!=null?new Ze(this.rawMetadata.length):void 0}get lineage(){return this.rawMetadata.lineage!=null?new v(this.rawMetadata.lineage):void 0}get month(){return this.rawMetadata.month!=null?new M(this.rawMetadata.month):void 0}get mediatype(){return this.rawMetadata.mediatype!=null?new ri(this.rawMetadata.mediatype):void 0}get noindex(){return this.rawMetadata.noindex!=null?new de(this.rawMetadata.noindex):void 0}get notes(){return this.rawMetadata.notes!=null?new v(this.rawMetadata.notes):void 0}get num_favorites(){return this.rawMetadata.num_favorites!=null?new M(this.rawMetadata.num_favorites):void 0}get num_reviews(){return this.rawMetadata.num_reviews!=null?new M(this.rawMetadata.num_reviews):void 0}get openlibrary_edition(){return this.rawMetadata.openlibrary_edition!=null?new v(this.rawMetadata.openlibrary_edition):void 0}get openlibrary_work(){return this.rawMetadata.openlibrary_work!=null?new v(this.rawMetadata.openlibrary_work):void 0}get page_progression(){return this.rawMetadata.page_progression!=null?new Gi(this.rawMetadata.page_progression):void 0}get partner(){return this.rawMetadata.partner!=null?new v(this.rawMetadata.partner):void 0}get ppi(){return this.rawMetadata.ppi!=null?new M(this.rawMetadata.ppi):void 0}get publicdate(){return this.rawMetadata.publicdate!=null?new x(this.rawMetadata.publicdate):void 0}get publisher(){return this.rawMetadata.publisher!=null?new v(this.rawMetadata.publisher):void 0}get reviewdate(){return this.rawMetadata.reviewdate!=null?new x(this.rawMetadata.reviewdate):void 0}get runtime(){return this.rawMetadata.runtime!=null?new Ze(this.rawMetadata.runtime):void 0}get scanner(){return this.rawMetadata.scanner!=null?new v(this.rawMetadata.scanner):void 0}get source(){return this.rawMetadata.source!=null?new v(this.rawMetadata.source):void 0}get start_localtime(){return this.rawMetadata.start_localtime!=null?new x(this.rawMetadata.start_localtime):void 0}get start_time(){return this.rawMetadata.start_time!=null?new x(this.rawMetadata.start_time):void 0}get stop_time(){return this.rawMetadata.stop_time!=null?new x(this.rawMetadata.stop_time):void 0}get subject(){return this.rawMetadata.subject!=null?new Ki(this.rawMetadata.subject):void 0}get taper(){return this.rawMetadata.taper!=null?new v(this.rawMetadata.taper):void 0}get title(){return this.rawMetadata.title!=null?new v(this.rawMetadata.title):void 0}get transferer(){return this.rawMetadata.transferer!=null?new v(this.rawMetadata.transferer):void 0}get track(){return this.rawMetadata.track!=null?new M(this.rawMetadata.track):void 0}get type(){return this.rawMetadata.type!=null?new v(this.rawMetadata.type):void 0}get uploader(){return this.rawMetadata.uploader!=null?new v(this.rawMetadata.uploader):void 0}get utc_offset(){return this.rawMetadata.utc_offset!=null?new M(this.rawMetadata.utc_offset):void 0}get venue(){return this.rawMetadata.venue!=null?new v(this.rawMetadata.venue):void 0}get volume(){return this.rawMetadata.volume!=null?new v(this.rawMetadata.volume):void 0}get week(){return this.rawMetadata.week!=null?new M(this.rawMetadata.week):void 0}get year(){return this.rawMetadata.year!=null?new M(this.rawMetadata.year):void 0}constructor(e={}){this.rawMetadata=e}}d([c()],f.prototype,"addeddate",null);d([c()],f.prototype,"audio_codec",null);d([c()],f.prototype,"audio_sample_rate",null);d([c()],f.prototype,"avg_rating",null);d([c()],f.prototype,"collection",null);d([c()],f.prototype,"collections_raw",null);d([c()],f.prototype,"collection_size",null);d([c()],f.prototype,"contributor",null);d([c()],f.prototype,"coverage",null);d([c()],f.prototype,"creator",null);d([c()],f.prototype,"collection_layout",null);d([c()],f.prototype,"date",null);d([c()],f.prototype,"description",null);d([c()],f.prototype,"downloads",null);d([c()],f.prototype,"duration",null);d([c()],f.prototype,"external_identifier",null);d([c()],f.prototype,"files_count",null);d([c()],f.prototype,"indexdate",null);d([c()],f.prototype,"isbn",null);d([c()],f.prototype,"issue",null);d([c()],f.prototype,"item_count",null);d([c()],f.prototype,"item_size",null);d([c()],f.prototype,"language",null);d([c()],f.prototype,"length",null);d([c()],f.prototype,"lineage",null);d([c()],f.prototype,"month",null);d([c()],f.prototype,"mediatype",null);d([c()],f.prototype,"noindex",null);d([c()],f.prototype,"notes",null);d([c()],f.prototype,"num_favorites",null);d([c()],f.prototype,"num_reviews",null);d([c()],f.prototype,"openlibrary_edition",null);d([c()],f.prototype,"openlibrary_work",null);d([c()],f.prototype,"page_progression",null);d([c()],f.prototype,"partner",null);d([c()],f.prototype,"ppi",null);d([c()],f.prototype,"publicdate",null);d([c()],f.prototype,"publisher",null);d([c()],f.prototype,"reviewdate",null);d([c()],f.prototype,"runtime",null);d([c()],f.prototype,"scanner",null);d([c()],f.prototype,"source",null);d([c()],f.prototype,"start_localtime",null);d([c()],f.prototype,"start_time",null);d([c()],f.prototype,"stop_time",null);d([c()],f.prototype,"subject",null);d([c()],f.prototype,"taper",null);d([c()],f.prototype,"title",null);d([c()],f.prototype,"transferer",null);d([c()],f.prototype,"track",null);d([c()],f.prototype,"type",null);d([c()],f.prototype,"uploader",null);d([c()],f.prototype,"utc_offset",null);d([c()],f.prototype,"venue",null);d([c()],f.prototype,"volume",null);d([c()],f.prototype,"week",null);d([c()],f.prototype,"year",null);class E extends f{get created_on(){return this.rawMetadata.created_on!=null?new x(this.rawMetadata.created_on):void 0}get file_creation_mtime(){return this.rawMetadata.file_creation_mtime!=null?new M(this.rawMetadata.file_creation_mtime):void 0}get filename(){return this.rawMetadata.filename!=null?new v(this.rawMetadata.filename):void 0}get file_basename(){return this.rawMetadata.file_basename!=null?new v(this.rawMetadata.file_basename):void 0}get result_in_subfile(){return this.rawMetadata.result_in_subfile!=null?new de(this.rawMetadata.result_in_subfile):void 0}get query(){return this.rawMetadata.query!=null?new v(this.rawMetadata.query):void 0}get date_favorited(){return this.rawMetadata.date_favorited!=null?new x(this.rawMetadata.date_favorited):void 0}get updated_on(){return this.rawMetadata.updated_on!=null?new x(this.rawMetadata.updated_on):void 0}get num_clips(){return this.rawMetadata.nclips!=null?new M(this.rawMetadata.nclips):void 0}get __href__(){return this.rawMetadata.__href__!=null?new v(this.rawMetadata.__href__):void 0}get __img__(){return this.rawMetadata.__img__!=null?new v(this.rawMetadata.__img__):void 0}}d([c()],E.prototype,"created_on",null);d([c()],E.prototype,"file_creation_mtime",null);d([c()],E.prototype,"filename",null);d([c()],E.prototype,"file_basename",null);d([c()],E.prototype,"result_in_subfile",null);d([c()],E.prototype,"query",null);d([c()],E.prototype,"date_favorited",null);d([c()],E.prototype,"updated_on",null);d([c()],E.prototype,"num_clips",null);d([c()],E.prototype,"__href__",null);d([c()],E.prototype,"__img__",null);class C{constructor(e){var t;this.rawMetadata=e,this.fields=new E((t=e.fields)!==null&&t!==void 0?t:{})}get identifier(){return this.fields.identifier}get addeddate(){return this.fields.addeddate}get avg_rating(){return this.fields.avg_rating}get collection(){return this.fields.collection}get collection_files_count(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.collection_files_count)!=null?new M(this.rawMetadata.fields.collection_files_count):void 0}get collection_size(){return this.fields.collection_size}get creator(){return this.fields.creator}get date(){return this.fields.date}get description(){return this.fields.description}get downloads(){return this.fields.downloads}get files_count(){return this.fields.files_count}get genre(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.genre)!=null?new v(this.rawMetadata.fields.genre):void 0}get indexflag(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.indexflag)!=null?new v(this.rawMetadata.fields.indexflag):void 0}get issue(){return this.fields.issue}get item_count(){return this.fields.item_count}get item_size(){return this.fields.item_size}get language(){return this.fields.language}get lending___available_to_borrow(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.lending___available_to_borrow)!=null?new de(this.rawMetadata.fields.lending___available_to_borrow):void 0}get lending___available_to_browse(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.lending___available_to_browse)!=null?new de(this.rawMetadata.fields.lending___available_to_browse):void 0}get lending___available_to_waitlist(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.lending___available_to_waitlist)!=null?new de(this.rawMetadata.fields.lending___available_to_waitlist):void 0}get lending___status(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.lending___status)!=null?new v(this.rawMetadata.fields.lending___status):void 0}get licenseurl(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.licenseurl)!=null?new v(this.rawMetadata.fields.licenseurl):void 0}get mediatype(){return this.fields.mediatype}get month(){return this.fields.month}get noindex(){return this.fields.noindex}get num_favorites(){return this.fields.num_favorites}get num_reviews(){return this.fields.num_reviews}get publicdate(){return this.fields.publicdate}get reviewdate(){return this.fields.reviewdate}get review(){const e=this.rawMetadata.review;return e?{body:e.reviewbody,title:e.reviewtitle,author:e.reviewer,authorItem:e.reviewer_itemname,updatedate:new Date(e.reviewdate),createdate:new Date(e.createdate),stars:Number(e.stars)||0,__href__:e.__href__}:void 0}get source(){return this.fields.source}get subject(){return this.fields.subject}get title(){return this.fields.title}get type(){return this.fields.type}get volume(){return this.fields.volume}get week(){return this.fields.week}get year(){return this.fields.year}}d([c()],C.prototype,"collection_files_count",null);d([c()],C.prototype,"genre",null);d([c()],C.prototype,"indexflag",null);d([c()],C.prototype,"lending___available_to_borrow",null);d([c()],C.prototype,"lending___available_to_browse",null);d([c()],C.prototype,"lending___available_to_waitlist",null);d([c()],C.prototype,"lending___status",null);d([c()],C.prototype,"licenseurl",null);d([c()],C.prototype,"review",null);class dt{constructor(e){var t;this.rawMetadata=e,this.fields=new E((t=e.fields)!==null&&t!==void 0?t:{})}get identifier(){return this.fields.identifier}get highlight(){var e;return!((e=this.rawMetadata.highlight)===null||e===void 0)&&e.text?new v(this.rawMetadata.highlight.text):void 0}get addeddate(){return this.fields.addeddate}get avg_rating(){return this.fields.avg_rating}get collection(){return this.fields.collection}get created_on(){return this.fields.created_on}get creator(){return this.fields.creator}get date(){return this.fields.date}get description(){return this.fields.description}get downloads(){return this.fields.downloads}get filename(){return this.fields.filename}get file_basename(){return this.fields.file_basename}get file_creation_mtime(){return this.fields.file_creation_mtime}get issue(){return this.fields.issue}get mediatype(){return this.fields.mediatype}get page_num(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.page_num)!=null?new M(this.rawMetadata.fields.page_num):void 0}get publicdate(){return this.fields.publicdate}get result_in_subfile(){return this.fields.result_in_subfile}get reviewdate(){return this.fields.reviewdate}get source(){return this.fields.source}get subject(){return this.fields.subject}get title(){return this.fields.title}get updated_on(){return this.fields.updated_on}get year(){return this.fields.year}get __href__(){return this.fields.__href__}}d([c()],dt.prototype,"highlight",null);d([c()],dt.prototype,"page_num",null);class Xi{constructor(e){var t;this.rawMetadata=e,this.fields=new E((t=e.fields)!==null&&t!==void 0?t:{})}get identifier(){var e;return(e=this.fields.query)===null||e===void 0?void 0:e.value}get title(){return this.fields.title}get query(){return this.fields.query}get date_favorited(){return this.fields.date_favorited}get __href__(){return this.fields.__href__}}class ut{constructor(e){var t;this.rawMetadata=e,this.fields=new E((t=e.fields)!==null&&t!==void 0?t:{})}get identifier(){var e;return(e=this.rawMetadata.fields)===null||e===void 0?void 0:e.url}get mediatype(){return new ri("web")}get title(){var e,t;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.url?new v((t=this.rawMetadata.fields)===null||t===void 0?void 0:t.url):void 0}get capture_dates(){var e,t;return!((e=this.rawMetadata.fields)===null||e===void 0)&&e.capture_dates?new x((t=this.rawMetadata.fields)===null||t===void 0?void 0:t.capture_dates):void 0}get __href__(){return this.fields.__href__}}d([c()],ut.prototype,"title",null);d([c()],ut.prototype,"capture_dates",null);class ht{constructor(e){var t;this.rawMetadata=e,this.fields=new E((t=e.fields)!==null&&t!==void 0?t:{})}get identifier(){return this.fields.identifier}get highlight(){var e;return!((e=this.rawMetadata.highlight)===null||e===void 0)&&e.text?new v(this.rawMetadata.highlight.text):void 0}get addeddate(){return this.fields.addeddate}get avg_rating(){return this.fields.avg_rating}get collection(){return this.fields.collection}get created_on(){return this.fields.created_on}get creator(){return this.fields.creator}get date(){return this.fields.date}get description(){return this.fields.description}get downloads(){return this.fields.downloads}get filename(){return this.fields.filename}get file_basename(){return this.fields.file_basename}get file_creation_mtime(){return this.fields.file_creation_mtime}get issue(){return this.fields.issue}get mediatype(){return this.fields.mediatype}get num_clips(){return this.fields.num_clips}get publicdate(){return this.fields.publicdate}get result_in_subfile(){return this.fields.result_in_subfile}get reviewdate(){return this.fields.reviewdate}get source(){return this.fields.source}get subject(){return this.fields.subject}get title(){return this.fields.title}get updated_on(){return this.fields.updated_on}get year(){return this.fields.year}get start(){var e;return((e=this.rawMetadata.fields)===null||e===void 0?void 0:e.start)!=null?new v(this.rawMetadata.fields.start):void 0}get __href__(){return this.fields.__href__}get __img__(){return this.fields.__img__}}d([c()],ht.prototype,"highlight",null);d([c()],ht.prototype,"start",null);const Yi=["loans","waitlist","loan_history"];function Qi(n){const e=n.slice(0,4),t=n.slice(4,6),i=n.slice(6,8),s=n.slice(8,10),r=n.slice(10,12),a=n.slice(12,14);return`${e}-${t}-${i}T${s}:${r}:${a}Z`}function es(n){var e;const t=[];for(const i of n){if(!(!((e=i.captures)===null||e===void 0)&&e.length))continue;const s=encodeURIComponent(i.url),r=`https://web.archive.org/web/${i.captures[0]}/${s}`;t.push({hit_type:"web_archive",fields:{url:i.url,capture_dates:i.captures.map(a=>Qi(a)),__href__:r}})}return t}class ct{constructor(e,t){var i,s,r,a,o,l,u,p,h,g,_,S,A,Ue;this.schema=t,this.schemaHitType=t==null?void 0:t.hit_type;let k;e!=null&&e.page_elements&&(this.pageElements=e.page_elements,k=Object.values(this.pageElements)[0]);let R=(i=e==null?void 0:e.hits)===null||i===void 0?void 0:i.hits;this.totalResults=(r=(s=e==null?void 0:e.hits)===null||s===void 0?void 0:s.total)!==null&&r!==void 0?r:0,this.returnedCount=(o=(a=e==null?void 0:e.hits)===null||a===void 0?void 0:a.returned)!==null&&o!==void 0?o:0,!(R!=null&&R.length)&&((l=this.pageElements)===null||l===void 0?void 0:l.service___fts)?(this.totalResults=0,this.returnedCount=0,this.handleFederatedPageElements()):!(R!=null&&R.length)&&((u=k==null?void 0:k.hits)===null||u===void 0?void 0:u.hits)?(R=k.hits.hits,this.totalResults=(p=k.hits.total)!==null&&p!==void 0?p:0,this.returnedCount=(h=k.hits.returned)!==null&&h!==void 0?h:0):!((g=this.pageElements)===null||g===void 0)&&g.lending?R=this.handleLendingPageElement():!((_=this.pageElements)===null||_===void 0)&&_.web_archives&&(R=this.handleWebArchivesPageElement()),this.results=this.formatHits(R);let Oe=e==null?void 0:e.aggregations;!(this.aggregations&&Object.keys(this.aggregations).length>0)&&(k==null?void 0:k.aggregations)&&(Oe=k.aggregations),Oe&&this.buildAggregations(Oe),e!=null&&e.collection_titles&&(this.collectionTitles=(S=e.collection_titles)!==null&&S!==void 0?S:{}),e!=null&&e.collection_extra_info&&(this.collectionExtraInfo=(A=e.collection_extra_info)!==null&&A!==void 0?A:null),e!=null&&e.account_extra_info&&(this.accountExtraInfo=(Ue=e.account_extra_info)!==null&&Ue!==void 0?Ue:null)}formatHits(e){var t;return(t=e==null?void 0:e.map(i=>{var s;return ct.createResult((s=i.hit_type)!==null&&s!==void 0?s:this.schemaHitType,i)}))!==null&&t!==void 0?t:[]}buildAggregations(e){this.aggregations=Object.entries(e).reduce((t,[i,s])=>(t[i]=new si(s),t),{})}handleLendingPageElement(){var e,t;const i=(e=this.pageElements)===null||e===void 0?void 0:e.lending,s=(t=i.loans)!==null&&t!==void 0?t:[];this.totalResults=s.length,this.returnedCount=this.totalResults;for(const r of Yi)i[r]=this.formatHits(i[r]);return s}handleWebArchivesPageElement(){var e;const t=es((e=this.pageElements)===null||e===void 0?void 0:e.web_archives);return this.totalResults=t.length,this.returnedCount=this.totalResults,t}handleFederatedPageElements(){var e,t,i,s;const r=["service___fts","service___tvs","service___rcs","service___whisper","metadata___mediatype___texts","metadata___mediatype___movies","metadata___mediatype___audio","metadata___mediatype___software","metadata___mediatype___image","metadata___mediatype___etree"];for(const a of r){const o=this.removePageElementPrefix(a);this.federatedResults?this.federatedResults[a]=[]:this.federatedResults={[o]:[]};const l=(t=(e=this.pageElements)===null||e===void 0?void 0:e[a])===null||t===void 0?void 0:t.hits;l!=null&&l.hits&&(this.federatedResults[o]=this.formatHits(l==null?void 0:l.hits)),this.totalResults+=(i=l==null?void 0:l.total)!==null&&i!==void 0?i:0,this.returnedCount+=(s=l==null?void 0:l.returned)!==null&&s!==void 0?s:0}}removePageElementPrefix(e){return e.split("___").pop()}static createResult(e,t){switch(e){case"item":return new C(t);case"text":case"asr_text":return new dt(t);case"favorited_search":return new Xi(t);case"web_archive":return new ut(t);case"tv_clip":return new ht(t);default:return new C(t)}}}class ts{constructor(e){this.clientParameters=e.client_parameters,this.backendRequests=e.backend_requests,this.kind=e.kind}}class is{constructor(e){var t,i,s;this.rawResponse=e,this.request=new ts(e.request),this.responseHeader=(t=e.response)===null||t===void 0?void 0:t.header,this.sessionContext=e.session_context,this.response=new ct((i=e.response)===null||i===void 0?void 0:i.body,(s=e.response)===null||s===void 0?void 0:s.hit_schema)}}var T;(function(n){n[n.DEFAULT=0]="DEFAULT",n[n.METADATA=1]="METADATA",n[n.FULLTEXT=2]="FULLTEXT",n[n.TV=3]="TV",n[n.RADIO=4]="RADIO",n[n.FEDERATED=5]="FEDERATED"})(T||(T={}));class L{static aggregateSearchParamsAsString(e){if(e.omit)return"false";if(e.advancedParams){const t=e.advancedParams.map(s=>({terms:s}));return JSON.stringify(t)}if(e.simpleParams)return e.simpleParams.join(",")}static sortParamsAsString(e){return`${e.field}:${e.direction}`}static filterParamsAsString(e){return JSON.stringify(e)}static generateURLSearchParams(e){const t=new URLSearchParams;if(t.append("user_query",e.query),e.pageType&&t.append("page_type",String(e.pageType)),e.pageTarget&&t.append("page_target",String(e.pageTarget)),e.pageElements&&e.pageElements.length>0){const r=`[${e.pageElements.map(a=>`"${a}"`).join(",")}]`;t.append("page_elements",r)}if(e.rows!=null&&t.append("hits_per_page",String(e.rows)),e.page!=null&&t.append("page",String(e.page)),e.fields&&e.fields.length>0&&t.append("fields",e.fields.join(",")),e.filters&&Object.keys(e.filters).length>0){const s=this.filterParamsAsString(e.filters);s&&s!=="{}"&&t.append("filter_map",s)}if(e.sort&&e.sort.length>0){const s=e.sort.map(r=>this.sortParamsAsString(r));t.append("sort",s.join(","))}const i=e.aggregations;if(i){const s=this.aggregateSearchParamsAsString(i);s&&t.append("aggregations",s)}if(e.aggregationsSize!=null&&t.append("aggregations_size",String(e.aggregationsSize)),e.debugging&&t.append("debugging","true"),e.uid&&t.append("uid",e.uid),e.includeClientUrl!==!1){const s=window.location.href.slice(0,400);e.query.length<=1e3&&t.append("client_url",s)}return t}}var ue;(function(n){n.networkError="SearchService.NetworkError",n.itemNotFound="SearchService.ItemNotFound",n.decodingError="SearchService.DecodingError",n.searchEngineError="SearchService.SearchEngineError"})(ue||(ue={}));class ss extends Error{constructor(e,t,i){super(t),this.name=e,this.type=e,this.details=i}}const Ft={reCache:JSON.stringify({recompute:!0}),noCache:JSON.stringify({bypass:!0}),dontCache:JSON.stringify({no_compute:!0})};class ie{constructor(e){var t,i;this.baseUrl=(t=e==null?void 0:e.baseUrl)!==null&&t!==void 0?t:"archive.org",(e==null?void 0:e.includeCredentials)!==void 0?this.includeCredentials=e.includeCredentials:this.includeCredentials=window.location.href.match(/^https?:\/\/.*archive\.org(:[0-9]+)?/)!==null;const s=new URL(window.location.href).searchParams,r=s.get("scope"),a=s.get("verbose"),o=s.get("debugging"),l=s.get("cacheDebug");let u="";for(const p of Object.keys(Ft))if(s.get(p)){u=Ft[p];break}u=(i=s.get("caching"))!==null&&i!==void 0?i:u,(e==null?void 0:e.caching)!==void 0?this.cachingFlags=e.caching:u&&(this.cachingFlags=u),(e==null?void 0:e.debuggingEnabled)!==void 0?this.debuggingEnabled=e.debuggingEnabled:(o||l)&&(this.debuggingEnabled=!0),(e==null?void 0:e.scope)!==void 0?this.requestScope=e.scope:r&&(this.requestScope=r),(e==null?void 0:e.verbose)!==void 0?this.verbose=e.verbose:a&&(this.verbose=!!a)}async fetchUrl(e,t){var i,s;const r=new URL(e);this.requestScope&&r.searchParams.set("scope",this.requestScope),this.cachingFlags&&r.searchParams.set("caching",this.cachingFlags);let a;try{const o=(i=t==null?void 0:t.requestOptions)!==null&&i!==void 0?i:{credentials:this.includeCredentials?"include":"same-origin"};a=await fetch(r.href,o)}catch(o){const l=o instanceof Error?o.message:typeof o=="string"?o:"Unknown error";return this.getErrorResult(ue.networkError,l)}try{const o=await a.json();this.verbose&&this.printResponse(o),o.debugging&&this.printDebuggingInfo(o);const l=(s=o.response)===null||s===void 0?void 0:s.error;return l?this.getErrorResult(ue.searchEngineError,l.message,l.forensics):{success:o}}catch(o){const l=o instanceof Error?o.message:typeof o=="string"?o:"Unknown error";return this.getErrorResult(ue.decodingError,l)}}getErrorResult(e,t,i){return{error:new ss(e,t,i)}}printResponse(e){var t,i,s,r,a;try{const o=JSON.parse(JSON.stringify(e)),l=(s=(i=(t=o==null?void 0:o.response)===null||t===void 0?void 0:t.body)===null||i===void 0?void 0:i.hits)===null||s===void 0?void 0:s.hits;if(Array.isArray(l)&&l.length>1){const p=[];p.push(l[0]),p.push(`*** ${l.length-1} hits omitted ***`),o.response.body.hits.hits=p}const u=(a=(r=o==null?void 0:o.response)===null||r===void 0?void 0:r.body)===null||a===void 0?void 0:a.aggregations;u&&Object.entries(u).forEach(([p,h])=>{var g,_,S;if(((g=h==null?void 0:h.buckets)===null||g===void 0?void 0:g.length)>0){const A=JSON.parse(JSON.stringify(h));A.buckets=`*** ${(S=(_=A.buckets)===null||_===void 0?void 0:_.length)!==null&&S!==void 0?S:0} buckets omitted ***`,o.response.body.aggregations[p]=A}}),console.log("***** RESPONSE RECEIVED *****"),console.groupCollapsed("Response"),console.log(JSON.stringify(o,null,2)),console.groupEnd()}catch(o){console.error("Error printing search response:",o)}}printDebuggingInfo(e){var t,i;const s=e.debugging,r=(t=s.messages)!==null&&t!==void 0?t:[],a=(i=s.data)!==null&&i!==void 0?i:{};console.log("***** BEGIN DEBUGGING *****"),console.log("Full response:"),console.log(JSON.stringify(e,null,2)),console.group("Debug messages");for(const o of r)console.log(o);console.groupEnd(),console.group("Debug data");for(const[o,l]of Object.entries(a))console.log(o,l);console.groupEnd(),console.log("***** END DEBUGGING *****")}}class rs extends ie{constructor(e){var t;super(e),this.servicePath=(t=e==null?void 0:e.servicePath)!==null&&t!==void 0?t:"/services/search/beta/page_production"}async performSearch(e){this.debuggingEnabled&&e.debugging===void 0&&(e.debugging=!0);const i=L.generateURLSearchParams(e).toString(),s=`https://${this.baseUrl}${this.servicePath}/?service_backend=fts&${i}`;return this.fetchUrl(s)}}class ns extends ie{constructor(e){var t;super(e),this.servicePath=(t=e==null?void 0:e.servicePath)!==null&&t!==void 0?t:"/services/search/beta/page_production"}async performSearch(e){this.debuggingEnabled&&e.debugging===void 0&&(e.debugging=!0);const i=L.generateURLSearchParams(e).toString(),s=`https://${this.baseUrl}${this.servicePath}/?service_backend=metadata&${i}`;return this.fetchUrl(s)}}class as extends ie{constructor(e){var t;super(e),this.servicePath=(t=e==null?void 0:e.servicePath)!==null&&t!==void 0?t:"/services/search/beta/page_production"}async performSearch(e){this.debuggingEnabled&&e.debugging===void 0&&(e.debugging=!0);const i=L.generateURLSearchParams(e).toString(),s=`https://${this.baseUrl}${this.servicePath}/?service_backend=tvs&${i}`;return this.fetchUrl(s)}}class ls extends ie{constructor(e){var t;super(e),this.servicePath=(t=e==null?void 0:e.servicePath)!==null&&t!==void 0?t:"/services/search/beta/page_production"}async performSearch(e){this.debuggingEnabled&&e.debugging===void 0&&(e.debugging=!0);const i=L.generateURLSearchParams(e).toString(),s=`https://${this.baseUrl}${this.servicePath}/?service_backend=rcs&${i}`;return this.fetchUrl(s)}}class os extends ie{constructor(e){var t;super(e),this.servicePath=(t=e==null?void 0:e.servicePath)!==null&&t!==void 0?t:"/services/search/beta/page_production"}async performSearch(e){this.debuggingEnabled&&e.debugging===void 0&&(e.debugging=!0);const i=L.generateURLSearchParams(e).toString(),s=`https://${this.baseUrl}${this.servicePath}/?page_type=simple_federation&${i}`;return this.fetchUrl(s)}}class ds extends ie{constructor(e){var t;super(e),this.servicePath=(t=e==null?void 0:e.servicePath)!==null&&t!==void 0?t:"/services/search/beta/page_production"}async performSearch(e){this.debuggingEnabled&&e.debugging===void 0&&(e.debugging=!0);const i=L.generateURLSearchParams(e).toString(),s=`https://${this.baseUrl}${this.servicePath}/?${i}`;return this.fetchUrl(s)}}class te{constructor(e={}){this.backendOptions=e}async search(e,t=T.METADATA){const s=await te.getBackendForSearchType(t,this.backendOptions).performSearch(e);return s.error?s:{success:new is(s.success)}}static getBackendForSearchType(e,t={}){switch(e){case T.METADATA:return new ns(t);case T.FULLTEXT:return new rs(t);case T.RADIO:return new ls(t);case T.TV:return new as(t);case T.FEDERATED:return new os(t);default:return new ds(t)}}}te.default=new te;d([c((n,e={})=>{const{includeCredentials:t=!1,verbose:i=!1,scope:s="",baseUrl:r=""}=e;return`${n};${t};${i};${s};${r}`})],te,"getBackendForSearchType",null);class Bt{constructor(){this.filterMap={}}addFilter(e,t,i){if(this.filterMap[e]||(this.filterMap[e]={}),this.filterMap[e][t]){const s=[].concat(this.filterMap[e][t],i);this.filterMap[e][t]=Array.from(new Set(s))}else this.filterMap[e][t]=i;return this}removeSingleFilter(e,t,i){var s;if(!(!((s=this.filterMap[e])===null||s===void 0)&&s[t]))return this;const r=[].concat(this.filterMap[e][t]),a=r.indexOf(i);return a>=0&&r.splice(a,1),this.filterMap[e][t]=r.length===1?r[0]:r,r.length===0&&delete this.filterMap[e][t],this.deleteFieldIfEmpty(e),this}removeFilters(e,t){return this.filterMap[e]?(delete this.filterMap[e][t],this.deleteFieldIfEmpty(e),this):this}deleteFieldIfEmpty(e){const t=this.filterMap[e];t&&Object.keys(t).length===0&&delete this.filterMap[e]}setFilterMap(e){return this.filterMap={...e},this}mergeFilterMap(e){for(const[t,i]of Object.entries(e))for(const[s,r]of Object.entries(i))if(Array.isArray(r))for(const a of r)this.addFilter(t,s,a);else this.addFilter(t,s,r);return this}build(){return this.filterMap}}let $=class extends le{constructor(){super(...arguments),this.searchServiceUrlOptions=this.initSearchServiceUrlOptions(),this.filterMap={},this.loadingSearchResults=!1,this.loadingAggregations=!1,this.defaultAggregationsChecked=!0,this.fullSearchResultsShown=!1,this.searchService=new te(this.searchServiceUrlOptions)}get searchResults(){var e;return(e=this.searchResponse)===null||e===void 0?void 0:e.response.results}get searchAggregations(){var e;return(e=this.aggregationsResponse)===null||e===void 0?void 0:e.response.aggregations}initSearchServiceUrlOptions(){var e,t,i;const s=new URL(window.location.href).searchParams;return{baseUrl:(e=s.get("search_base_url"))!==null&&e!==void 0?e:"ia-petabox-ximm-pps-feature-include-favorited-searches.archive.org",servicePath:(t=s.get("search_service_path"))!==null&&t!==void 0?t:void 0,debuggingEnabled:(i=!!s.get("debugging"))!==null&&i!==void 0?i:void 0}}render(){var e;return w`
      <fieldset>
        <legend>Search options</legend>
        <form>
          <label for="search-input">Query: </label>
          <input
            type="text"
            id="search-input"
            placeholder="Search Term or identifier"
          />
          <input type="submit" value="Go" @click=${this.search} />

          <span class="input-with-label">
            <input type="checkbox" id="search-within-check" />
            <label for="search-input-check">Search within collection</label>
          </span>

          <span class="input-with-label">
            <input
              type="checkbox"
              id="debug-info-check"
              ?checked=${(e=this.searchServiceUrlOptions)===null||e===void 0?void 0:e.debuggingEnabled}
            />
            <label for="debug-info-check">Include debugging info</label>
          </span>

          <fieldset class="search-options">
            <legend>Search type:</legend>
            <span class="input-with-label">
              <input
                type="radio"
                id="mds"
                name="search-type"
                value="mds"
                checked
              />
              <label for="mds"> &nbsp;Metadata </label>
            </span>
            <span class="input-with-label">
              <input type="radio" id="fts" name="search-type" value="fts" />
              <label for="fts"> &nbsp;Full text </label>
            </span>
          </fieldset>

          <fieldset class="search-options">
            <legend>Search size:</legend>
            <div class="field-row">
              <label for="num-rows">Number of result rows:</label>
              <input type="number" id="num-rows" value="10" min="0" max="999" />
            </div>
            <div class="field-row">
              <label for="num-aggs">Number of aggregation buckets:</label>
              <input type="number" id="num-aggs" value="6" min="0" max="999" />
            </div>
          </fieldset>

          <fieldset class="search-options">
            <legend>Sort by title:</legend>
            <span class="input-with-label">
              <input
                type="radio"
                id="sort-none"
                name="sort"
                value="none"
                checked
              />
              <label for="sort-none"> &nbsp;None </label>
            </span>
            <span class="input-with-label">
              <input type="radio" id="sort-asc" name="sort" value="asc" />
              <label for="sort-asc"> &nbsp;Ascending </label>
            </span>
            <span class="input-with-label">
              <input type="radio" id="sort-desc" name="sort" value="desc" />
              <label for="sort-desc"> &nbsp;Descending </label>
            </span>
          </fieldset>

          <fieldset class="search-options">
            <legend>Filters:</legend>
            <select id="filter-field" @change=${this.filterFieldChanged}>
              <option value="mediatype">Mediatype</option>
              <option value="year" data-numeric="true">Year</option>
              <option value="subject">Subject</option>
              <option value="language">Language</option>
              <option value="creator">Creator</option>
              <option value="collection">Collection</option>
              <option value="lending___status">Lending status</option>
            </select>
            <select id="filter-constraint">
              <option value="inc">includes</option>
              <option value="exc">excludes</option>
              <option value="gt" data-numeric="true" hidden>&gt;</option>
              <option value="gte" data-numeric="true" hidden>&gt;=</option>
              <option value="lt" data-numeric="true" hidden>&lt;</option>
              <option value="lte" data-numeric="true" hidden>&lt;=</option>
            </select>
            <input type="text" id="filter-value" />
            <button type="button" @click=${this.addFilterClicked}>
              Add filter
            </button>
            <div id="applied-filters">${this.appliedFiltersTemplate}</div>
          </fieldset>

          <fieldset class="search-options">
            <legend>Include aggregations for:</legend>
            <span class="input-with-label">
              <input
                type="checkbox"
                id="aggs-default"
                checked
                @change=${this.toggleDefaultAggregations}
              />
              <label for="aggs-default">Default (all) </label>
            </span>
            ${this.aggregationCheckboxTemplate("mediatype","Mediatype")}
            ${this.aggregationCheckboxTemplate("year","Year")}
            ${this.aggregationCheckboxTemplate("subject","Subject")}
            ${this.aggregationCheckboxTemplate("language","Language")}
            ${this.aggregationCheckboxTemplate("creator","Creator")}
            ${this.aggregationCheckboxTemplate("collection","Collection")}
            ${this.aggregationCheckboxTemplate("lending___status","Lending")}
          </fieldset>
        </form>
      </fieldset>

      ${this.searchResults||this.loadingSearchResults?this.resultsTemplate:m}
    `}filterFieldChanged(e){var t,i;const r=!!e.target.selectedOptions[0].dataset.numeric,a=(i=(t=this.shadowRoot)===null||t===void 0?void 0:t.querySelectorAll("#filter-constraint option"))!==null&&i!==void 0?i:[];for(const o of a)o.toggleAttribute("hidden",!r&&!!o.dataset.numeric)}addFilterClicked(){const e=this.filterFieldInput.selectedOptions[0].value,t=this.filterValueInput.value,i=this.filterConstraintInput.selectedOptions[0].value;!e||!i||!t||(this.filterMap=new Bt().setFilterMap(this.filterMap).addFilter(e,t,i).build(),this.filterValueInput.value="")}removeFilterClicked(e){const t=e.target,{field:i,value:s,constraint:r}=t.dataset;i&&s&&r&&(this.filterMap=new Bt().setFilterMap(this.filterMap).removeSingleFilter(i,s,r).build())}get appliedFiltersTemplate(){const e=[];for(const[i,s]of Object.entries(this.filterMap))for(const[r,a]of Object.entries(s))if(Array.isArray(a))for(const o of a)e.push({field:i,value:r,constraint:o});else e.push({field:i,value:r,constraint:a});if(e.length===0)return w`<span>(no filters applied)</span>`;const t={inc:"includes",exc:"excludes",gt:">",gte:">=",lt:"<",lte:"<="};return Wi(e,({field:i,value:s,constraint:r})=>w`
        <span class="filter">
          <span class="filter-text"
            >'${i}' ${t[r]} '${s}'</span
          ><!--
       --><button
            type="button"
            class="remove-filter"
            data-field=${i}
            data-value=${s}
            data-constraint=${r}
            @click=${this.removeFilterClicked}
          >
            x
          </button>
        </span>
      `)}aggregationCheckboxTemplate(e,t){const i=`aggs-${e}`;return w`
      <span class="input-with-label">
        <input
          type="checkbox"
          id=${i}
          name="aggs"
          value=${e}
          checked
          ?disabled=${this.defaultAggregationsChecked}
        />
        <label for=${i}>${t} </label>
      </span>
    `}get resultsTemplate(){return w`
      <details>
        <summary>PPS URL params</summary>
        ${this.lastSearchParams?w`<div>
              Last search params:
              <pre class="params">${this.lastSearchParams}</pre>
            </div>`:m}
        ${this.lastAggregationParams?w`<div>
              Last aggregation params:
              <pre class="params">${this.lastAggregationParams}</pre>
            </div>`:m}
      </details>
      ${this.loadingSearchResults?w`<h3>Loading search results...</h3>`:[this.minimalSearchResultsTemplate,this.fullSearchResultsTemplate]}
      ${this.loadingAggregations?w`<h3>Loading aggregations...</h3>`:this.aggregationsTemplate}
    `}get minimalSearchResultsTemplate(){var e;return w`
      <h2>Search Results</h2>
      <table>
        <thead>
          <tr>
            <th>Identifier</th>
            <th>Title</th>
            ${this.snippetsHeaderTemplate}
          </tr>
        </thead>
        <tbody>
          ${(e=this.searchResults)===null||e===void 0?void 0:e.map(t=>{var i,s;return w`
              <tr>
                <td>${t.identifier}</td>
                <td>${(s=(i=t.title)===null||i===void 0?void 0:i.value)!==null&&s!==void 0?s:"(Untitled)"}</td>
                ${this.snippetTemplate(t)}
              </tr>
            `})}
        </tbody>
      </table>
    `}get fullSearchResultsTemplate(){return w`
      <button @click=${this.toggleFullSearchResults}>
        ${this.fullSearchResultsShown?"Hide":"Show"} all search results
      </button>
      ${this.fullSearchResultsShown?w`<pre>
          ${JSON.stringify(this.searchResults,null,2)}
        </pre
          >`:m}
    `}get aggregationsTemplate(){var e;return w`
      <div>
        <h2>Aggregations</h2>
        ${Object.entries((e=this.searchAggregations)!==null&&e!==void 0?e:{}).map(([t,i])=>w`
            <h3>${t}</h3>
            <p>
              ${i.buckets.map(s=>typeof s=="number"?s:`${s.key} (${s.doc_count})`).join(", ")}
            </p>
          `)}
      </div>
    `}get snippetsHeaderTemplate(){var e;return!((e=this.searchResults)===null||e===void 0)&&e.some(t=>t.highlight)?w`<th>Snippets</th>`:w`${m}`}snippetTemplate(e){return e.highlight?w`<td>${e.highlight.value}</td>`:w`${m}`}toggleDefaultAggregations(){var e;this.defaultAggregationsChecked=(e=this.defaultAggregationsCheckbox)===null||e===void 0?void 0:e.checked}toggleFullSearchResults(){this.fullSearchResultsShown=!this.fullSearchResultsShown}async search(e){var t;e.preventDefault();const i=this.searchInput.value,s=(t=this.shadowRoot)===null||t===void 0?void 0:t.querySelector("input[name='search-type']:checked"),r=(s==null?void 0:s.value)==="fts"?T.FULLTEXT:T.METADATA;this.fetchSearchResults(i,r),this.fetchAggregations(i,r)}async fetchSearchResults(e,t){var i,s,r,a,o,l;const u=((i=this.checkedSort)===null||i===void 0?void 0:i.value)==="none"?void 0:[{field:"title",direction:(s=this.checkedSort)===null||s===void 0?void 0:s.value}],p=Number((r=this.rowsInput)===null||r===void 0?void 0:r.value),h=(a=this.debugCheck)===null||a===void 0?void 0:a.checked,g={query:e,rows:p,sort:u,filters:this.filterMap,aggregations:{omit:!0},debugging:h,uid:"demo"};!((o=this.searchWithinCheck)===null||o===void 0)&&o.checked&&(g.pageTarget=e,g.pageType="collection_details"),this.lastSearchParams=decodeURIComponent(L.generateURLSearchParams(g).toString()),this.loadingSearchResults=!0;const _=await this.searchService.search(g,t);this.loadingSearchResults=!1,_!=null&&_.success?this.searchResponse=_==null?void 0:_.success:(alert(`Oh noes: ${(l=_==null?void 0:_.error)===null||l===void 0?void 0:l.message}`),console.error("Error searching",_==null?void 0:_.error))}async fetchAggregations(e,t){var i,s,r,a;const o=(i=this.shadowRoot)===null||i===void 0?void 0:i.querySelectorAll("input[name='aggs']:checked"),l={simpleParams:o?[...o].map(_=>_.value):void 0},u=Number((s=this.numAggsInput)===null||s===void 0?void 0:s.value),p=(r=this.debugCheck)===null||r===void 0?void 0:r.checked,h={query:e,rows:0,filters:this.filterMap,aggregationsSize:u,debugging:p,uid:"demo"};this.defaultAggregationsChecked||(h.aggregations=l),this.lastAggregationParams=decodeURIComponent(L.generateURLSearchParams(h).toString()),this.loadingAggregations=!0;const g=await this.searchService.search(h,t);this.loadingAggregations=!1,g!=null&&g.success?this.aggregationsResponse=g==null?void 0:g.success:(alert(`Oh noes: ${(a=g==null?void 0:g.error)===null||a===void 0?void 0:a.message}`),console.error("Error searching",g==null?void 0:g.error))}static get styles(){return mi`
      :host {
        font-size: 1.3rem;
      }

      .search-options {
        margin-top: 0.6rem;
      }

      .field-row {
        margin: 0.3rem 0;
      }

      fieldset {
        margin-bottom: 0.5rem;
      }

      #search-input {
        min-width: 220px;
      }

      #applied-filters {
        margin-top: 6px;
      }

      .filter {
        display: inline-block;
        margin-bottom: 3px;
        font-size: 1.1rem;
        font-family: sans-serif;
      }

      .filter-text {
        padding: 3px 3px 3px 6px;
        border-radius: 3px 0 0 3px;
        background: #ccc;
      }

      .remove-filter {
        all: unset;
        padding: 3px 6px;
        border-radius: 0 3px 3px 0;
        background: #ccc;
        cursor: pointer;
      }
      .remove-filter:hover {
        background: #999;
      }
      .remove-filter:active {
        background: #888;
      }

      .input-with-label {
        display: inline-flex;
        align-items: center;
        margin-right: 8px;
      }

      .params {
        white-space: pre-wrap;
      }
    `}};d([H("#search-input")],$.prototype,"searchInput",void 0);d([H("#search-within-check")],$.prototype,"searchWithinCheck",void 0);d([H("#debug-info-check")],$.prototype,"debugCheck",void 0);d([H("#num-rows")],$.prototype,"rowsInput",void 0);d([H("#num-aggs")],$.prototype,"numAggsInput",void 0);d([H("input[name='sort']:checked")],$.prototype,"checkedSort",void 0);d([H("#filter-field")],$.prototype,"filterFieldInput",void 0);d([H("#filter-constraint")],$.prototype,"filterConstraintInput",void 0);d([H("#filter-value")],$.prototype,"filterValueInput",void 0);d([H("#aggs-default")],$.prototype,"defaultAggregationsCheckbox",void 0);d([P()],$.prototype,"searchServiceUrlOptions",void 0);d([P()],$.prototype,"filterMap",void 0);d([P()],$.prototype,"searchResponse",void 0);d([P()],$.prototype,"aggregationsResponse",void 0);d([P()],$.prototype,"loadingSearchResults",void 0);d([P()],$.prototype,"loadingAggregations",void 0);d([P()],$.prototype,"lastSearchParams",void 0);d([P()],$.prototype,"lastAggregationParams",void 0);d([P()],$.prototype,"defaultAggregationsChecked",void 0);d([P()],$.prototype,"fullSearchResultsShown",void 0);$=d([Bi("app-root")],$);_i(di`
        <app-root></app-root>
      `,document.querySelector("#demo"));
