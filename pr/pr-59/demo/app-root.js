const ni=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}};ni();/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const si=new WeakMap,ue=s=>typeof s=="function"&&si.has(s);/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const dt=typeof window!="undefined"&&window.customElements!=null&&window.customElements.polyfillWrapFlushCallback!==void 0,Ft=(s,e,t=null)=>{for(;e!==t;){const i=e.nextSibling;s.removeChild(e),e=i}};/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const R={},ut={};/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const V=`{{lit-${String(Math.random()).slice(2)}}}`,Vt=`<!--${V}-->`,ht=new RegExp(`${V}|${Vt}`),ae="$lit$";class ri{constructor(e,t){this.parts=[],this.element=t;const i=[],n=[],r=document.createTreeWalker(t.content,133,null,!1);let a=0,l=-1,o=0;const{strings:c,values:{length:v}}=e;for(;o<v;){const h=r.nextNode();if(h===null){r.currentNode=n.pop();continue}if(l++,h.nodeType===1){if(h.hasAttributes()){const p=h.attributes,{length:f}=p;let A=0;for(let m=0;m<f;m++)ct(p[m].name,ae)&&A++;for(;A-- >0;){const m=c[o],P=Ge.exec(m)[2],H=P.toLowerCase()+ae,C=h.getAttribute(H);h.removeAttribute(H);const k=C.split(ht);this.parts.push({type:"attribute",index:l,name:P,strings:k}),o+=k.length-1}}h.tagName==="TEMPLATE"&&(n.push(h),r.currentNode=h.content)}else if(h.nodeType===3){const p=h.data;if(p.indexOf(V)>=0){const f=h.parentNode,A=p.split(ht),m=A.length-1;for(let P=0;P<m;P++){let H,C=A[P];if(C==="")H=L();else{const k=Ge.exec(C);k!==null&&ct(k[2],ae)&&(C=C.slice(0,k.index)+k[1]+k[2].slice(0,-ae.length)+k[3]),H=document.createTextNode(C)}f.insertBefore(H,h),this.parts.push({type:"node",index:++l})}A[m]===""?(f.insertBefore(L(),h),i.push(h)):h.data=A[m],o+=m}}else if(h.nodeType===8)if(h.data===V){const p=h.parentNode;(h.previousSibling===null||l===a)&&(l++,p.insertBefore(L(),h)),a=l,this.parts.push({type:"node",index:l}),h.nextSibling===null?h.data="":(i.push(h),l--),o++}else{let p=-1;for(;(p=h.data.indexOf(V,p+1))!==-1;)this.parts.push({type:"node",index:-1}),o++}}for(const h of i)h.parentNode.removeChild(h)}}const ct=(s,e)=>{const t=s.length-e.length;return t>=0&&s.slice(t)===e},ai=s=>s.index!==-1,L=()=>document.createComment(""),Ge=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */class pt{constructor(e,t,i){this.__parts=[],this.template=e,this.processor=t,this.options=i}update(e){let t=0;for(const i of this.__parts)i!==void 0&&i.setValue(e[t]),t++;for(const i of this.__parts)i!==void 0&&i.commit()}_clone(){const e=dt?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=[],i=this.template.parts,n=document.createTreeWalker(e,133,null,!1);let r=0,a=0,l,o=n.nextNode();for(;r<i.length;){if(l=i[r],!ai(l)){this.__parts.push(void 0),r++;continue}for(;a<l.index;)a++,o.nodeName==="TEMPLATE"&&(t.push(o),n.currentNode=o.content),(o=n.nextNode())===null&&(n.currentNode=t.pop(),o=n.nextNode());if(l.type==="node"){const c=this.processor.handleTextExpression(this.options);c.insertAfterNode(o.previousSibling),this.__parts.push(c)}else this.__parts.push(...this.processor.handleAttributeExpressions(o,l.name,l.strings,this.options));r++}return dt&&(document.adoptNode(e),customElements.upgrade(e)),e}}/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const vt=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:s=>s}),li=` ${V} `;class Bt{constructor(e,t,i,n){this.strings=e,this.values=t,this.type=i,this.processor=n}getHTML(){const e=this.strings.length-1;let t="",i=!1;for(let n=0;n<e;n++){const r=this.strings[n],a=r.lastIndexOf("<!--");i=(a>-1||i)&&r.indexOf("-->",a+1)===-1;const l=Ge.exec(r);l===null?t+=r+(i?li:Vt):t+=r.substr(0,l.index)+l[1]+l[2]+ae+l[3]+V}return t+=this.strings[e],t}getTemplateElement(){const e=document.createElement("template");let t=this.getHTML();return vt!==void 0&&(t=vt.createHTML(t)),e.innerHTML=t,e}}/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const rt=s=>s===null||!(typeof s=="object"||typeof s=="function"),Ze=s=>Array.isArray(s)||!!(s&&s[Symbol.iterator]);class jt{constructor(e,t,i){this.dirty=!0,this.element=e,this.name=t,this.strings=i,this.parts=[];for(let n=0;n<i.length-1;n++)this.parts[n]=this._createPart()}_createPart(){return new zt(this)}_getValue(){const e=this.strings,t=e.length-1,i=this.parts;if(t===1&&e[0]===""&&e[1]===""){const r=i[0].value;if(typeof r=="symbol")return String(r);if(typeof r=="string"||!Ze(r))return r}let n="";for(let r=0;r<t;r++){n+=e[r];const a=i[r];if(a!==void 0){const l=a.value;if(rt(l)||!Ze(l))n+=typeof l=="string"?l:String(l);else for(const o of l)n+=typeof o=="string"?o:String(o)}}return n+=e[t],n}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class zt{constructor(e){this.value=void 0,this.committer=e}setValue(e){e!==R&&(!rt(e)||e!==this.value)&&(this.value=e,ue(e)||(this.committer.dirty=!0))}commit(){for(;ue(this.value);){const e=this.value;this.value=R,e(this)}this.value!==R&&this.committer.commit()}}class Se{constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(L()),this.endNode=e.appendChild(L())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=L()),e.__insert(this.endNode=L())}insertAfterPart(e){e.__insert(this.startNode=L()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){if(this.startNode.parentNode===null)return;for(;ue(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=R,t(this)}const e=this.__pendingValue;e!==R&&(rt(e)?e!==this.value&&this.__commitText(e):e instanceof Bt?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):Ze(e)?this.__commitIterable(e):e===ut?(this.value=ut,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){const t=this.startNode.nextSibling;e=e==null?"":e;const i=typeof e=="string"?e:String(e);t===this.endNode.previousSibling&&t.nodeType===3?t.data=i:this.__commitNode(document.createTextNode(i)),this.value=e}__commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof pt&&this.value.template===t)this.value.update(e.values);else{const i=new pt(t,e.processor,this.options),n=i._clone();i.update(e.values),this.__commitNode(n),this.value=i}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let i=0,n;for(const r of e)n=t[i],n===void 0&&(n=new Se(this.options),t.push(n),i===0?n.appendIntoPart(this):n.insertAfterPart(t[i-1])),n.setValue(r),n.commit(),i++;i<t.length&&(t.length=i,this.clear(n&&n.endNode))}clear(e=this.startNode){Ft(this.startNode.parentNode,e.nextSibling,this.endNode)}}class oi{constructor(e,t,i){if(this.value=void 0,this.__pendingValue=void 0,i.length!==2||i[0]!==""||i[1]!=="")throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=i}setValue(e){this.__pendingValue=e}commit(){for(;ue(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=R,t(this)}if(this.__pendingValue===R)return;const e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=R}}class di extends jt{constructor(e,t,i){super(e,t,i),this.single=i.length===2&&i[0]===""&&i[1]===""}_createPart(){return new ui(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class ui extends zt{}let qt=!1;(()=>{try{const s={get capture(){return qt=!0,!1}};window.addEventListener("test",s,s),window.removeEventListener("test",s,s)}catch{}})();class hi{constructor(e,t,i){this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=t,this.eventContext=i,this.__boundHandleEvent=n=>this.handleEvent(n)}setValue(e){this.__pendingValue=e}commit(){for(;ue(this.__pendingValue);){const r=this.__pendingValue;this.__pendingValue=R,r(this)}if(this.__pendingValue===R)return;const e=this.__pendingValue,t=this.value,i=e==null||t!=null&&(e.capture!==t.capture||e.once!==t.once||e.passive!==t.passive),n=e!=null&&(t==null||i);i&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),n&&(this.__options=ci(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=R}handleEvent(e){typeof this.value=="function"?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}const ci=s=>s&&(qt?{capture:s.capture,passive:s.passive,once:s.once}:s.capture);/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */class pi{handleAttributeExpressions(e,t,i,n){const r=t[0];return r==="."?new di(e,t.slice(1),i).parts:r==="@"?[new hi(e,t.slice(1),n.eventContext)]:r==="?"?[new oi(e,t.slice(1),i)]:new jt(e,t,i).parts}handleTextExpression(e){return new Se(e)}}const vi=new pi;/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */function fi(s){let e=ft.get(s.type);e===void 0&&(e={stringsArray:new WeakMap,keyString:new Map},ft.set(s.type,e));let t=e.stringsArray.get(s.strings);if(t!==void 0)return t;const i=s.strings.join(V);return t=e.keyString.get(i),t===void 0&&(t=new ri(s,s.getTemplateElement()),e.keyString.set(i,t)),e.stringsArray.set(s.strings,t),t}const ft=new Map;/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const gt=new WeakMap,gi=(s,e,t)=>{let i=gt.get(e);i===void 0&&(Ft(e,e.firstChild),gt.set(e,i=new Se(Object.assign({templateFactory:fi},t))),i.appendInto(e)),i.setValue(s),i.commit()};/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */typeof window!="undefined"&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.1");const _i=(s,...e)=>new Bt(s,e,"html",vi);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function d(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var l=s.length-1;l>=0;l--)(a=s[l])&&(r=(n<3?a(r):n>3?a(e,t,r):a(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const we=window,at=we.ShadowRoot&&(we.ShadyCSS===void 0||we.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,lt=Symbol(),_t=new WeakMap;class Wt{constructor(e,t,i){if(this._$cssResult$=!0,i!==lt)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(at&&e===void 0){const i=t!==void 0&&t.length===1;i&&(e=_t.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&_t.set(t,e))}return e}toString(){return this.cssText}}const mi=s=>new Wt(typeof s=="string"?s:s+"",void 0,lt),wi=(s,...e)=>{const t=s.length===1?s[0]:e.reduce((i,n,r)=>i+(a=>{if(a._$cssResult$===!0)return a.cssText;if(typeof a=="number")return a;throw Error("Value passed to 'css' function must be a 'css' function result: "+a+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+s[r+1],s[0]);return new Wt(t,s,lt)},bi=(s,e)=>{at?s.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet):e.forEach(t=>{const i=document.createElement("style"),n=we.litNonce;n!==void 0&&i.setAttribute("nonce",n),i.textContent=t.cssText,s.appendChild(i)})},mt=at?s=>s:s=>s instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return mi(t)})(s):s;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Le;const be=window,wt=be.trustedTypes,yi=wt?wt.emptyScript:"",bt=be.reactiveElementPolyfillSupport,Ke={toAttribute(s,e){switch(e){case Boolean:s=s?yi:null;break;case Object:case Array:s=s==null?s:JSON.stringify(s)}return s},fromAttribute(s,e){let t=s;switch(e){case Boolean:t=s!==null;break;case Number:t=s===null?null:Number(s);break;case Object:case Array:try{t=JSON.parse(s)}catch{t=null}}return t}},Jt=(s,e)=>e!==s&&(e==e||s==s),De={attribute:!0,type:String,converter:Ke,reflect:!1,hasChanged:Jt},Xe="finalized";class Z extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),((t=this.h)!==null&&t!==void 0?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((t,i)=>{const n=this._$Ep(i,t);n!==void 0&&(this._$Ev.set(n,i),e.push(n))}),e}static createProperty(e,t=De){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const i=typeof e=="symbol"?Symbol():"__"+e,n=this.getPropertyDescriptor(e,i,t);n!==void 0&&Object.defineProperty(this.prototype,e,n)}}static getPropertyDescriptor(e,t,i){return{get(){return this[t]},set(n){const r=this[e];this[t]=n,this.requestUpdate(e,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||De}static finalize(){if(this.hasOwnProperty(Xe))return!1;this[Xe]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,i=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const n of i)this.createProperty(n,t[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const n of i)t.unshift(mt(n))}else e!==void 0&&t.push(mt(e));return t}static _$Ep(e,t){const i=t.attribute;return i===!1?void 0:typeof i=="string"?i:typeof e=="string"?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(t=>t(this))}addController(e){var t,i;((t=this._$ES)!==null&&t!==void 0?t:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((i=e.hostConnected)===null||i===void 0||i.call(e))}removeController(e){var t;(t=this._$ES)===null||t===void 0||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])})}createRenderRoot(){var e;const t=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return bi(t,this.constructor.elementStyles),t}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(t=>{var i;return(i=t.hostConnected)===null||i===void 0?void 0:i.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(t=>{var i;return(i=t.hostDisconnected)===null||i===void 0?void 0:i.call(t)})}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$EO(e,t,i=De){var n;const r=this.constructor._$Ep(e,i);if(r!==void 0&&i.reflect===!0){const a=(((n=i.converter)===null||n===void 0?void 0:n.toAttribute)!==void 0?i.converter:Ke).toAttribute(t,i.type);this._$El=e,a==null?this.removeAttribute(r):this.setAttribute(r,a),this._$El=null}}_$AK(e,t){var i;const n=this.constructor,r=n._$Ev.get(e);if(r!==void 0&&this._$El!==r){const a=n.getPropertyOptions(r),l=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)===null||i===void 0?void 0:i.fromAttribute)!==void 0?a.converter:Ke;this._$El=r,this[r]=l.fromAttribute(t,a.type),this._$El=null}}requestUpdate(e,t,i){let n=!0;e!==void 0&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||Jt)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),i.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,i))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((n,r)=>this[r]=n),this._$Ei=void 0);let t=!1;const i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),(e=this._$ES)===null||e===void 0||e.forEach(n=>{var r;return(r=n.hostUpdate)===null||r===void 0?void 0:r.call(n)}),this.update(i)):this._$Ek()}catch(n){throw t=!1,this._$Ek(),n}t&&this._$AE(i)}willUpdate(e){}_$AE(e){var t;(t=this._$ES)===null||t===void 0||t.forEach(i=>{var n;return(n=i.hostUpdated)===null||n===void 0?void 0:n.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((t,i)=>this._$EO(i,this[i],t)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}Z[Xe]=!0,Z.elementProperties=new Map,Z.elementStyles=[],Z.shadowRootOptions={mode:"open"},bt==null||bt({ReactiveElement:Z}),((Le=be.reactiveElementVersions)!==null&&Le!==void 0?Le:be.reactiveElementVersions=[]).push("1.6.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Fe;const ye=window,X=ye.trustedTypes,yt=X?X.createPolicy("lit-html",{createHTML:s=>s}):void 0,Ye="$lit$",D=`lit$${(Math.random()+"").slice(9)}$`,Gt="?"+D,$i=`<${Gt}>`,J=document,$e=()=>J.createComment(""),he=s=>s===null||typeof s!="object"&&typeof s!="function",Zt=Array.isArray,Ai=s=>Zt(s)||typeof(s==null?void 0:s[Symbol.iterator])=="function",Ve=`[ 	
\f\r]`,se=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,$t=/-->/g,At=/>/g,j=RegExp(`>|${Ve}(?:([^\\s"'>=/]+)(${Ve}*=${Ve}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Mt=/'/g,St=/"/g,Kt=/^(?:script|style|textarea|title)$/i,ce=Symbol.for("lit-noChange"),E=Symbol.for("lit-nothing"),Et=new WeakMap,q=J.createTreeWalker(J,129,null,!1);function Xt(s,e){if(!Array.isArray(s)||!s.hasOwnProperty("raw"))throw Error("invalid template strings array");return yt!==void 0?yt.createHTML(e):e}const Mi=(s,e)=>{const t=s.length-1,i=[];let n,r=e===2?"<svg>":"",a=se;for(let l=0;l<t;l++){const o=s[l];let c,v,h=-1,p=0;for(;p<o.length&&(a.lastIndex=p,v=a.exec(o),v!==null);)p=a.lastIndex,a===se?v[1]==="!--"?a=$t:v[1]!==void 0?a=At:v[2]!==void 0?(Kt.test(v[2])&&(n=RegExp("</"+v[2],"g")),a=j):v[3]!==void 0&&(a=j):a===j?v[0]===">"?(a=n!=null?n:se,h=-1):v[1]===void 0?h=-2:(h=a.lastIndex-v[2].length,c=v[1],a=v[3]===void 0?j:v[3]==='"'?St:Mt):a===St||a===Mt?a=j:a===$t||a===At?a=se:(a=j,n=void 0);const f=a===j&&s[l+1].startsWith("/>")?" ":"";r+=a===se?o+$i:h>=0?(i.push(c),o.slice(0,h)+Ye+o.slice(h)+D+f):o+D+(h===-2?(i.push(void 0),l):f)}return[Xt(s,r+(s[t]||"<?>")+(e===2?"</svg>":"")),i]};class pe{constructor({strings:e,_$litType$:t},i){let n;this.parts=[];let r=0,a=0;const l=e.length-1,o=this.parts,[c,v]=Mi(e,t);if(this.el=pe.createElement(c,i),q.currentNode=this.el.content,t===2){const h=this.el.content,p=h.firstChild;p.remove(),h.append(...p.childNodes)}for(;(n=q.nextNode())!==null&&o.length<l;){if(n.nodeType===1){if(n.hasAttributes()){const h=[];for(const p of n.getAttributeNames())if(p.endsWith(Ye)||p.startsWith(D)){const f=v[a++];if(h.push(p),f!==void 0){const A=n.getAttribute(f.toLowerCase()+Ye).split(D),m=/([.?@])?(.*)/.exec(f);o.push({type:1,index:r,name:m[2],strings:A,ctor:m[1]==="."?Ei:m[1]==="?"?ki:m[1]==="@"?Ci:xe})}else o.push({type:6,index:r})}for(const p of h)n.removeAttribute(p)}if(Kt.test(n.tagName)){const h=n.textContent.split(D),p=h.length-1;if(p>0){n.textContent=X?X.emptyScript:"";for(let f=0;f<p;f++)n.append(h[f],$e()),q.nextNode(),o.push({type:2,index:++r});n.append(h[p],$e())}}}else if(n.nodeType===8)if(n.data===Gt)o.push({type:2,index:r});else{let h=-1;for(;(h=n.data.indexOf(D,h+1))!==-1;)o.push({type:7,index:r}),h+=D.length-1}r++}}static createElement(e,t){const i=J.createElement("template");return i.innerHTML=e,i}}function Y(s,e,t=s,i){var n,r,a,l;if(e===ce)return e;let o=i!==void 0?(n=t._$Co)===null||n===void 0?void 0:n[i]:t._$Cl;const c=he(e)?void 0:e._$litDirective$;return(o==null?void 0:o.constructor)!==c&&((r=o==null?void 0:o._$AO)===null||r===void 0||r.call(o,!1),c===void 0?o=void 0:(o=new c(s),o._$AT(s,t,i)),i!==void 0?((a=(l=t)._$Co)!==null&&a!==void 0?a:l._$Co=[])[i]=o:t._$Cl=o),o!==void 0&&(e=Y(s,o._$AS(s,e.values),o,i)),e}class Si{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:i},parts:n}=this._$AD,r=((t=e==null?void 0:e.creationScope)!==null&&t!==void 0?t:J).importNode(i,!0);q.currentNode=r;let a=q.nextNode(),l=0,o=0,c=n[0];for(;c!==void 0;){if(l===c.index){let v;c.type===2?v=new Ee(a,a.nextSibling,this,e):c.type===1?v=new c.ctor(a,c.name,c.strings,this,e):c.type===6&&(v=new Ni(a,this,e)),this._$AV.push(v),c=n[++o]}l!==(c==null?void 0:c.index)&&(a=q.nextNode(),l++)}return q.currentNode=J,r}v(e){let t=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class Ee{constructor(e,t,i,n){var r;this.type=2,this._$AH=E,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=n,this._$Cp=(r=n==null?void 0:n.isConnected)===null||r===void 0||r}get _$AU(){var e,t;return(t=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&t!==void 0?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Y(this,e,t),he(e)?e===E||e==null||e===""?(this._$AH!==E&&this._$AR(),this._$AH=E):e!==this._$AH&&e!==ce&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):Ai(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==E&&he(this._$AH)?this._$AA.nextSibling.data=e:this.$(J.createTextNode(e)),this._$AH=e}g(e){var t;const{values:i,_$litType$:n}=e,r=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=pe.createElement(Xt(n.h,n.h[0]),this.options)),n);if(((t=this._$AH)===null||t===void 0?void 0:t._$AD)===r)this._$AH.v(i);else{const a=new Si(r,this),l=a.u(this.options);a.v(i),this.$(l),this._$AH=a}}_$AC(e){let t=Et.get(e.strings);return t===void 0&&Et.set(e.strings,t=new pe(e)),t}T(e){Zt(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,n=0;for(const r of e)n===t.length?t.push(i=new Ee(this.k($e()),this.k($e()),this,this.options)):i=t[n],i._$AI(r),n++;n<t.length&&(this._$AR(i&&i._$AB.nextSibling,n),t.length=n)}_$AR(e=this._$AA.nextSibling,t){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,t);e&&e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var t;this._$AM===void 0&&(this._$Cp=e,(t=this._$AP)===null||t===void 0||t.call(this,e))}}class xe{constructor(e,t,i,n,r){this.type=1,this._$AH=E,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=r,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=E}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,i,n){const r=this.strings;let a=!1;if(r===void 0)e=Y(this,e,t,0),a=!he(e)||e!==this._$AH&&e!==ce,a&&(this._$AH=e);else{const l=e;let o,c;for(e=r[0],o=0;o<r.length-1;o++)c=Y(this,l[i+o],t,o),c===ce&&(c=this._$AH[o]),a||(a=!he(c)||c!==this._$AH[o]),c===E?e=E:e!==E&&(e+=(c!=null?c:"")+r[o+1]),this._$AH[o]=c}a&&!n&&this.j(e)}j(e){e===E?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e!=null?e:"")}}class Ei extends xe{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===E?void 0:e}}const xi=X?X.emptyScript:"";class ki extends xe{constructor(){super(...arguments),this.type=4}j(e){e&&e!==E?this.element.setAttribute(this.name,xi):this.element.removeAttribute(this.name)}}class Ci extends xe{constructor(e,t,i,n,r){super(e,t,i,n,r),this.type=5}_$AI(e,t=this){var i;if((e=(i=Y(this,e,t,0))!==null&&i!==void 0?i:E)===ce)return;const n=this._$AH,r=e===E&&n!==E||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,a=e!==E&&(n===E||r);r&&this.element.removeEventListener(this.name,this,n),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;typeof this._$AH=="function"?this._$AH.call((i=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&i!==void 0?i:this.element,e):this._$AH.handleEvent(e)}}class Ni{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){Y(this,e)}}const xt=ye.litHtmlPolyfillSupport;xt==null||xt(pe,Ee),((Fe=ye.litHtmlVersions)!==null&&Fe!==void 0?Fe:ye.litHtmlVersions=[]).push("2.8.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Be;const Ae=window,Q=Ae.trustedTypes,kt=Q?Q.createPolicy("lit-html",{createHTML:s=>s}):void 0,Qe="$lit$",F=`lit$${(Math.random()+"").slice(9)}$`,Yt="?"+F,Ti=`<${Yt}>`,G=document,ve=()=>G.createComment(""),fe=s=>s===null||typeof s!="object"&&typeof s!="function",Qt=Array.isArray,Ri=s=>Qt(s)||typeof(s==null?void 0:s[Symbol.iterator])=="function",je=`[ 	
\f\r]`,re=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Ct=/-->/g,Nt=/>/g,z=RegExp(`>|${je}(?:([^\\s"'>=/]+)(${je}*=${je}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Tt=/'/g,Rt=/"/g,ei=/^(?:script|style|textarea|title)$/i,Pi=s=>(e,...t)=>({_$litType$:s,strings:e,values:t}),M=Pi(1),ee=Symbol.for("lit-noChange"),y=Symbol.for("lit-nothing"),Pt=new WeakMap,W=G.createTreeWalker(G,129,null,!1);function ti(s,e){if(!Array.isArray(s)||!s.hasOwnProperty("raw"))throw Error("invalid template strings array");return kt!==void 0?kt.createHTML(e):e}const Hi=(s,e)=>{const t=s.length-1,i=[];let n,r=e===2?"<svg>":"",a=re;for(let l=0;l<t;l++){const o=s[l];let c,v,h=-1,p=0;for(;p<o.length&&(a.lastIndex=p,v=a.exec(o),v!==null);)p=a.lastIndex,a===re?v[1]==="!--"?a=Ct:v[1]!==void 0?a=Nt:v[2]!==void 0?(ei.test(v[2])&&(n=RegExp("</"+v[2],"g")),a=z):v[3]!==void 0&&(a=z):a===z?v[0]===">"?(a=n!=null?n:re,h=-1):v[1]===void 0?h=-2:(h=a.lastIndex-v[2].length,c=v[1],a=v[3]===void 0?z:v[3]==='"'?Rt:Tt):a===Rt||a===Tt?a=z:a===Ct||a===Nt?a=re:(a=z,n=void 0);const f=a===z&&s[l+1].startsWith("/>")?" ":"";r+=a===re?o+Ti:h>=0?(i.push(c),o.slice(0,h)+Qe+o.slice(h)+F+f):o+F+(h===-2?(i.push(void 0),l):f)}return[ti(s,r+(s[t]||"<?>")+(e===2?"</svg>":"")),i]};class ge{constructor({strings:e,_$litType$:t},i){let n;this.parts=[];let r=0,a=0;const l=e.length-1,o=this.parts,[c,v]=Hi(e,t);if(this.el=ge.createElement(c,i),W.currentNode=this.el.content,t===2){const h=this.el.content,p=h.firstChild;p.remove(),h.append(...p.childNodes)}for(;(n=W.nextNode())!==null&&o.length<l;){if(n.nodeType===1){if(n.hasAttributes()){const h=[];for(const p of n.getAttributeNames())if(p.endsWith(Qe)||p.startsWith(F)){const f=v[a++];if(h.push(p),f!==void 0){const A=n.getAttribute(f.toLowerCase()+Qe).split(F),m=/([.?@])?(.*)/.exec(f);o.push({type:1,index:r,name:m[2],strings:A,ctor:m[1]==="."?Ui:m[1]==="?"?Li:m[1]==="@"?Di:ke})}else o.push({type:6,index:r})}for(const p of h)n.removeAttribute(p)}if(ei.test(n.tagName)){const h=n.textContent.split(F),p=h.length-1;if(p>0){n.textContent=Q?Q.emptyScript:"";for(let f=0;f<p;f++)n.append(h[f],ve()),W.nextNode(),o.push({type:2,index:++r});n.append(h[p],ve())}}}else if(n.nodeType===8)if(n.data===Yt)o.push({type:2,index:r});else{let h=-1;for(;(h=n.data.indexOf(F,h+1))!==-1;)o.push({type:7,index:r}),h+=F.length-1}r++}}static createElement(e,t){const i=G.createElement("template");return i.innerHTML=e,i}}function te(s,e,t=s,i){var n,r,a,l;if(e===ee)return e;let o=i!==void 0?(n=t._$Co)===null||n===void 0?void 0:n[i]:t._$Cl;const c=fe(e)?void 0:e._$litDirective$;return(o==null?void 0:o.constructor)!==c&&((r=o==null?void 0:o._$AO)===null||r===void 0||r.call(o,!1),c===void 0?o=void 0:(o=new c(s),o._$AT(s,t,i)),i!==void 0?((a=(l=t)._$Co)!==null&&a!==void 0?a:l._$Co=[])[i]=o:t._$Cl=o),o!==void 0&&(e=te(s,o._$AS(s,e.values),o,i)),e}class Oi{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:i},parts:n}=this._$AD,r=((t=e==null?void 0:e.creationScope)!==null&&t!==void 0?t:G).importNode(i,!0);W.currentNode=r;let a=W.nextNode(),l=0,o=0,c=n[0];for(;c!==void 0;){if(l===c.index){let v;c.type===2?v=new _e(a,a.nextSibling,this,e):c.type===1?v=new c.ctor(a,c.name,c.strings,this,e):c.type===6&&(v=new Fi(a,this,e)),this._$AV.push(v),c=n[++o]}l!==(c==null?void 0:c.index)&&(a=W.nextNode(),l++)}return W.currentNode=G,r}v(e){let t=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class _e{constructor(e,t,i,n){var r;this.type=2,this._$AH=y,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=n,this._$Cp=(r=n==null?void 0:n.isConnected)===null||r===void 0||r}get _$AU(){var e,t;return(t=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&t!==void 0?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=te(this,e,t),fe(e)?e===y||e==null||e===""?(this._$AH!==y&&this._$AR(),this._$AH=y):e!==this._$AH&&e!==ee&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):Ri(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==y&&fe(this._$AH)?this._$AA.nextSibling.data=e:this.$(G.createTextNode(e)),this._$AH=e}g(e){var t;const{values:i,_$litType$:n}=e,r=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=ge.createElement(ti(n.h,n.h[0]),this.options)),n);if(((t=this._$AH)===null||t===void 0?void 0:t._$AD)===r)this._$AH.v(i);else{const a=new Oi(r,this),l=a.u(this.options);a.v(i),this.$(l),this._$AH=a}}_$AC(e){let t=Pt.get(e.strings);return t===void 0&&Pt.set(e.strings,t=new ge(e)),t}T(e){Qt(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,n=0;for(const r of e)n===t.length?t.push(i=new _e(this.k(ve()),this.k(ve()),this,this.options)):i=t[n],i._$AI(r),n++;n<t.length&&(this._$AR(i&&i._$AB.nextSibling,n),t.length=n)}_$AR(e=this._$AA.nextSibling,t){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,t);e&&e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var t;this._$AM===void 0&&(this._$Cp=e,(t=this._$AP)===null||t===void 0||t.call(this,e))}}class ke{constructor(e,t,i,n,r){this.type=1,this._$AH=y,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=r,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=y}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,i,n){const r=this.strings;let a=!1;if(r===void 0)e=te(this,e,t,0),a=!fe(e)||e!==this._$AH&&e!==ee,a&&(this._$AH=e);else{const l=e;let o,c;for(e=r[0],o=0;o<r.length-1;o++)c=te(this,l[i+o],t,o),c===ee&&(c=this._$AH[o]),a||(a=!fe(c)||c!==this._$AH[o]),c===y?e=y:e!==y&&(e+=(c!=null?c:"")+r[o+1]),this._$AH[o]=c}a&&!n&&this.j(e)}j(e){e===y?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e!=null?e:"")}}class Ui extends ke{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===y?void 0:e}}const Ii=Q?Q.emptyScript:"";class Li extends ke{constructor(){super(...arguments),this.type=4}j(e){e&&e!==y?this.element.setAttribute(this.name,Ii):this.element.removeAttribute(this.name)}}class Di extends ke{constructor(e,t,i,n,r){super(e,t,i,n,r),this.type=5}_$AI(e,t=this){var i;if((e=(i=te(this,e,t,0))!==null&&i!==void 0?i:y)===ee)return;const n=this._$AH,r=e===y&&n!==y||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,a=e!==y&&(n===y||r);r&&this.element.removeEventListener(this.name,this,n),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;typeof this._$AH=="function"?this._$AH.call((i=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&i!==void 0?i:this.element,e):this._$AH.handleEvent(e)}}class Fi{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){te(this,e)}}const Ht=Ae.litHtmlPolyfillSupport;Ht==null||Ht(ge,_e),((Be=Ae.litHtmlVersions)!==null&&Be!==void 0?Be:Ae.litHtmlVersions=[]).push("2.8.0");const Vi=(s,e,t)=>{var i,n;const r=(i=t==null?void 0:t.renderBefore)!==null&&i!==void 0?i:e;let a=r._$litPart$;if(a===void 0){const l=(n=t==null?void 0:t.renderBefore)!==null&&n!==void 0?n:null;r._$litPart$=a=new _e(e.insertBefore(ve(),l),l,void 0,t!=null?t:{})}return a._$AI(s),a};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var ze,qe;class le extends Z{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const i=super.createRenderRoot();return(e=(t=this.renderOptions).renderBefore)!==null&&e!==void 0||(t.renderBefore=i.firstChild),i}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Vi(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return ee}}le.finalized=!0,le._$litElement$=!0,(ze=globalThis.litElementHydrateSupport)===null||ze===void 0||ze.call(globalThis,{LitElement:le});const Ot=globalThis.litElementPolyfillSupport;Ot==null||Ot({LitElement:le});((qe=globalThis.litElementVersions)!==null&&qe!==void 0?qe:globalThis.litElementVersions=[]).push("3.3.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Bi=s=>e=>typeof e=="function"?((t,i)=>(customElements.define(t,i),i))(s,e):((t,i)=>{const{kind:n,elements:r}=i;return{kind:n,elements:r,finisher(a){customElements.define(t,a)}}})(s,e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ji=(s,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(t){t.createProperty(e.key,s)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(t){t.createProperty(e.key,s)}},zi=(s,e,t)=>{e.constructor.createProperty(t,s)};function qi(s){return(e,t)=>t!==void 0?zi(s,e,t):ji(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function O(s){return qi({...s,state:!0})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Wi=({finisher:s,descriptor:e})=>(t,i)=>{var n;if(i===void 0){const r=(n=t.originalKey)!==null&&n!==void 0?n:t.key,a=e!=null?{kind:"method",placement:"prototype",key:r,descriptor:e(t.key)}:{...t,key:r};return s!=null&&(a.finisher=function(l){s(l,r)}),a}{const r=t.constructor;e!==void 0&&Object.defineProperty(t,i,e(i)),s==null||s(r,i)}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function U(s,e){return Wi({descriptor:t=>{const i={get(){var n,r;return(r=(n=this.renderRoot)===null||n===void 0?void 0:n.querySelector(s))!==null&&r!==void 0?r:null},enumerable:!0,configurable:!0};if(e){const n=typeof t=="symbol"?Symbol():"__"+t;i.get=function(){var r,a;return this[n]===void 0&&(this[n]=(a=(r=this.renderRoot)===null||r===void 0?void 0:r.querySelector(s))!==null&&a!==void 0?a:null),this[n]}}return i}})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var We;((We=window.HTMLSlotElement)===null||We===void 0?void 0:We.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function*Ji(s,e){if(s!==void 0){let t=0;for(const i of s)yield e(i,t++)}}function u(s){let e,t,i;return typeof s=="object"?(e=s.hashFunction,t=s.expiring,i=s.tags):e=s,(n,r,a)=>{if(a.value!=null)a.value=Ut(a.value,e,t,i);else if(a.get!=null)a.get=Ut(a.get,e,t,i);else throw"Only put a Memoize() decorator on a method or get accessor."}}const Je=new Map;function Ut(s,e,t=0,i){const n=Symbol("__memoized_map__");return function(...r){let a;this.hasOwnProperty(n)||Object.defineProperty(this,n,{configurable:!1,enumerable:!1,writable:!1,value:new Map});let l=this[n];if(Array.isArray(i))for(const o of i)Je.has(o)?Je.get(o).push(l):Je.set(o,[l]);if(e||r.length>0||t>0){let o;e===!0?o=r.map(h=>h.toString()).join("!"):e?o=e.apply(this,r):o=r[0];const c=`${o}__timestamp`;let v=!1;if(t>0)if(!l.has(c))v=!0;else{let h=l.get(c);v=Date.now()-h>t}l.has(o)&&!v?a=l.get(o):(a=s.apply(this,r),l.set(o,a),t>0&&l.set(c,Date.now()))}else{const o=this;l.has(o)?a=l.get(o):(a=s.apply(this,r),l.set(o,a))}return a}}var oe;(function(s){s[s.COUNT=0]="COUNT",s[s.ALPHABETICAL=1]="ALPHABETICAL",s[s.NUMERIC=2]="NUMERIC"})(oe||(oe={}));class ii{constructor(e){this.buckets=e.buckets,this.doc_count_error_upper_bound=e.doc_count_error_upper_bound,this.sum_other_doc_count=e.sum_other_doc_count,this.first_bucket_key=e.first_bucket_key,this.last_bucket_key=e.last_bucket_key,this.number_buckets=e.number_buckets,this.interval=e.interval}getSortedBuckets(e){const t=[...this.buckets];if(this.isRawNumberBuckets(t))return t;const i=new Intl.Collator;switch(e){case oe.ALPHABETICAL:return t.sort((n,r)=>i.compare(n.key.toString(),r.key.toString()));case oe.NUMERIC:return t.sort((n,r)=>Number(r.key)-Number(n.key));case oe.COUNT:default:return t}}isRawNumberBuckets(e){return typeof this.buckets[0]=="number"}}d([u()],ii.prototype,"getSortedBuckets",null);class et{parseValue(e){return typeof e=="string"&&(e==="false"||e==="0")?!1:Boolean(e)}}et.shared=new et;class Me{parseValue(e){if(typeof e=="number")return e;if(typeof e=="boolean")return;const t=parseFloat(e);if(!Number.isNaN(t))return t}}Me.shared=new Me;class tt{parseValue(e){return Me.shared.parseValue(e)}}tt.shared=new tt;class it{parseValue(e){return this.parseJSDate(e)||this.parseBracketDate(e)}parseBracketDate(e){if(typeof e!="string")return;const t=e.match(/\[([0-9]{4})\]/);if(!(!t||t.length<2))return this.parseJSDate(t[1])}parseJSDate(e){if(typeof e!="string")return;let t=e;t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}\s{1}[0-9]{2}:[0-9]{2}:[0-9]{2}$/)&&(t=t.replace(" ","T"));const i=Date.parse(t);if(Number.isNaN(i))return;let n=new Date(t);return(t.indexOf("Z")>-1||t.indexOf("+")>-1||t.match(/^[0-9]{4}$/)||t.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/)||t.match(/^.*?-[0-9]{2}:[0-9]{2}$/)||t.match(/^.*?-[0-9]{4}$/))&&(n=new Date(n.getTime()+n.getTimezoneOffset()*1e3*60)),n}}it.shared=new it;class nt{parseValue(e){if(typeof e=="string")return e}}nt.shared=new nt;class st{parseValue(e){return String(e)}}st.shared=new st;class B{get values(){return this.parseRawValue()}get value(){return this.values[0]}constructor(e,t){this.parser=e,this.rawValue=t}parseRawValue(){if(this.rawValue===void 0)return[];const e=Array.isArray(this.rawValue)?this.rawValue:[this.rawValue],t=[];return e.forEach(i=>{const n=this.parser.parseValue(i);Array.isArray(n)?t.push(...n):n!==void 0&&t.push(n)}),t}}d([u()],B.prototype,"values",null);d([u()],B.prototype,"value",null);class K extends B{constructor(e){super(et.shared,e)}}class It extends B{constructor(e){super(tt.shared,e)}}class x extends B{constructor(e){super(it.shared,e)}}class Ce extends B{constructor(e){super(nt.shared,e)}}class S extends B{constructor(e){super(Me.shared,e)}}class g extends B{constructor(e){super(st.shared,e)}}class _{constructor(e){this.rawMetadata=e}get identifier(){var e,t;return(t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.identifier}get addeddate(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.addeddate?new x(this.rawMetadata.fields.addeddate):void 0}get avg_rating(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.avg_rating)!=null?new S(this.rawMetadata.fields.avg_rating):void 0}get collection(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.collection?new g(this.rawMetadata.fields.collection):void 0}get collection_files_count(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.collection_files_count)!=null?new S(this.rawMetadata.fields.collection_files_count):void 0}get collection_size(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.collection_size)!=null?new It(this.rawMetadata.fields.collection_size):void 0}get creator(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.creator?new g(this.rawMetadata.fields.creator):void 0}get date(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.date?new x(this.rawMetadata.fields.date):void 0}get description(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.description?new g(this.rawMetadata.fields.description):void 0}get downloads(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.downloads)!=null?new S(this.rawMetadata.fields.downloads):void 0}get files_count(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.files_count)!=null?new S(this.rawMetadata.fields.files_count):void 0}get genre(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.genre?new g(this.rawMetadata.fields.genre):void 0}get indexflag(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.indexflag?new g(this.rawMetadata.fields.indexflag):void 0}get issue(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.issue?new g(this.rawMetadata.fields.issue):void 0}get item_count(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.item_count)!=null?new S(this.rawMetadata.fields.item_count):void 0}get item_size(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.item_size)!=null?new It(this.rawMetadata.fields.item_size):void 0}get language(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.language?new g(this.rawMetadata.fields.language):void 0}get lending___available_to_borrow(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.lending___available_to_borrow)!=null?new K(this.rawMetadata.fields.lending___available_to_borrow):void 0}get lending___available_to_browse(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.lending___available_to_browse)!=null?new K(this.rawMetadata.fields.lending___available_to_browse):void 0}get lending___available_to_waitlist(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.lending___available_to_waitlist)!=null?new K(this.rawMetadata.fields.lending___available_to_waitlist):void 0}get lending___status(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.lending___status?new g(this.rawMetadata.fields.lending___status):void 0}get licenseurl(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.licenseurl?new g(this.rawMetadata.fields.licenseurl):void 0}get mediatype(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.mediatype?new Ce(this.rawMetadata.fields.mediatype):void 0}get month(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.month)!=null?new S(this.rawMetadata.fields.month):void 0}get noindex(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.noindex)!=null?new K(this.rawMetadata.fields.noindex):void 0}get num_favorites(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.num_favorites)!=null?new S(this.rawMetadata.fields.num_favorites):void 0}get num_reviews(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.num_reviews)!=null?new S(this.rawMetadata.fields.num_reviews):void 0}get publicdate(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.publicdate?new x(this.rawMetadata.fields.publicdate):void 0}get reviewdate(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.reviewdate?new x(this.rawMetadata.fields.reviewdate):void 0}get review(){var e;const t=(e=this.rawMetadata)===null||e===void 0?void 0:e.review;return t?{body:t.reviewbody,title:t.reviewtitle,author:t.reviewer,authorItem:t.reviewer_itemname,updatedate:new Date(t.reviewdate),createdate:new Date(t.createdate),stars:Number(t.stars)||0,__href__:t.__href__}:void 0}get source(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.source?new g(this.rawMetadata.fields.source):void 0}get subject(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.subject?new g(this.rawMetadata.fields.subject):void 0}get title(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.title?new g(this.rawMetadata.fields.title):void 0}get type(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.type?new g(this.rawMetadata.fields.type):void 0}get volume(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.volume?new g(this.rawMetadata.fields.volume):void 0}get week(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.week)!=null?new S(this.rawMetadata.fields.week):void 0}get year(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.year)!=null?new S(this.rawMetadata.fields.year):void 0}}d([u()],_.prototype,"addeddate",null);d([u()],_.prototype,"avg_rating",null);d([u()],_.prototype,"collection",null);d([u()],_.prototype,"collection_files_count",null);d([u()],_.prototype,"collection_size",null);d([u()],_.prototype,"creator",null);d([u()],_.prototype,"date",null);d([u()],_.prototype,"description",null);d([u()],_.prototype,"downloads",null);d([u()],_.prototype,"files_count",null);d([u()],_.prototype,"genre",null);d([u()],_.prototype,"indexflag",null);d([u()],_.prototype,"issue",null);d([u()],_.prototype,"item_count",null);d([u()],_.prototype,"item_size",null);d([u()],_.prototype,"language",null);d([u()],_.prototype,"lending___available_to_borrow",null);d([u()],_.prototype,"lending___available_to_browse",null);d([u()],_.prototype,"lending___available_to_waitlist",null);d([u()],_.prototype,"lending___status",null);d([u()],_.prototype,"licenseurl",null);d([u()],_.prototype,"mediatype",null);d([u()],_.prototype,"month",null);d([u()],_.prototype,"noindex",null);d([u()],_.prototype,"num_favorites",null);d([u()],_.prototype,"num_reviews",null);d([u()],_.prototype,"publicdate",null);d([u()],_.prototype,"reviewdate",null);d([u()],_.prototype,"review",null);d([u()],_.prototype,"source",null);d([u()],_.prototype,"subject",null);d([u()],_.prototype,"title",null);d([u()],_.prototype,"type",null);d([u()],_.prototype,"volume",null);d([u()],_.prototype,"week",null);d([u()],_.prototype,"year",null);class w{constructor(e){this.rawMetadata=e}get identifier(){var e,t;return(t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.identifier}get highlight(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.highlight)===null||t===void 0)&&t.text?new g(this.rawMetadata.highlight.text):void 0}get addeddate(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.addeddate?new x(this.rawMetadata.fields.addeddate):void 0}get avg_rating(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.avg_rating)!=null?new S(this.rawMetadata.fields.avg_rating):void 0}get collection(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.collection?new g(this.rawMetadata.fields.collection):void 0}get created_on(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.created_on?new x(this.rawMetadata.fields.created_on):void 0}get creator(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.creator?new g(this.rawMetadata.fields.creator):void 0}get date(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.date?new x(this.rawMetadata.fields.date):void 0}get description(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.description?new g(this.rawMetadata.fields.description):void 0}get downloads(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.downloads)!=null?new S(this.rawMetadata.fields.downloads):void 0}get filename(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.filename?new g(this.rawMetadata.fields.filename):void 0}get file_basename(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.file_basename?new g(this.rawMetadata.fields.file_basename):void 0}get file_creation_mtime(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.file_creation_mtime)!=null?new S(this.rawMetadata.fields.file_creation_mtime):void 0}get issue(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.issue?new g(this.rawMetadata.fields.issue):void 0}get mediatype(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.mediatype?new Ce(this.rawMetadata.fields.mediatype):void 0}get page_num(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.page_num)!=null?new S(this.rawMetadata.fields.page_num):void 0}get publicdate(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.publicdate?new x(this.rawMetadata.fields.publicdate):void 0}get result_in_subfile(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.result_in_subfile)!=null?new K(this.rawMetadata.fields.result_in_subfile):void 0}get reviewdate(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.reviewdate?new x(this.rawMetadata.fields.reviewdate):void 0}get source(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.source?new g(this.rawMetadata.fields.source):void 0}get subject(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.subject?new g(this.rawMetadata.fields.subject):void 0}get title(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.title?new g(this.rawMetadata.fields.title):void 0}get updated_on(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.updated_on?new x(this.rawMetadata.fields.updated_on):void 0}get year(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.year)!=null?new S(this.rawMetadata.fields.year):void 0}get __href__(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.__href__?new g(this.rawMetadata.fields.__href__):void 0}}d([u()],w.prototype,"highlight",null);d([u()],w.prototype,"addeddate",null);d([u()],w.prototype,"avg_rating",null);d([u()],w.prototype,"collection",null);d([u()],w.prototype,"created_on",null);d([u()],w.prototype,"creator",null);d([u()],w.prototype,"date",null);d([u()],w.prototype,"description",null);d([u()],w.prototype,"downloads",null);d([u()],w.prototype,"filename",null);d([u()],w.prototype,"file_basename",null);d([u()],w.prototype,"file_creation_mtime",null);d([u()],w.prototype,"issue",null);d([u()],w.prototype,"mediatype",null);d([u()],w.prototype,"page_num",null);d([u()],w.prototype,"publicdate",null);d([u()],w.prototype,"result_in_subfile",null);d([u()],w.prototype,"reviewdate",null);d([u()],w.prototype,"source",null);d([u()],w.prototype,"subject",null);d([u()],w.prototype,"title",null);d([u()],w.prototype,"updated_on",null);d([u()],w.prototype,"year",null);d([u()],w.prototype,"__href__",null);class me{constructor(e){this.rawMetadata=e}get identifier(){var e;return(e=this.rawMetadata)===null||e===void 0?void 0:e.fields.query}get title(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.title?new g(this.rawMetadata.fields.title):void 0}get query(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.query?new g(this.rawMetadata.fields.query):void 0}get date_favorited(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.date_favorited?new x(this.rawMetadata.fields.date_favorited):void 0}get __href__(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.__href__?new g(this.rawMetadata.fields.__href__):void 0}}d([u()],me.prototype,"title",null);d([u()],me.prototype,"query",null);d([u()],me.prototype,"date_favorited",null);d([u()],me.prototype,"__href__",null);class Ne{constructor(e){this.rawMetadata=e}get identifier(){var e,t;return(t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.url}get mediatype(){return new Ce("web")}get title(){var e,t,i;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.url?new g((i=this.rawMetadata.fields)===null||i===void 0?void 0:i.url):void 0}get capture_dates(){var e,t,i;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.capture_dates?new x((i=this.rawMetadata.fields)===null||i===void 0?void 0:i.capture_dates):void 0}get __href__(){var e,t,i;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.__href__?new g((i=this.rawMetadata.fields)===null||i===void 0?void 0:i.__href__):void 0}}d([u()],Ne.prototype,"title",null);d([u()],Ne.prototype,"capture_dates",null);d([u()],Ne.prototype,"__href__",null);class b{constructor(e){this.rawMetadata=e}get identifier(){var e,t;return(t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.identifier}get highlight(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.highlight)===null||t===void 0)&&t.text?new g(this.rawMetadata.highlight.text):void 0}get addeddate(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.addeddate?new x(this.rawMetadata.fields.addeddate):void 0}get avg_rating(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.avg_rating)!=null?new S(this.rawMetadata.fields.avg_rating):void 0}get collection(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.collection?new g(this.rawMetadata.fields.collection):void 0}get created_on(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.created_on?new x(this.rawMetadata.fields.created_on):void 0}get creator(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.creator?new g(this.rawMetadata.fields.creator):void 0}get date(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.date?new x(this.rawMetadata.fields.date):void 0}get description(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.description?new g(this.rawMetadata.fields.description):void 0}get downloads(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.downloads)!=null?new S(this.rawMetadata.fields.downloads):void 0}get filename(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.filename?new g(this.rawMetadata.fields.filename):void 0}get file_basename(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.file_basename?new g(this.rawMetadata.fields.file_basename):void 0}get file_creation_mtime(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.file_creation_mtime)!=null?new S(this.rawMetadata.fields.file_creation_mtime):void 0}get issue(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.issue?new g(this.rawMetadata.fields.issue):void 0}get mediatype(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.mediatype?new Ce(this.rawMetadata.fields.mediatype):void 0}get publicdate(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.publicdate?new x(this.rawMetadata.fields.publicdate):void 0}get result_in_subfile(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.result_in_subfile)!=null?new K(this.rawMetadata.fields.result_in_subfile):void 0}get reviewdate(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.reviewdate?new x(this.rawMetadata.fields.reviewdate):void 0}get source(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.source?new g(this.rawMetadata.fields.source):void 0}get subject(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.subject?new g(this.rawMetadata.fields.subject):void 0}get title(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.title?new g(this.rawMetadata.fields.title):void 0}get updated_on(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.updated_on?new x(this.rawMetadata.fields.updated_on):void 0}get year(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.year)!=null?new S(this.rawMetadata.fields.year):void 0}get start(){var e,t;return((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.start)!=null?new g(this.rawMetadata.fields.start):void 0}get __href__(){var e,t;return!((t=(e=this.rawMetadata)===null||e===void 0?void 0:e.fields)===null||t===void 0)&&t.__href__?new g(this.rawMetadata.fields.__href__):void 0}}d([u()],b.prototype,"highlight",null);d([u()],b.prototype,"addeddate",null);d([u()],b.prototype,"avg_rating",null);d([u()],b.prototype,"collection",null);d([u()],b.prototype,"created_on",null);d([u()],b.prototype,"creator",null);d([u()],b.prototype,"date",null);d([u()],b.prototype,"description",null);d([u()],b.prototype,"downloads",null);d([u()],b.prototype,"filename",null);d([u()],b.prototype,"file_basename",null);d([u()],b.prototype,"file_creation_mtime",null);d([u()],b.prototype,"issue",null);d([u()],b.prototype,"mediatype",null);d([u()],b.prototype,"publicdate",null);d([u()],b.prototype,"result_in_subfile",null);d([u()],b.prototype,"reviewdate",null);d([u()],b.prototype,"source",null);d([u()],b.prototype,"subject",null);d([u()],b.prototype,"title",null);d([u()],b.prototype,"updated_on",null);d([u()],b.prototype,"year",null);d([u()],b.prototype,"start",null);d([u()],b.prototype,"__href__",null);const Gi=["loans","waitlist","loan_history"];function Zi(s){const e=s.slice(0,4),t=s.slice(4,6),i=s.slice(6,8),n=s.slice(8,10),r=s.slice(10,12),a=s.slice(12,14);return`${e}-${t}-${i}T${n}:${r}:${a}Z`}function Ki(s){var e;const t=[];for(const i of s){if(!(!((e=i.captures)===null||e===void 0)&&e.length))continue;const n=encodeURIComponent(i.url),r=`https://web.archive.org/web/${i.captures[0]}/${n}`;t.push({hit_type:"web_archive",fields:{url:i.url,capture_dates:i.captures.map(a=>Zi(a)),__href__:r}})}return t}class ot{constructor(e,t){var i,n,r,a,l,o,c,v,h,p,f,A,m,P,H,C,k,Re,Pe,He,Oe,Ue;this.schema=t,this.schemaHitType=t==null?void 0:t.hit_type;let N;e!=null&&e.page_elements&&(this.pageElements=e.page_elements,N=Object.values(this.pageElements)[0]);let T=(i=e==null?void 0:e.hits)===null||i===void 0?void 0:i.hits;this.totalResults=(r=(n=e==null?void 0:e.hits)===null||n===void 0?void 0:n.total)!==null&&r!==void 0?r:0,this.returnedCount=(l=(a=e==null?void 0:e.hits)===null||a===void 0?void 0:a.returned)!==null&&l!==void 0?l:0,!(T!=null&&T.length)&&((o=this.pageElements)===null||o===void 0?void 0:o.fts)?(T=(v=(c=this.pageElements.item_metadata)===null||c===void 0?void 0:c.hits)===null||v===void 0?void 0:v.hits,this.totalResults=(f=(p=(h=this.pageElements.item_metadata)===null||h===void 0?void 0:h.hits)===null||p===void 0?void 0:p.total)!==null&&f!==void 0?f:0,this.returnedCount=(P=(m=(A=this.pageElements.item_metadata)===null||A===void 0?void 0:A.hits)===null||m===void 0?void 0:m.returned)!==null&&P!==void 0?P:0,this.handleFederatedPageElements()):!(T!=null&&T.length)&&((H=N==null?void 0:N.hits)===null||H===void 0?void 0:H.hits)?(T=N.hits.hits,this.totalResults=(C=N.hits.total)!==null&&C!==void 0?C:0,this.returnedCount=(k=N.hits.returned)!==null&&k!==void 0?k:0):!((Re=this.pageElements)===null||Re===void 0)&&Re.lending?T=this.handleLendingPageElement():!((Pe=this.pageElements)===null||Pe===void 0)&&Pe.web_archives&&(T=this.handleWebArchivesPageElement()),this.results=this.formatHits(T);let Ie=e==null?void 0:e.aggregations;!(this.aggregations&&Object.keys(this.aggregations).length>0)&&(N==null?void 0:N.aggregations)&&(Ie=N.aggregations),Ie&&this.buildAggregations(Ie),e!=null&&e.collection_titles&&(this.collectionTitles=(He=e.collection_titles)!==null&&He!==void 0?He:{}),e!=null&&e.collection_extra_info&&(this.collectionExtraInfo=(Oe=e.collection_extra_info)!==null&&Oe!==void 0?Oe:null),e!=null&&e.account_extra_info&&(this.accountExtraInfo=(Ue=e.account_extra_info)!==null&&Ue!==void 0?Ue:null)}formatHits(e){var t;return(t=e==null?void 0:e.map(i=>{var n;return ot.createResult((n=i.hit_type)!==null&&n!==void 0?n:this.schemaHitType,i)}))!==null&&t!==void 0?t:[]}buildAggregations(e){this.aggregations=Object.entries(e).reduce((t,[i,n])=>(t[i]=new ii(n),t),{})}handleLendingPageElement(){var e,t;const i=(e=this.pageElements)===null||e===void 0?void 0:e.lending,n=(t=i.loans)!==null&&t!==void 0?t:[];this.totalResults=n.length,this.returnedCount=this.totalResults;for(const r of Gi)i[r]=this.formatHits(i[r]);return n}handleWebArchivesPageElement(){var e;const t=Ki((e=this.pageElements)===null||e===void 0?void 0:e.web_archives);return this.totalResults=t.length,this.returnedCount=this.totalResults,t}handleFederatedPageElements(){var e,t,i,n;const r=["fts","tvs","rcs","whisper"];for(const a of r){this.federatedResults?this.federatedResults[a]=[]:this.federatedResults={[a]:[]};const l=(t=(e=this.pageElements)===null||e===void 0?void 0:e[a])===null||t===void 0?void 0:t.hits;l!=null&&l.hits&&(this.federatedResults[a]=this.formatHits(l==null?void 0:l.hits)),this.totalResults+=(i=l==null?void 0:l.total)!==null&&i!==void 0?i:0,this.returnedCount+=(n=l==null?void 0:l.returned)!==null&&n!==void 0?n:0}}static createResult(e,t){switch(e){case"item":return new _(t);case"asr_text":case"text":case"asr_text":return new w(t);case"favorited_search":return new me(t);case"web_archive":return new Ne(t);case"tv_clip":return new b(t);default:return new _(t)}}}class Xi{constructor(e){this.clientParameters=e.client_parameters,this.backendRequests=e.backend_requests,this.kind=e.kind}}class Yi{constructor(e){var t,i,n;this.rawResponse=e,this.request=new Xi(e.request),this.responseHeader=(t=e.response)===null||t===void 0?void 0:t.header,this.sessionContext=e.session_context,this.response=new ot((i=e.response)===null||i===void 0?void 0:i.body,(n=e.response)===null||n===void 0?void 0:n.hit_schema)}}var I;(function(s){s[s.METADATA=0]="METADATA",s[s.FULLTEXT=1]="FULLTEXT",s[s.RADIO=3]="RADIO",s[s.FEDERATED=4]="FEDERATED"})(I||(I={}));class ie{static aggregateSearchParamsAsString(e){if(e.omit)return"false";if(e.advancedParams){const t=e.advancedParams.map(n=>({terms:n}));return JSON.stringify(t)}if(e.simpleParams)return e.simpleParams.join(",")}static sortParamsAsString(e){return`${e.field}:${e.direction}`}static filterParamsAsString(e){return JSON.stringify(e)}static generateURLSearchParams(e){const t=new URLSearchParams;if(t.append("user_query",e.query),e.pageType&&t.append("page_type",String(e.pageType)),e.pageTarget&&t.append("page_target",String(e.pageTarget)),e.pageElements&&e.pageElements.length>0){const r=`[${e.pageElements.map(a=>`"${a}"`).join(",")}]`;t.append("page_elements",r)}if(e.rows!=null&&t.append("hits_per_page",String(e.rows)),e.page!=null&&t.append("page",String(e.page)),e.fields&&e.fields.length>0&&t.append("fields",e.fields.join(",")),e.filters&&Object.keys(e.filters).length>0){const n=this.filterParamsAsString(e.filters);n&&n!=="{}"&&t.append("filter_map",n)}if(e.sort&&e.sort.length>0){const n=e.sort.map(r=>this.sortParamsAsString(r));t.append("sort",n.join(","))}const i=e.aggregations;if(i){const n=this.aggregateSearchParamsAsString(i);n&&t.append("aggregations",n)}if(e.aggregationsSize!=null&&t.append("aggregations_size",String(e.aggregationsSize)),e.debugging&&t.append("debugging","true"),e.uid&&t.append("uid",e.uid),e.includeClientUrl!==!1){const n=window.location.href.slice(0,400);e.query.length<=1e3&&t.append("client_url",n)}return t}}var de;(function(s){s.networkError="SearchService.NetworkError",s.itemNotFound="SearchService.ItemNotFound",s.decodingError="SearchService.DecodingError",s.searchEngineError="SearchService.SearchEngineError"})(de||(de={}));class Qi extends Error{constructor(e,t,i){super(t),this.name=e,this.type=e,this.details=i}}const Lt={reCache:JSON.stringify({recompute:!0}),noCache:JSON.stringify({bypass:!0}),dontCache:JSON.stringify({no_compute:!0})};class Te{constructor(e){var t,i;this.baseUrl=(t=e==null?void 0:e.baseUrl)!==null&&t!==void 0?t:"archive.org",(e==null?void 0:e.includeCredentials)!==void 0?this.includeCredentials=e.includeCredentials:this.includeCredentials=window.location.href.match(/^https?:\/\/.*archive\.org(:[0-9]+)?/)!==null;const n=new URL(window.location.href).searchParams,r=n.get("scope"),a=n.get("verbose"),l=n.get("debugging"),o=n.get("cacheDebug");let c="";for(const v of Object.keys(Lt))if(n.get(v)){c=Lt[v];break}c=(i=n.get("caching"))!==null&&i!==void 0?i:c,(e==null?void 0:e.caching)!==void 0?this.cachingFlags=e.caching:c&&(this.cachingFlags=c),(e==null?void 0:e.debuggingEnabled)!==void 0?this.debuggingEnabled=e.debuggingEnabled:(l||o)&&(this.debuggingEnabled=!0),(e==null?void 0:e.scope)!==void 0?this.requestScope=e.scope:r&&(this.requestScope=r),(e==null?void 0:e.verbose)!==void 0?this.verbose=e.verbose:a&&(this.verbose=!!a)}async fetchUrl(e,t){var i,n;const r=new URL(e);this.requestScope&&r.searchParams.set("scope",this.requestScope),this.cachingFlags&&r.searchParams.set("caching",this.cachingFlags);let a;try{const l=(i=t==null?void 0:t.requestOptions)!==null&&i!==void 0?i:{credentials:this.includeCredentials?"include":"same-origin"};a=await fetch(r.href,l)}catch(l){const o=l instanceof Error?l.message:typeof l=="string"?l:"Unknown error";return this.getErrorResult(de.networkError,o)}try{const l=await a.json();this.verbose&&this.printResponse(l),l.debugging&&this.printDebuggingInfo(l);const o=(n=l.response)===null||n===void 0?void 0:n.error;return o?this.getErrorResult(de.searchEngineError,o.message,o.forensics):{success:l}}catch(l){const o=l instanceof Error?l.message:typeof l=="string"?l:"Unknown error";return this.getErrorResult(de.decodingError,o)}}getErrorResult(e,t,i){return{error:new Qi(e,t,i)}}printResponse(e){var t,i,n,r,a;try{const l=JSON.parse(JSON.stringify(e)),o=(n=(i=(t=l==null?void 0:l.response)===null||t===void 0?void 0:t.body)===null||i===void 0?void 0:i.hits)===null||n===void 0?void 0:n.hits;if(Array.isArray(o)&&o.length>1){const v=[];v.push(o[0]),v.push(`*** ${o.length-1} hits omitted ***`),l.response.body.hits.hits=v}const c=(a=(r=l==null?void 0:l.response)===null||r===void 0?void 0:r.body)===null||a===void 0?void 0:a.aggregations;c&&Object.entries(c).forEach(([v,h])=>{var p,f,A;if(((p=h==null?void 0:h.buckets)===null||p===void 0?void 0:p.length)>0){const m=JSON.parse(JSON.stringify(h));m.buckets=`*** ${(A=(f=m.buckets)===null||f===void 0?void 0:f.length)!==null&&A!==void 0?A:0} buckets omitted ***`,l.response.body.aggregations[v]=m}}),console.log("***** RESPONSE RECEIVED *****"),console.groupCollapsed("Response"),console.log(JSON.stringify(l,null,2)),console.groupEnd()}catch(l){console.error("Error printing search response:",l)}}printDebuggingInfo(e){var t,i;const n=e.debugging,r=(t=n.messages)!==null&&t!==void 0?t:[],a=(i=n.data)!==null&&i!==void 0?i:{};console.log("***** BEGIN DEBUGGING *****"),console.log("Full response:"),console.log(JSON.stringify(e,null,2)),console.group("Debug messages");for(const l of r)console.log(l);console.groupEnd(),console.group("Debug data");for(const[l,o]of Object.entries(a))console.log(l,o);console.groupEnd(),console.log("***** END DEBUGGING *****")}}class en extends Te{constructor(e){var t;super(e),this.servicePath=(t=e==null?void 0:e.servicePath)!==null&&t!==void 0?t:"/services/search/beta/page_production"}async performSearch(e){this.debuggingEnabled&&e.debugging===void 0&&(e.debugging=!0);const i=ie.generateURLSearchParams(e).toString(),n=`https://${this.baseUrl}${this.servicePath}/?service_backend=fts&${i}`;return this.fetchUrl(n)}}class tn extends Te{constructor(e){var t;super(e),this.servicePath=(t=e==null?void 0:e.servicePath)!==null&&t!==void 0?t:"/services/search/beta/page_production"}async performSearch(e){this.debuggingEnabled&&e.debugging===void 0&&(e.debugging=!0);const i=ie.generateURLSearchParams(e).toString(),n=`https://${this.baseUrl}${this.servicePath}/?${i}`;return this.fetchUrl(n)}}class nn extends Te{constructor(e){var t;super(e),this.servicePath=(t=e==null?void 0:e.servicePath)!==null&&t!==void 0?t:"/services/search/beta/page_production"}async performSearch(e){this.debuggingEnabled&&e.debugging===void 0&&(e.debugging=!0);const i=ie.generateURLSearchParams(e).toString(),n=`https://${this.baseUrl}${this.servicePath}/?service_backend=rcs&${i}`;return this.fetchUrl(n)}}class sn extends Te{constructor(e){var t;super(e),this.servicePath=(t=e==null?void 0:e.servicePath)!==null&&t!==void 0?t:"/services/search/beta/page_production"}async performSearch(e){this.debuggingEnabled&&e.debugging===void 0&&(e.debugging=!0);const i=ie.generateURLSearchParams(e).toString(),n=`https://${this.baseUrl}${this.servicePath}/?page_type=simple_federation&${i}`;return this.fetchUrl(n)}}class ne{constructor(e={}){this.backendOptions=e}async search(e,t=I.METADATA){const n=await ne.getBackendForSearchType(t,this.backendOptions).performSearch(e);return n.error?n:{success:new Yi(n.success)}}static getBackendForSearchType(e,t={}){switch(e){case I.FULLTEXT:return new en(t);case I.RADIO:return new nn(t);case I.FEDERATED:return new sn(t);case I.METADATA:default:return new tn(t)}}}ne.default=new ne;d([u((s,e={})=>{const{includeCredentials:t=!1,verbose:i=!1,scope:n="",baseUrl:r=""}=e;return`${s};${t};${i};${n};${r}`})],ne,"getBackendForSearchType",null);class Dt{constructor(){this.filterMap={}}addFilter(e,t,i){if(this.filterMap[e]||(this.filterMap[e]={}),this.filterMap[e][t]){const n=[].concat(this.filterMap[e][t],i);this.filterMap[e][t]=Array.from(new Set(n))}else this.filterMap[e][t]=i;return this}removeSingleFilter(e,t,i){var n;if(!(!((n=this.filterMap[e])===null||n===void 0)&&n[t]))return this;const r=[].concat(this.filterMap[e][t]),a=r.indexOf(i);return a>=0&&r.splice(a,1),this.filterMap[e][t]=r.length===1?r[0]:r,r.length===0&&delete this.filterMap[e][t],this.deleteFieldIfEmpty(e),this}removeFilters(e,t){return this.filterMap[e]?(delete this.filterMap[e][t],this.deleteFieldIfEmpty(e),this):this}deleteFieldIfEmpty(e){const t=this.filterMap[e];t&&Object.keys(t).length===0&&delete this.filterMap[e]}setFilterMap(e){return this.filterMap={...e},this}mergeFilterMap(e){for(const[t,i]of Object.entries(e))for(const[n,r]of Object.entries(i))if(Array.isArray(r))for(const a of r)this.addFilter(t,n,a);else this.addFilter(t,n,r);return this}build(){return this.filterMap}}let $=class extends le{constructor(){super(...arguments),this.searchServiceUrlOptions=this.initSearchServiceUrlOptions(),this.filterMap={},this.loadingSearchResults=!1,this.loadingAggregations=!1,this.defaultAggregationsChecked=!0,this.fullSearchResultsShown=!1,this.searchService=new ne(this.searchServiceUrlOptions)}get searchResults(){var e;return(e=this.searchResponse)===null||e===void 0?void 0:e.response.results}get searchAggregations(){var e;return(e=this.aggregationsResponse)===null||e===void 0?void 0:e.response.aggregations}initSearchServiceUrlOptions(){var e,t,i;const n=new URL(window.location.href).searchParams;return{baseUrl:(e=n.get("search_base_url"))!==null&&e!==void 0?e:"ia-petabox-ximm-pps-feature-include-favorited-searches.archive.org",servicePath:(t=n.get("search_service_path"))!==null&&t!==void 0?t:void 0,debuggingEnabled:(i=!!n.get("debugging"))!==null&&i!==void 0?i:void 0}}render(){var e;return M`
      <fieldset>
        <legend>Search options</legend>
        <form>
          <label for="search-input">Query: </label>
          <input
            type="text"
            id="search-input"
            placeholder="Search Term or identifier"
          />
          <input type="submit" value="Go" @click=${this.search} />

          <span class="input-with-label">
            <input type="checkbox" id="search-within-check" />
            <label for="search-input-check">Search within collection</label>
          </span>

          <span class="input-with-label">
            <input
              type="checkbox"
              id="debug-info-check"
              ?checked=${(e=this.searchServiceUrlOptions)===null||e===void 0?void 0:e.debuggingEnabled}
            />
            <label for="debug-info-check">Include debugging info</label>
          </span>

          <fieldset class="search-options">
            <legend>Search type:</legend>
            <span class="input-with-label">
              <input
                type="radio"
                id="mds"
                name="search-type"
                value="mds"
                checked
              />
              <label for="mds"> &nbsp;Metadata </label>
            </span>
            <span class="input-with-label">
              <input type="radio" id="fts" name="search-type" value="fts" />
              <label for="fts"> &nbsp;Full text </label>
            </span>
          </fieldset>

          <fieldset class="search-options">
            <legend>Search size:</legend>
            <div class="field-row">
              <label for="num-rows">Number of result rows:</label>
              <input type="number" id="num-rows" value="10" min="0" max="999" />
            </div>
            <div class="field-row">
              <label for="num-aggs">Number of aggregation buckets:</label>
              <input type="number" id="num-aggs" value="6" min="0" max="999" />
            </div>
          </fieldset>

          <fieldset class="search-options">
            <legend>Sort by title:</legend>
            <span class="input-with-label">
              <input
                type="radio"
                id="sort-none"
                name="sort"
                value="none"
                checked
              />
              <label for="sort-none"> &nbsp;None </label>
            </span>
            <span class="input-with-label">
              <input type="radio" id="sort-asc" name="sort" value="asc" />
              <label for="sort-asc"> &nbsp;Ascending </label>
            </span>
            <span class="input-with-label">
              <input type="radio" id="sort-desc" name="sort" value="desc" />
              <label for="sort-desc"> &nbsp;Descending </label>
            </span>
          </fieldset>

          <fieldset class="search-options">
            <legend>Filters:</legend>
            <select id="filter-field" @change=${this.filterFieldChanged}>
              <option value="mediatype">Mediatype</option>
              <option value="year" data-numeric="true">Year</option>
              <option value="subject">Subject</option>
              <option value="language">Language</option>
              <option value="creator">Creator</option>
              <option value="collection">Collection</option>
              <option value="lending___status">Lending status</option>
            </select>
            <select id="filter-constraint">
              <option value="inc">includes</option>
              <option value="exc">excludes</option>
              <option value="gt" data-numeric="true" hidden>&gt;</option>
              <option value="gte" data-numeric="true" hidden>&gt;=</option>
              <option value="lt" data-numeric="true" hidden>&lt;</option>
              <option value="lte" data-numeric="true" hidden>&lt;=</option>
            </select>
            <input type="text" id="filter-value" />
            <button type="button" @click=${this.addFilterClicked}>
              Add filter
            </button>
            <div id="applied-filters">${this.appliedFiltersTemplate}</div>
          </fieldset>

          <fieldset class="search-options">
            <legend>Include aggregations for:</legend>
            <span class="input-with-label">
              <input
                type="checkbox"
                id="aggs-default"
                checked
                @change=${this.toggleDefaultAggregations}
              />
              <label for="aggs-default">Default (all) </label>
            </span>
            ${this.aggregationCheckboxTemplate("mediatype","Mediatype")}
            ${this.aggregationCheckboxTemplate("year","Year")}
            ${this.aggregationCheckboxTemplate("subject","Subject")}
            ${this.aggregationCheckboxTemplate("language","Language")}
            ${this.aggregationCheckboxTemplate("creator","Creator")}
            ${this.aggregationCheckboxTemplate("collection","Collection")}
            ${this.aggregationCheckboxTemplate("lending___status","Lending")}
          </fieldset>
        </form>
      </fieldset>

      ${this.searchResults||this.loadingSearchResults?this.resultsTemplate:y}
    `}filterFieldChanged(e){var t,i;const r=!!e.target.selectedOptions[0].dataset.numeric,a=(i=(t=this.shadowRoot)===null||t===void 0?void 0:t.querySelectorAll("#filter-constraint option"))!==null&&i!==void 0?i:[];for(const l of a)l.toggleAttribute("hidden",!r&&!!l.dataset.numeric)}addFilterClicked(){const e=this.filterFieldInput.selectedOptions[0].value,t=this.filterValueInput.value,i=this.filterConstraintInput.selectedOptions[0].value;!e||!i||!t||(this.filterMap=new Dt().setFilterMap(this.filterMap).addFilter(e,t,i).build(),this.filterValueInput.value="")}removeFilterClicked(e){const t=e.target,{field:i,value:n,constraint:r}=t.dataset;i&&n&&r&&(this.filterMap=new Dt().setFilterMap(this.filterMap).removeSingleFilter(i,n,r).build())}get appliedFiltersTemplate(){const e=[];for(const[i,n]of Object.entries(this.filterMap))for(const[r,a]of Object.entries(n))if(Array.isArray(a))for(const l of a)e.push({field:i,value:r,constraint:l});else e.push({field:i,value:r,constraint:a});if(e.length===0)return M`<span>(no filters applied)</span>`;const t={inc:"includes",exc:"excludes",gt:">",gte:">=",lt:"<",lte:"<="};return Ji(e,({field:i,value:n,constraint:r})=>M`
        <span class="filter">
          <span class="filter-text"
            >'${i}' ${t[r]} '${n}'</span
          ><!--
       --><button
            type="button"
            class="remove-filter"
            data-field=${i}
            data-value=${n}
            data-constraint=${r}
            @click=${this.removeFilterClicked}
          >
            x
          </button>
        </span>
      `)}aggregationCheckboxTemplate(e,t){const i=`aggs-${e}`;return M`
      <span class="input-with-label">
        <input
          type="checkbox"
          id=${i}
          name="aggs"
          value=${e}
          checked
          ?disabled=${this.defaultAggregationsChecked}
        />
        <label for=${i}>${t} </label>
      </span>
    `}get resultsTemplate(){return M`
      <details>
        <summary>PPS URL params</summary>
        ${this.lastSearchParams?M`<div>
              Last search params:
              <pre class="params">${this.lastSearchParams}</pre>
            </div>`:y}
        ${this.lastAggregationParams?M`<div>
              Last aggregation params:
              <pre class="params">${this.lastAggregationParams}</pre>
            </div>`:y}
      </details>
      ${this.loadingSearchResults?M`<h3>Loading search results...</h3>`:[this.minimalSearchResultsTemplate,this.fullSearchResultsTemplate]}
      ${this.loadingAggregations?M`<h3>Loading aggregations...</h3>`:this.aggregationsTemplate}
    `}get minimalSearchResultsTemplate(){var e;return M`
      <h2>Search Results</h2>
      <table>
        <thead>
          <tr>
            <th>Identifier</th>
            <th>Title</th>
            ${this.snippetsHeaderTemplate}
          </tr>
        </thead>
        <tbody>
          ${(e=this.searchResults)===null||e===void 0?void 0:e.map(t=>{var i,n;return M`
              <tr>
                <td>${t.identifier}</td>
                <td>${(n=(i=t.title)===null||i===void 0?void 0:i.value)!==null&&n!==void 0?n:"(Untitled)"}</td>
                ${this.snippetTemplate(t)}
              </tr>
            `})}
        </tbody>
      </table>
    `}get fullSearchResultsTemplate(){return M`
      <button @click=${this.toggleFullSearchResults}>
        ${this.fullSearchResultsShown?"Hide":"Show"} all search results
      </button>
      ${this.fullSearchResultsShown?M`<pre>
          ${JSON.stringify(this.searchResults,null,2)}
        </pre
          >`:y}
    `}get aggregationsTemplate(){var e;return M`
      <div>
        <h2>Aggregations</h2>
        ${Object.entries((e=this.searchAggregations)!==null&&e!==void 0?e:{}).map(([t,i])=>M`
            <h3>${t}</h3>
            <p>
              ${i.buckets.map(n=>typeof n=="number"?n:`${n.key} (${n.doc_count})`).join(", ")}
            </p>
          `)}
      </div>
    `}get snippetsHeaderTemplate(){var e;return!((e=this.searchResults)===null||e===void 0)&&e.some(t=>t.highlight)?M`<th>Snippets</th>`:M`${y}`}snippetTemplate(e){return e.highlight?M`<td>${e.highlight.value}</td>`:M`${y}`}toggleDefaultAggregations(){var e;this.defaultAggregationsChecked=(e=this.defaultAggregationsCheckbox)===null||e===void 0?void 0:e.checked}toggleFullSearchResults(){this.fullSearchResultsShown=!this.fullSearchResultsShown}async search(e){var t;e.preventDefault();const i=this.searchInput.value,n=(t=this.shadowRoot)===null||t===void 0?void 0:t.querySelector("input[name='search-type']:checked"),r=(n==null?void 0:n.value)==="fts"?I.FULLTEXT:I.METADATA;this.fetchSearchResults(i,r),this.fetchAggregations(i,r)}async fetchSearchResults(e,t){var i,n,r,a,l,o;const c=((i=this.checkedSort)===null||i===void 0?void 0:i.value)==="none"?void 0:[{field:"title",direction:(n=this.checkedSort)===null||n===void 0?void 0:n.value}],v=Number((r=this.rowsInput)===null||r===void 0?void 0:r.value),h=(a=this.debugCheck)===null||a===void 0?void 0:a.checked,p={query:e,rows:v,sort:c,filters:this.filterMap,aggregations:{omit:!0},debugging:h,uid:"demo"};!((l=this.searchWithinCheck)===null||l===void 0)&&l.checked&&(p.pageTarget=e,p.pageType="collection_details"),this.lastSearchParams=decodeURIComponent(ie.generateURLSearchParams(p).toString()),this.loadingSearchResults=!0;const f=await this.searchService.search(p,t);this.loadingSearchResults=!1,f!=null&&f.success?this.searchResponse=f==null?void 0:f.success:(alert(`Oh noes: ${(o=f==null?void 0:f.error)===null||o===void 0?void 0:o.message}`),console.error("Error searching",f==null?void 0:f.error))}async fetchAggregations(e,t){var i,n,r,a;const l=(i=this.shadowRoot)===null||i===void 0?void 0:i.querySelectorAll("input[name='aggs']:checked"),o={simpleParams:l?[...l].map(f=>f.value):void 0},c=Number((n=this.numAggsInput)===null||n===void 0?void 0:n.value),v=(r=this.debugCheck)===null||r===void 0?void 0:r.checked,h={query:e,rows:0,filters:this.filterMap,aggregationsSize:c,debugging:v,uid:"demo"};this.defaultAggregationsChecked||(h.aggregations=o),this.lastAggregationParams=decodeURIComponent(ie.generateURLSearchParams(h).toString()),this.loadingAggregations=!0;const p=await this.searchService.search(h,t);this.loadingAggregations=!1,p!=null&&p.success?this.aggregationsResponse=p==null?void 0:p.success:(alert(`Oh noes: ${(a=p==null?void 0:p.error)===null||a===void 0?void 0:a.message}`),console.error("Error searching",p==null?void 0:p.error))}static get styles(){return wi`
      :host {
        font-size: 1.3rem;
      }

      .search-options {
        margin-top: 0.6rem;
      }

      .field-row {
        margin: 0.3rem 0;
      }

      fieldset {
        margin-bottom: 0.5rem;
      }

      #search-input {
        min-width: 220px;
      }

      #applied-filters {
        margin-top: 6px;
      }

      .filter {
        display: inline-block;
        margin-bottom: 3px;
        font-size: 1.1rem;
        font-family: sans-serif;
      }

      .filter-text {
        padding: 3px 3px 3px 6px;
        border-radius: 3px 0 0 3px;
        background: #ccc;
      }

      .remove-filter {
        all: unset;
        padding: 3px 6px;
        border-radius: 0 3px 3px 0;
        background: #ccc;
        cursor: pointer;
      }
      .remove-filter:hover {
        background: #999;
      }
      .remove-filter:active {
        background: #888;
      }

      .input-with-label {
        display: inline-flex;
        align-items: center;
        margin-right: 8px;
      }

      .params {
        white-space: pre-wrap;
      }
    `}};d([U("#search-input")],$.prototype,"searchInput",void 0);d([U("#search-within-check")],$.prototype,"searchWithinCheck",void 0);d([U("#debug-info-check")],$.prototype,"debugCheck",void 0);d([U("#num-rows")],$.prototype,"rowsInput",void 0);d([U("#num-aggs")],$.prototype,"numAggsInput",void 0);d([U("input[name='sort']:checked")],$.prototype,"checkedSort",void 0);d([U("#filter-field")],$.prototype,"filterFieldInput",void 0);d([U("#filter-constraint")],$.prototype,"filterConstraintInput",void 0);d([U("#filter-value")],$.prototype,"filterValueInput",void 0);d([U("#aggs-default")],$.prototype,"defaultAggregationsCheckbox",void 0);d([O()],$.prototype,"searchServiceUrlOptions",void 0);d([O()],$.prototype,"filterMap",void 0);d([O()],$.prototype,"searchResponse",void 0);d([O()],$.prototype,"aggregationsResponse",void 0);d([O()],$.prototype,"loadingSearchResults",void 0);d([O()],$.prototype,"loadingAggregations",void 0);d([O()],$.prototype,"lastSearchParams",void 0);d([O()],$.prototype,"lastAggregationParams",void 0);d([O()],$.prototype,"defaultAggregationsChecked",void 0);d([O()],$.prototype,"fullSearchResultsShown",void 0);$=d([Bi("app-root")],$);gi(_i`
        <app-root></app-root>
      `,document.querySelector("#demo"));
